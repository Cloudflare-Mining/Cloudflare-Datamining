{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "3",
	"locale": "en-us",
	"localesAvailable": [
		"ja-jp"
	],
	"post": {
		"authors": [
			{
				"name": "John Graham-Cumming",
				"slug": "john-graham-cumming",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5vGNsXzZrtSLn2X30pnpUY/6f350e7dd36058a6422f9199b452bb02/john-graham-cumming.jpg",
				"location": "Lisbon, Portugal",
				"website": null,
				"twitter": null,
				"facebook": null,
				"publiclyIndex": true
			}
		],
		"excerpt": "We've been experimenting with breaking up employees into random groups (of size 4) and setting up video hangouts between them. We're doing this to replace the serendipitous meetings that sometimes occur around coffee machines, in lunch lines or while waiting for the printer.",
		"feature_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/29vLbTdBxrfDiCvoKbUBYs/ead034b077c9f8cb76c32f078b60c0bc/creating-serendipity-with-python.png",
		"featured": false,
		"html": "<p>We&#39;ve been experimenting with breaking up employees into random groups (of size 4) and setting up video hangouts between them. We&#39;re doing this to replace the serendipitous meetings that sometimes occur around coffee machines, in lunch lines or while waiting for the printer. And also, we just want people to get to know each other.</p><p>Which lead to me writing some code. The core of which is <i>divide n elements into groups of at least size g minimizing the size of each group</i>. So, suppose an office has 15 employees in it then it would be divided into three groups of sizes 5, 5, 5; if an office had 16 employees it would be 4, 4, 4, 4; if it had 17 employees it would be 4, 4, 4, 5 and so on.</p><p>I initially wrote the following code (in Python):</p>\n            <pre class=\"language-python\"><code class=\"language-python\">    groups = [g] * (n//g)\n\n    for e in range(0, n % g):\n        groups[e % len(groups)] += 1</pre></code>\n            <p>The first line creates <code>n//g</code> (<code>//</code> is integer division) entries of size <code>g</code> (for example, if <code>g == 4</code> and <code>n == 17</code> then <code>groups == [4, 4, 4, 4]</code>). The <code>for</code> loop deals with the &#39;left over&#39; parts that don&#39;t divide exactly into groups of size <code>g</code>. If <code>g == 4</code> and <code>n == 17</code> then there will be one left over element to add to one of the existing <code>[4, 4, 4, 4]</code> groups resulting in <code>[5, 4, 4, 4]</code>.</p><p>The <code>e % len(groups)</code> is needed because it&#39;s possible that there are more elements left over after dividing into equal sized groups than there are entries in <code>groups</code>. For example, if <code>g == 4</code> and <code>n == 11</code> then <code>groups</code> is initially set to <code>[4, 4]</code> with three left over elements that have to be distributed into just two entries in <code>groups</code>.</p><p>So, that code works and here&#39;s the output for various sizes of <code>n</code> (and <code>g == 4</code>):</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">    4 [4]\n    5 [5]\n    6 [6]\n    7 [7]\n    8 [4, 4]\n    9 [5, 4]\n    10 [5, 5]\n    11 [6, 5]\n    12 [4, 4, 4]\n    13 [5, 4, 4]\n    14 [5, 5, 4]\n    15 [5, 5, 5]\n    16 [4, 4, 4, 4]\n    17 [5, 4, 4, 4]</pre></code>\n            <p>But the code irritated me because I felt there must be a simple formula to work out how many elements should be in each group. After noodling on this problem I decided to do something that&#39;s often helpful... make the problem simple and naive, or, at least, the solution simple and naive, and so I wrote this code:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">    groups = [0] * (n//g)\n\n    for i in range(n):\n        groups[i % len(groups)] += 1</pre></code>\n            <p>This is a really simple implementation. I don&#39;t like it because it loops <code>n</code> times but it helps visualize something. Imagine that <code>g == 4</code> and <code>n == 17</code>. This loop &#39;fills up&#39; each entry in <code>groups</code> like this (each square is an entry in <code>groups</code> and numbers in the squares are values of <code>i</code> for which that entry was incremented by the loop).</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5JXiBEQfNLAjuBnKH1et8n/466e646a6b1729261839d0206eb29b18/N-elements-G-sized-groups.png\" alt=\"\" class=\"kg-image\" width=\"2020\" height=\"948\" loading=\"lazy\"/>\n            \n            </figure><p>So groups ends up being <code>[5, 4, 4, 4]</code>. Â What this helps see is that the number of times <code>groups[i]</code> is incremented depends on the number of times the <code>for</code> loop &#39;loops around&#39; on the <code>i</code>th element. And that&#39;s something that&#39;s easy to calculate without looping.</p><p>So this means that the code is now simply:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">    groups = [1+max(0,n-(i+1))//(n//g) for i in range(n//g)]</pre></code>\n            <p>And to me that is more satisfying. <code>n//g</code> is the size of <code>groups</code> which makes the loop update each entry in <code>groups</code> once. Each entry is set to <code>1 + max(0, n-(i+1))//(n//g).</code> You can think of this as follows:</p><p>1. The <code>1</code> is the first element to be dropped into each entry in <code>groups</code>.</p><p>2. <code>max(0, n-(i+1))</code> is the number of elements left over once you&#39;ve placed <code>1</code> in each of the elements of <code>groups</code> up to position <code>i</code>. It&#39;s divided by <code>n//g</code> to work out how many times the process of sharing out elements (see the naive loop above) will loop around.</p><p>If #2 there isn&#39;t clear, consider the image above and imagine we are computing <code>groups[0]</code> (<code>n == 17</code> and <code>g == 4</code>). We place <code>1</code> in <code>groups[0]</code> leaving 16 elements to share out. If you naively shared them out you&#39;d loop around four times and thus need to add 16/4 elements to <code>groups[0]</code>making it 5.</p><p>Move on to <code>groups[1]</code> and place a <code>1</code> in it. Now there are 15 elements to share out, that&#39;s 15/4 (which is 3 in integer division) and so you place 4 in <code>groups[1]</code>. And so on...</p><p>And that solution pleases me most. It succinctly creates <code>groups</code> in one shot. Of course, I might have over thought this... and others might think the other solutions are clearer or more maintainable.</p>",
		"id": "4wAtLWwEvAD4zD9UWfijcu",
		"localeList": {
			"name": "Creating serendipity with Python Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "Translated for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "We've been experimenting with breaking up employees into random groups (of size 4) and setting up video hangouts between them. We're doing this to replace the serendipitous meetings that sometimes occur around coffee machines, in lunch lines or while waiting for the printer.",
		"metadata": {
			"title": "Creating serendipity with Python",
			"description": "We've been experimenting with breaking up employees into random groups (of size 4) and setting up video hangouts between them. We're doing this to replace the serendipitous meetings that sometimes occur around coffee machines, in lunch lines or while waiting for the printer.",
			"imgPreview": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4PZvuiEs6l6Oi36flmSFZc/753800dc0ced429bfc5ca42bc10693ba/creating-serendipity-with-python-WI7FOs.png"
		},
		"primary_author": {},
		"publicly_index": true,
		"published_at": "2021-02-25T16:30:59.000+00:00",
		"slug": "creating-serendipity-with-python",
		"tags": [
			{
				"id": "bEVrfgaUfNXu577TT9qb8",
				"name": "Python",
				"slug": "python"
			}
		],
		"title": "Creating serendipity with Python",
		"updated_at": "2024-10-09T23:13:17.506Z",
		"url": "https://blog.cloudflare.com/creating-serendipity-with-python"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.icon_aria_label": "Search",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"search.result_stat_empty": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong>",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"search.autocomplete_title": "Insert a query. Press enter to send",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}