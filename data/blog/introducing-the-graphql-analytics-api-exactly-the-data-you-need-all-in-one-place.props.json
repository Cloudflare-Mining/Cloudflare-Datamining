{
	"initialReadingTime": "4",
	"locale": "en-us",
	"localesAvailable": [
		"fr-fr",
		"de-de",
		"es-es"
	],
	"post": {
		"authors": [
			{
				"name": "Filipp Nisenzoun",
				"slug": "filipp",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/1MWl3tvwsvo2OvBT1ah0G8/94e8c65421136e2146a13e975895ae9d/filipp.png",
				"location": null,
				"website": null,
				"twitter": null,
				"facebook": null
			}
		],
		"excerpt": "With our new GraphQL Analytics API, all of your performance, security, and reliability data is available from one endpoint, and you can select exactly what you need.",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/3ppsVyLEow650DOeqCyU86/4e3cc4d1ae55233c3c551e3fc4fd6946/introducing-the-graphql-analytics-api-exactly-the-data-you-need-all-in-one-place.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/2YxXsuUFirzatEJfVPxplB/d8d33b9e77c622567ce06fc4ac3453c2/image4-4.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"1244\" loading=\"lazy\"/>\n            \n            </figure><p>Today we’re excited to announce a powerful and flexible new way to explore your Cloudflare metrics and logs, with an API conforming to the industry-standard <a href=\"https://graphql.org/\">GraphQL specification</a>. With our new GraphQL Analytics API, all of your performance, security, and reliability data is available from one endpoint, and you can select exactly what you need, whether it’s one metric for one domain or multiple metrics aggregated for all of your domains. You can ask questions like <i>“How many cached bytes have been returned for these three domains?”</i> Or, <i>“How many requests have all the domains under my account received?”</i> Or even, <i>“What effect did changing my firewall rule an hour ago have on the responses my users were seeing?”</i></p><p>The GraphQL standard also has strong <a href=\"https://graphql.org/community/\">community resources</a>, from extensive documentation to front-end clients, making it easy to start creating simple queries and progress to building your own sophisticated analytics dashboards.</p><h3>From many APIs...</h3><p>Providing insights has always been a core part of Cloudflare’s offering. After all, by using Cloudflare, you’re relying on us for key parts of your infrastructure, and so we need to make sure you have the data to manage, <a href=\"https://www.cloudflare.com/application-services/solutions/app-performance-monitoring/\">monitor</a>, and troubleshoot your website, app, or service. Over time, we developed a few key data APIs, including ones providing information regarding your domain’s traffic, DNS queries, and firewall events. This multi-API approach was acceptable while we had only a few products, but we started to run into some challenges as we added more products and analytics. We couldn’t expect users to adopt a new analytics API every time they started using a new product. In fact, some of the customers and partners that were relying on many of our products were already becoming confused by the various APIs.</p><p>Following the multi-API approach was also affecting how quickly we could develop new analytics within the Cloudflare dashboard, which is used by more people for data exploration than our APIs. Each time we built a new product, our product engineering teams had to implement a corresponding analytics API, which our user interface engineering team then had to learn to use. This process could take up to several months for each new set of analytics dashboards.</p><h3>...to one</h3><p>Our new GraphQL Analytics API solves these problems by providing access to all Cloudflare analytics. It offers a standard, flexible syntax for describing exactly the data you need and provides predictable, matching responses. This approach makes it an ideal tool for:</p><ol><li><p>Data exploration. You can think of it as a way to query your own virtual data warehouse, full of metrics and logs regarding the performance, security, and reliability of your Internet property.</p></li><li><p>Building amazing dashboards, which allow for flexible filtering, sorting, and drilling down or rolling up. Creating these kinds of dashboards would normally require paying thousands of dollars for a specialized analytics tool. You get them as part of our product and can customize them for yourself using the API.</p></li></ol><p>In a companion post that was also published today, my colleague Nick discusses using the GraphQL Analytics API to build dashboards. So, in this post, I’ll focus on examples of how you can use the API to explore your data. To make the queries, I’ll be using <a href=\"https://electronjs.org/apps/graphiql\"><i>GraphiQL</i></a>, a popular open-source querying tool that takes advantage of GraphQL’s capabilities.</p><h3>Introspection: what data is available?</h3><p>The first thing you may be wondering: if the GraphQL Analytics API offers access to so much data, how do I figure out what exactly is available, and how I can ask for it? GraphQL makes this easy by offering “introspection,” meaning you can query the API itself to see the available data sets, the fields and their types, and the operations you can perform. <i>GraphiQL</i> uses this functionality to provide a “Documentation Explorer,” query auto-completion, and syntax validation. For example, here is how I can see all the data sets available for a zone (domain):</p>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/6v9HqDr6UGaifduopecAMw/938d337c9c755c657b010676cc352f26/image1.gif\" alt=\"\" class=\"kg-image\" width=\"640\" height=\"283\" loading=\"lazy\"/>\n            \n            </figure><p>If I’m writing a query, and I’m interested in data on firewall events, auto-complete will help me quickly find relevant data sets and fields:</p>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/5RSkIKlSwBMy7BVZWPWp0q/78707d2d1cb9f894e17b10a99f68203c/image6.gif\" alt=\"\" class=\"kg-image\" width=\"640\" height=\"181\" loading=\"lazy\"/>\n            \n            </figure><h3>Querying: examples of questions you can ask</h3><p>Let’s say you’ve made a major product announcement and expect a surge in requests to your blog, your application, and several other zones (domains) under your account. You can check if this surge materializes by asking for the requests aggregated under your account, in the 30 minutes after your announcement post, broken down by the minute:</p>\n            <pre class=\"language-json\"><code class=\"language-json\">{\n viewer { \n   accounts (filter: {accountTag: $accountTag}) {\n     httpRequests1mGroups(limit: 30, filter: {datetime_geq: &quot;2019-09-16T20:00:00Z&quot;, datetime_lt: &quot;2019-09-16T20:30:00Z&quot;}, orderBy: [datetimeMinute_ASC]) {\n\t  dimensions {\n\t\tdatetimeMinute\n\t  }\n\t  sum {\n\t\trequests\n\t  }\n\t}\n   }\n }\n}</pre></code>\n            <p>Here is the first part of the response, showing requests for your account, by the minute:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/7hsWUNy86iymsBlbiOfjL5/3df5d3197830fd11ffd749864be46d5b/Screen-Shot-2019-09-17-at-2.21.41-PM.png\" alt=\"\" class=\"kg-image\" width=\"1120\" height=\"756\" loading=\"lazy\"/>\n            \n            </figure><p>Now, let’s say you want to compare the traffic coming to your blog versus your marketing site over the last hour. You can do this in one query, asking for the number of requests to each zone:</p>\n            <pre class=\"language-json\"><code class=\"language-json\">{\n viewer {\n   zones(filter: {zoneTag_in: [$zoneTag1, $zoneTag2]}) {\n     httpRequests1hGroups(limit: 2, filter: {datetime_geq: &quot;2019-09-16T20:00:00Z&quot;,\ndatetime_lt: &quot;2019-09-16T21:00:00Z&quot;}) {\n       sum {\n         requests\n       }\n     }\n   }\n }\n}</pre></code>\n            <p>Here is the response:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/1piQ5uNUOVcsX3AqEADplu/e742f55e98dcb76fe8540cefed0ebd21/Screen-Shot-2019-12-11-at-4.04.37-PM.png\" alt=\"\" class=\"kg-image\" width=\"2000\" height=\"1270\" loading=\"lazy\"/>\n            \n            </figure><p>Finally, let’s say you’re seeing an increase in error responses. Could this be correlated to an attack? You can look at error codes and firewall events over the last 15 minutes, for example:</p>\n            <pre class=\"language-json\"><code class=\"language-json\">{\n viewer {\n   zones(filter: {zoneTag: $zoneTag}) {\n     httpRequests1mGroups (limit: 100,\nfilter: {datetime_geq: &quot;2019-09-16T21:00:00Z&quot;,\ndatetime_lt: &quot;2019-09-16T21:15:00Z&quot;}) {\n       sum {\n         responseStatusMap {\n           edgeResponseStatus\n           requests\n         }\n       }\n     }\n    firewallEventsAdaptiveGroups (limit: 100,\nfilter: {datetime_geq: &quot;2019-09-16T21:00:00Z&quot;,\ndatetime_lt: &quot;2019-09-16T21:15:00Z&quot;}) {\n       dimensions {\n         action\n       }\n       count\n     }\n    }\n  }\n}</pre></code>\n            <p>Notice that, in this query, we’re looking at multiple datasets at once, using a common zone identifier to “join” them. Here are the results:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/7G5to39LSIQSOtv9KgIzIL/c2e0f56125a556cf20ac09a1388f3906/Screen-Shot-2019-12-11-at-4.28.28-PM.png\" alt=\"\" class=\"kg-image\" width=\"776\" height=\"1310\" loading=\"lazy\"/>\n            \n            </figure><p>By examining both data sets in parallel, we can see a correlation: 31 requests were “dropped” or blocked by the Firewall, which is exactly the same as the number of “403” responses. So, the 403 responses were a result of Firewall actions.</p><h3>Try it today</h3><p>To learn more about the GraphQL Analytics API and start exploring your Cloudflare data, follow the “Getting started” guide in our <a href=\"https://developers.cloudflare.com/analytics/graphql-api/getting-started/\">developer documentation</a>, which also has details regarding the current data sets and time periods available. We’ll be adding more data sets over time, so take advantage of the introspection feature to see the latest available.</p><p>Finally, to make way for the new API, the Zone Analytics API is now deprecated and will be sunset on May 31, 2020. The data that Zone Analytics provides is available from the GraphQL Analytics API. If you’re currently using the API directly, please follow our <a href=\"https://developers.cloudflare.com/analytics/migration-guides/zone-analytics/\">migration guide</a> to change your API calls. If you get your analytics using the Cloudflare dashboard or our <a href=\"https://docs.datadoghq.com/integrations/cloudflare/\">Datadog integration</a>, you don’t need to take any action.</p><h3>One more thing....</h3><p>In the API examples above, if you find it helpful to get analytics aggregated for all the domains under your account, we have something else you may like: a brand new <a href=\"https://dash.cloudflare.com/?account=analytics\">Analytics dashboard</a> (in beta) that provides this same information. If your account has many zones, the dashboard is helpful for knowing summary information on metrics such as requests, bandwidth, cache rate, and error rate. Give it a try and let us know what you think using the feedback link above the new dashboard.</p>",
		"id": "4pDXIFEVbZmJSNDNttfleG",
		"localeList": {
			"name": "Introducing the GraphQL Analytics API: exactly the data you need, all in one place Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "Translated for Locale",
			"deDE": "Translated for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "Translated for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "With our new GraphQL Analytics API, all of your performance, security, and reliability data is available from one endpoint.",
		"metadata": {
			"title": "Introducing the GraphQL Analytics API: exactly the data you need, all in one place",
			"description": "With our new GraphQL Analytics API, all of your performance, security, and reliability data is available from one endpoint.",
			"imgPreview": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/3G2Bv2OYBbEDtREOdgPbds/0783ab40e98a38bde32de1833b5eb9b6/introducing-the-graphql-analytics-api-exactly-the-data-you-need-all-in-one-place-ewGhT5.png"
		},
		"primary_author": {},
		"published_at": "2019-12-12T15:41:04.000+00:00",
		"slug": "introducing-the-graphql-analytics-api-exactly-the-data-you-need-all-in-one-place",
		"tags": [
			{
				"id": "2OotqBxtRdi5MuC90AlyxE",
				"name": "Analytics",
				"slug": "analytics"
			},
			{
				"id": "6QktrXeEFcl4e2dZUTZVGl",
				"name": "Product News",
				"slug": "product-news"
			},
			{
				"id": "5x72ei67SoD11VQ0uqFtpF",
				"name": "API",
				"slug": "api"
			},
			{
				"id": "6GfYtlrIy3UkkZHclLS3LX",
				"name": "GraphQL",
				"slug": "graphql"
			},
			{
				"id": "4HIPcb68qM0e26fIxyfzwQ",
				"name": "Developers",
				"slug": "developers"
			}
		],
		"title": "Introducing the GraphQL Analytics API: exactly the data you need, all in one place",
		"updated_at": "2024-08-27T02:07:00.110Z",
		"url": "https://blog.cloudflare.com/introducing-the-graphql-analytics-api-exactly-the-data-you-need-all-in-one-place"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.blurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}