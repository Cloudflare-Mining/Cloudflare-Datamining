<div class="mb2 gray5">5 min read</div>
<div class="post-content lh-copy gray1">
	<p>Cloudflare cuenta con una gran base de clientes de software como servicio (SaaS) que gestionan miles o millones de dominios de clientes que utilizan su servicio SaaS. Hemos ayudado a esos proveedores de SaaS a crecer, ampliando nuestra infraestructura y nuestros servicios a los dominios de sus clientes con un producto llamado <a href="https://blog.cloudflare.com/cloudflare-for-saas">Cloudflare para SaaS</a>. Estamos encantados hoy de ofrecer a nuestros proveedores de SaaS una nueva herramienta que ayudará a sus clientes a añadir una capa adicional de seguridad. Ahora pueden activar la autenticación de TLS mutuo en los dominios de sus clientes a través de nuestro producto Access.</p>
	<h3 id="manual-sobre-el-tls-mutuo"><strong>Manual sobre el TLS mutuo</strong></h3>
	<p>Cuando te conectas a un sitio web, deberías ver un icono de candado en la barra de direcciones. Se trata de tu navegador indicándote que te estás conectando a un sitio web a través de una conexión segura, y que el sitio web tiene un certificado TLS público válido. Los certificados TLS mantienen encriptado el tráfico de Internet mediante el uso de un par de claves públicas/privadas para encriptar y desencriptar el tráfico. También proporcionan autenticación, lo cual muestra a los clientes que se están conectando al servidor correcto.</p>
	<p>Para establecer una conexión segura, debe llevarse a cabo un <a href="https://www.cloudflare.com/es-es/learning/ssl/what-happens-in-a-tls-handshake" target="_blank">protocolo de enlace TLS</a>. Durante el mismo, el cliente y el servidor intercambian claves criptográficas, el cliente autentifica la identidad del servidor, y tanto el cliente como el servidor generan claves de sesión que luego se utilizan para encriptar el tráfico.</p>
	<p>Un protocolo de enlace TLS se parece a esto:</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/03/image1-102.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>En un protocolo de enlace TLS, el cliente valida siempre el certificado que proporciona el servidor, para asegurarse de que está enviando las solicitudes al destino correcto. De igual forma que el cliente necesita autenticar la identidad del servidor, a veces el servidor necesita autenticar al cliente, para asegurarse de que solo los clientes autorizados envíen solicitudes al servidor.</p>
	<p>Digamos que estás gestionando unos cuantos servicios: el servicio A introduce información en una base de datos. Esta base de datos es fundamental y solo debe tener entradas que haya enviado el servicio A. Ahora bien, ¿qué sucede si tienes un error en tu sistema y el servicio B realiza por accidente una llamada de escritura a la base de datos?</p>
	<p>Necesitas algo que compruebe si un servicio está autorizado a realizar llamadas a tu base de datos, como un "portero de discoteca". Un portero de discoteca tiene una lista VIP, y puede comprobar los DNI de las personas con la lista para ver si tienen permiso para entrar en el local. Los servidores pueden usar un modelo similar, que utiliza los certificados TLS como forma de identificación.</p>
	<p>Igual que un portero de discoteca tiene una lista VIP, un servidor puede tener un certificado de CA raíz desde la que emite certificados. Los certificados emitidos por la CA raíz se entregan entonces a los clientes. Estos certificados de cliente se pueden usar para identificar y autorizar al cliente. Siempre que un cliente presente un certificado válido, que el servidor pueda validar con la CA raíz, podrá realizar solicitudes. Si un cliente no presenta un certificado de cliente (es decir, no está en la lista VIP) o presenta un certificado de cliente no autorizado, el servidor puede optar por rechazar la solicitud. Este proceso de validación de los certificados de cliente y &nbsp;de servidor se conoce como <a href="https://www.cloudflare.com/es-es/learning/access-management/what-is-mutual-tls" target="_blank">autenticación de TLS mutuo</a> (mTLS), y se produce durante el protocolo de enlace TLS.</p>
	<p>Cuando no se utiliza mTLS, solo el servidor es responsable de presentar un certificado, que el cliente verifica. Con mTLS, tanto el cliente como el servidor presentan y validan los certificados del otro, como se muestra en la siguiente imagen.</p>
	<figure class="kg-card kg-image-card"><img src="https://lh6.googleusercontent.com/-jX-m0--vJzKCpz9UhlbWZNvl8hJDGoACckkNp0bAIdKGWk1Zr_k4R6gQqNBybVqbkkT8X9bopBZFsDa04iHJzkohQ4pMchvaEMV0secN2DR8pB4OX63Ysd-y6swZCzZG2_tjMAc" class="kg-image" alt="" loading="lazy"></figure>
	<h3 id="mtls-access-zero-trust"><strong>mTLS + Access = Zero Trust</strong></h3>
	<p>Hace unos años, añadimos la compatibilidad con mTLS a nuestro producto <a href="https://developers.cloudflare.com/cloudflare-one" target="_blank">Access</a>, lo cual permite que los clientes habiliten una política de <a href="https://www.cloudflare.com/es-es/learning/security/glossary/what-is-zero-trust" target="_blank">Zero Trust</a> en sus aplicaciones. Los clientes de Access pueden implementar una política que dicte que todos los clientes deben presentar un certificado válido al realizar una solicitud. Esto significa que las solicitudes realizadas sin un certificado válido, normalmente de clientes no autorizados, serán bloqueadas, y se añadirá una capa adicional de protección. Cloudflare ha permitido que los clientes configuren mTLS en sus dominios de Cloudflare estableciendo políticas de Access. El único pero es que, para utilizar esta función, tenías que ser el propietario del dominio. Ahora bien, ¿qué sucede si no eres el propietario de un dominio, pero sí gestionas el origen de ese dominio? Este es el caso de muchos de nuestros clientes, los proveedores de SaaS que amplían sus servicios a los dominios de sus clientes que no son de su propiedad.</p>
	<h3 id="ampliar-las-ventajas-de-cloudflare-con-los-proveedores-de-saas"><strong>Ampliar las ventajas de Cloudflare con los proveedores de SaaS</strong></h3>
	<p><a href="https://blog.cloudflare.com/cloudflare-for-saas">Cloudflare para SaaS</a> permite que los proveedores de SaaS amplíen las ventajas de la red de Cloudflare a los dominios de sus clientes. Estos dominios no son propiedad del proveedor de SaaS, pero usan el servicio del proveedor de SaaS, enrutado el tráfico de vuelta al origen del proveedor de SaaS.</p>
	<p>Al hacer esto, los proveedores de SaaS asumen la responsabilidad de proporcionar a sus clientes el mayor tiempo de actividad, un rendimiento extremadamente rápido y una seguridad inigualable. Algo que pueden ampliar con facilidad a sus clientes a través de Cloudflare.</p>
	<p>Cloudflare para SaaS empezó como <a href="https://blog.cloudflare.com/introducing-ssl-for-saas">SSL para SaaS</a>. Desarrollamos SSL para SaaS para que los proveedores de SaaS pudieran emitir certificados TLS para sus clientes, manteniendo a los clientes del proveedor de SaaS seguros y protegidos.</p>
	<p>Desde entonces, nuestros clientes de SaaS nos han pedido ampliar la compatibilidad de mTLS que creamos para nuestros clientes directos, pero a sus clientes.</p>
	<h3 id="-por-qu-querr-an-los-proveedores-de-saas-usar-mtls"><strong>¿Por qué querrían los proveedores de SaaS usar mTLS?</strong></h3>
	<p>Como proveedor de SaaS, hay una amplia gama de servicios que puedes ofrecer. Algunos de estos servicios requieren mayores controles de seguridad que otros.</p>
	<p>Digamos que la solución de SaaS que estás desarrollando es un procesador de pagos. Cada cliente tiene su propio punto final de la API al que sus usuarios envían solicitudes, p. ej., <em>pay.&lt;business_name&gt;.com. </em>Como procesador de pagos, no quieres que cualquier cliente o dispositivo pueda realizar solicitudes a tu servicio, solo quieres que lo hagan los dispositivos autorizados. Eso es exactamente lo que hace mTLS.</p>
	<p>Como proveedor de SaaS, puedes configurar una CA raíz para cada uno de los puntos finales de la API de tus clientes. Luego, haz que cada CA raíz emita certificados de cliente que tendrán que instalarse en los dispositivos autorizados. Una vez instalados los certificados de los clientes, solo hay que aplicar una comprobación de certificados válidos.</p>
	<p>Para resumir, de esta manera, como proveedor de SaaS, tus clientes pueden asegurarse ahora de que las solicitudes destinadas a su punto final de la API de procesamiento de pagos provengan solo de dispositivos válidos. Además, al implementar certificados CA raíz individuales para cada cliente, también evitas que los clientes que están autorizados para realizar solicitudes al punto final de la API de un cliente las realicen al punto final de la API de otro cliente, cuando no tienen autorización para ello.</p>
	<h3 id="-c-mo-lo-configuras-con-cloudflare"><strong>¿Cómo lo configuras con Cloudflare?</strong></h3>
	<p>Como proveedor de SaaS, <a href="https://developers.cloudflare.com/ssl/ssl-for-saas/getting-started" target="_blank">configura Cloudflare para SaaS</a> y añade los dominios de tus clientes como nombres de host personalizados. A continuación, en el panel de control de Cloudflare for Teams, <a href="https://developers.cloudflare.com/cloudflare-one/identity/devices/mutual-tls-authentication/#add-mtls-authentication-to-your-access-configuration" target="_blank">añade la autenticación mTLS</a> con solo unos clics.</p>
	<p>Esta función se encuentra actualmente en fase beta y está disponible para los clientes Enterprise. Si tienes algún comentario, coméntaselo a tu equipo de cuenta.</p>
</div>