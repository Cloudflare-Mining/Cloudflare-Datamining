<div class="mb2 gray5">9 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/12/http3-tube@2x-2.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Después de más de treinta años, HTTP sigue siendo la base de la web y uno de los protocolos más populares de Internet, no solo para navegar, ver vídeos y escuchar música, sino también para aplicaciones, comunicación entre dispositivos e incluso como base para desarrollar otros protocolos, formando lo que algunos denominan <em>"the second waist"</em> en el clásico diagrama del reloj de arena de Internet.</p>
	<p>¿Por qué HTTP tiene tanto éxito? Una respuesta es que alcanza el "punto óptimo" para la mayoría de las aplicaciones que necesitan un protocolo de aplicación. "<a href="https://httpwg.org/specs/rfc9205.html" target="_blank">Building Protocols with HTTP</a>" (que el grupo de trabajo de HTTP <a href="https://httpwg.org" target="_blank">publicó en 2022</a> como RFC de las prácticas recomendadas actuales) sostiene que el éxito de HTTP se puede atribuir a factores como:</p>
	<p>- Familiaridad por parte de los responsables de las implementaciones, especificadores, administradores, desarrolladores y usuarios.<br>- Disponibilidad de una variedad de implementaciones de cliente, servidor y proxy.<br>- Facilidad de uso.<br>- Disponibilidad de navegadores web.<br>- Reutilización de mecanismos existentes como la autenticación y el cifrado.<br>- Presencia de servidores y clientes HTTP en las implantaciones de destino.<br>- Capacidad para atravesar firewalls.</p>
	<p>Otro factor importante es la comunidad de personas que utilizan, implementan y estandarizan HTTP. Trabajamos juntos para mantener y desarrollar activamente el protocolo, para garantizar que sea interoperable y satisfaga las necesidades actuales. Si HTTP deja de evolucionar, otro protocolo lo sustituirá (con razón), y perderemos toda la inversión de la comunidad, el conocimiento común y la interoperabilidad.</p>
	<p>Cloudflare, al igual que otros muchos, contribuye a esta misión enviando a ingenieros a <a href="https://blog.cloudflare.com/cloudflare-and-the-ietf">participar en el IETF</a>, donde se debaten y estandarizan la mayoría de los protocolos de Internet. También asistimos y patrocinamos eventos de la comunidad como el <a href="https://httpwork.shop" target="_blank">Seminario sobre HTTP</a>, donde hablamos sobre los problemas que experimentan los usuarios y lo que necesitan, para entender así qué cambios podrían ayudarles.</p>
	<p>Entonces, ¿qué ocurrió en todas esas reuniones de grupos de trabajo, documentos de especificaciones y actividades paralelas en 2022? ¿Qué están haciendo los responsables del desarrollo y la implementación de protocolos web? Y, ¿qué será lo siguiente?</p>
	<h3 id="nueva-especificaci-n-http-3">Nueva especificación: HTTP/3</h3>
	<p>Desde el punto de vista de las especificaciones, lo más importante que ocurrió en 2022 fue la publicación de HTTP/3, ya que supuso un gran avance para atender los requisitos de las aplicaciones y sitios modernos, utilizando la red de forma más eficiente para promover su rendimiento.</p>
	<p>Allá por los años 90, HTTP/0.9 y HTTP/1.0 utilizaban una nueva conexión TCP para cada solicitud, un uso asombrosamente ineficiente de la red. HTTP/1.1 estableció conexiones persistentes (que se trasladaron a HTTP/1.0 con el encabezado `Connection: Keep-Alive`). Fue una mejora que ayudó a los servidores y a la red a hacer frente a la explosiva popularidad de la web, pero incluso entonces, la comunidad sabía que había limitaciones significativas, en particular, el bloqueo de encabezado de línea (cuando una solicitud pendiente en una conexión impide que se completen otras).</p>
	<p>Este inconveniente no importaba tanto en los años 90 y principios de los 2000, pero las páginas y las aplicaciones web de hoy en día plantean exigencias a la red que hacen que estas limitaciones sean críticas para el rendimiento. Las páginas suelen tener cientos de activos que compiten por los recursos de la red, y HTTP/1.1 no estaba a la altura. Tras algunos <a href="https://www.w3.org/Protocols/HTTP-NG" target="_blank">intentos fallidos</a>, la comunidad <a href="https://blog.cloudflare.com/http-2-for-web-developers">abordó finalmente estos problemas con HTTP/2 en 2015</a>.</p>
	<p>Sin embargo, la eliminación del bloqueo de encabezado de línea en HTTP dejó al descubierto el mismo problema una capa más abajo, en TCP. Dado que TCP es un protocolo que proporciona entrega de mensajes fiable y ordenada, la pérdida de un solo paquete en un flujo puede bloquear el acceso a los siguientes, aunque estén en los búferes del sistema operativo. Este obstáculo resulta ser un verdadero problema para la implementación de HTTP/2, especialmente en redes poco óptimas.</p>
	<p>La respuesta, por supuesto, era sustituir TCP, el venerable protocolo de transporte en el que se basa gran parte de Internet. Tras muchos debates y borradores en el <a href="https://quicwg.org" target="_blank">grupo de trabajo QUIC</a>, <a href="https://blog.cloudflare.com/quic-version-1-is-live-on-cloudflare">se publicó la versión 1 de QUIC como sustituto</a> en 2021.</p>
	<p>HTTP/3 es la versión de HTTP que utiliza QUIC. Aunque el grupo de trabajo la completó, a efectos prácticos, en 2021 junto con QUIC, su publicación se aplazó hasta 2022 para sincronizarla con la publicación de otros documentos (véase más abajo). El año 2022 también fue <a href="https://blog.cloudflare.com/cloudflare-view-http3-usage">clave para la implementación de HTTP/3</a>. Cloudflare fue testigo <a href="https://radar.cloudflare.com/adoption-and-usage?range=28d" target="_blank">de la creciente adopción y confianza</a> en el nuevo protocolo.</p>
	<p>Aunque solo hubo un breve intervalo de unos pocos años entre HTTP/2 y HTTP/3, la comunidad no tiene muchas ganas de trabajar en HTTP/4 a corto plazo. Tanto QUIC como HTTP/3 son nuevos, y el mundo está aún aprendiendo la mejor manera de implementar los protocolos, hacerlos funcionar y desarrollar sitios y aplicaciones que los utilicen. Si bien no podemos descartar una limitación que obligue a una nueva versión en el futuro, el IETF desarrolló estos protocolos basándose en la amplia experiencia del sector con las redes modernas, y dispone de una extensibilidad significativa para facilitar cualquier cambio necesario.</p>
	<h3 id="nuevas-especificaciones-http-b-sico">Nuevas especificaciones: HTTP "básico"</h3>
	<p>El otro acontecimiento destacado para las especificaciones HTTP en 2022 fue la publicación de sus documentos "básicos", el núcleo de las especificaciones de HTTP. Estos documentos incluyen: <a href="https://httpwg.org/specs/rfc9110.html" target="_blank">Semántica HTTP</a>, que engloba aspectos como los métodos, los encabezados, los códigos de estado y el formato de los mensajes; <a href="https://httpwg.org/specs/rfc9111.html" target="_blank">Caché HTTP</a>, es decir, cómo funcionan las cachés HTTP; <a href="https://httpwg.org/specs/rfc9112.html" target="_blank">HTTP/1.1</a>, se refiere a la asignación de la semántica a la conexión, utilizando el formato que todo el mundo conoce y quiere.</p>
	<p>Además, <a href="https://httpwg.org/specs/rfc9113.html" target="_blank">se ha vuelto a publicar HTTP/2</a> para integrarlo correctamente con el documento de Semántica, y para solucionar algunos problemas pendientes.</p>
	<p>Esta es la última de una larga serie de revisiones de estos documentos. En el pasado, hemos tenido la serie RFC 723x, RFC 2616 (quizás la más conocida), RFC 2068 y la más antigua de todas ellas, RFC 1945. Cada revisión ha tenido como objetivo facilitar su lectura, corregir errores, explicar mejor los conceptos y aclarar el funcionamiento del protocolo. Las funciones mal especificadas (o implementadas) son obsoletas. Se han añadido otras nuevas que mejoran el funcionamiento del protocolo. Para más detalles, consulta el apéndice "Cambios de..." de cada documento y, lo que es más importante, consulta siempre las últimas revisiones cuyos enlaces están más arriba. Las RFC más antiguas han quedado obsoletas.</p>
	<h3 id="implementaci-n-de-early-hints">Implementación de Early Hints</h3>
	<p>HTTP/2 incluía <em>server push</em>, una función diseñada para permitir a los servidores "enviar" un par solicitud/respuesta a los clientes cuando sabían que el cliente iba a necesitar algo, de modo que pudiera evitar la latencia derivada del proceso de hacer una solicitud y esperar la respuesta.</p>
	<p>Tras la finalización de HTTP/2 en 2015, Cloudflare y muchas otras implementaciones de HTTP no tardaron en <a href="https://blog.cloudflare.com/announcing-support-for-http-2-server-push-2">adoptar el mecanismo <em>server push</em></a> en previsión de grandes mejoras en el rendimiento. Lamentablemente, resultó ser más difícil de lo que parecía. <em>Server push</em> requiere, en la práctica, que el servidor prediga el futuro, no solo qué solicitudes enviará el cliente, sino también cuáles serán las condiciones de la red. Y, cuando el servidor se equivoca ("<em>over-pushing</em>"), las solicitudes enviadas compiten directamente con las solicitudes reales que está haciendo el navegador, lo que conlleva un coste de oportunidad significativo con un potencial real de afectar el rendimiento, en lugar de mejorarlo. El impacto es aún peor cuando el navegador ya tiene una copia en caché, por lo que no necesita el servicio <em>push</em> en absoluto.</p>
	<p>Como consecuencia, <a href="https://developer.chrome.com/blog/removing-push" target="_blank">Chrome eliminó server push para HTTP/2 en 2022</a>. Otros navegadores y servidores podrían seguir siendo compatibles, pero la comunidad parece estar de acuerdo en que actualmente solo es adecuado para usos especializados, como el <a href="https://www.rfc-editor.org/rfc/rfc8030.html" target="_blank">protocolo Web Push</a> específico de las notificaciones del navegador.</p>
	<p>Sin embargo, eso no significa que nos rindamos. El código de estado <a href="https://httpwg.org/specs/rfc8297.html" target="_blank">103 (Early Hints)</a> fue publicado como RFC experimental por el grupo de trabajo de HTTP en 2017. Permite a un servidor enviar <em>indicaciones</em> al navegador en una respuesta no final, antes de la respuesta final "real". Es útil si sabes que el contenido va a incluir algunos enlaces a recursos que el navegador obtendrá, pero necesitas más tiempo para hacer llegar la respuesta al cliente (porque tardará más en generarse, o porque el servidor necesita obtenerla de otro lugar, como hace una CDN).</p>
	<p>Early Hints se puede utilizar en muchas situaciones para las que se diseñó <em>server push</em>, por ejemplo, cuando tienes CSS y JavaScript que una página va a necesitar cargar. En teoría, no son tan óptimas como <em>server push</em> porque solo permiten enviar indicaciones cuando hay una solicitud pendiente, y porque hacer llegar las indicaciones al cliente y actuar en consecuencia añade cierta latencia.</p>
	<p>En la práctica, sin embargo, Cloudflare y nuestros socios (como Shopify y Google) han pasado 2022 experimentando con Early Hints y han descubierto que su uso es mucho más seguro y cuenta con <a href="https://blog.cloudflare.com/early-hints-performance">prometedoras ventajas de rendimiento</a> que incluyen reducciones significativas en las métricas clave del rendimiento web.</p>
	<p>Estamos entusiasmados con el potencial que muestra Early Hints, tanto que lo <a href="https://blog.cloudflare.com/es-es/early-hints-on-cloudflare-pages-es-es">hemos integrado en Cloudflare Pages</a>. También estamos evaluando nuevas formas de mejorar el rendimiento utilizando esta nueva capacidad del protocolo.</p>
	<h3 id="intermediaci-n-que-prioriza-la-privacidad">Intermediación que prioriza la privacidad</h3>
	<p>Para muchos, las extensiones más emocionantes del protocolo HTTP en 2022 se centraron en la intermediación, la capacidad de insertar proxies, puertas de enlace y componentes similares en el protocolo para lograr objetivos específicos, a menudo centrados en mejorar la privacidad.</p>
	<p>El <a href="https://ietf-wg-masque.github.io" target="_blank">grupo de trabajo MASQUE</a>, por ejemplo, se esfuerza por añadir nuevas funciones de tunelización a HTTP, de modo que un intermediario pueda pasar el tráfico tunelizado a otro servidor.</p>
	<p>Si bien CONNECT ha posibilitado túneles TCP durante mucho tiempo, MASQUE ha habilitado <a href="https://datatracker.ietf.org/doc/html/rfc9298" target="_blank">túneles UDP</a>, lo que permite tunelizar más protocolos de forma más eficiente, incluidos QUIC y HTTP/3.</p>
	<p>En Cloudflare, estamos encantados de trabajar con Apple para utilizar MASQUE con el fin de implementar <a href="https://blog.cloudflare.com/es-es/icloud-private-relay-es-es">iCloud Private Relay</a> y mejorar la privacidad de sus clientes sin depender únicamente de una empresa. También nos interesa mucho el trabajo futuro del grupo de trabajo, incluida la <a href="https://blog.cloudflare.com/unlocking-quic-proxying-potential">tunelización de IP</a> que permitirá las VPN basadas en MASQUE.</p>
	<p>Otra especificación centrada en la intermediación es <a href="https://www.ietf.org/archive/id/draft-ietf-ohai-ohttp-06.html" target="_blank">Oblivious HTTP</a> (u OHTTP). OHTTP utiliza conjuntos de intermediarios para impedir que el servidor utilice conexiones o direcciones IP para rastrear a los clientes, garantizando así una mayor privacidad para acciones como la recopilación de telemetría u otros datos confidenciales. Se está completando el proceso de estandarización de esta especificación, y la estamos utilizando para crear un nuevo producto importante, <a href="https://blog.cloudflare.com/building-privacy-into-internet-standards-and-how-to-make-your-app-more-private-today">Privacy Gateway</a>, para proteger la privacidad de los clientes de nuestros clientes.</p>
	<p>Creemos, al igual que otros muchos en la comunidad de Internet, que esto es solo el principio porque la intermediación puede realizar particiones de la comunicación, una <a href="https://intarchboard.github.io/draft-obliviousness/draft-kpw-iab-privacy-partitioning.html" target="_blank">herramienta útil para mejorar la privacidad</a>.</p>
	<h3 id="seguridad-de-los-protocolos">Seguridad de los protocolos</h3>
	<p>Por último, en 2022 se trabajó mucho en los aspectos de HTTP relacionados con la seguridad. La especificación <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-digest-headers.html" target="_blank">Digest Fields</a> es una actualización del ya antiguo campo del encabezado `Digest`, que permite añadir resúmenes de integridad a los mensajes. La especificación <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-message-signatures.html" target="_blank">HTTP Message Signatures</a> permite firmas criptográficas en solicitudes y respuestas, algo que tiene una amplia implementación<em> ad hoc</em>, pero que hasta ahora carecía de un estándar. Ambas especificaciones se encuentran en las fases finales de estandarización.</p>
	<p>La <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-rfc6265bis.html" target="_blank">revisión de la especificación Cookie</a> también experimentó muchos avances en 2022, y debería ser definitiva en breve. Dado que no es posible deshacerse de ellas por completo a corto plazo, se ha trabajado mucho para limitar su funcionamiento con el fin de mejorar la privacidad y la seguridad, incluido un nuevo atributo `SameSite`.</p>
	<p>Otro conjunto de especificaciones relacionadas con la seguridad en el que Cloudflare <a href="https://blog.cloudflare.com/cloudflare-supports-privacy-pass">ha invertido muchos años</a> es <a href="https://www.ietf.org/archive/id/draft-ietf-privacypass-architecture-09.html" target="_blank">Privacy Pass</a>, también conocido como "Tokens de acceso privado". Se trata de tokens criptográficos que pueden garantizar que los clientes son usuarios reales, no bots, sin utilizar un desafío CAPTCHA intrusivo y sin rastrear la actividad del usuario en Internet. En HTTP, adoptan la forma de un <a href="https://www.ietf.org/archive/id/draft-ietf-privacypass-auth-scheme-07.html" target="_blank">nuevo esquema de autenticación</a>.</p>
	<p>Aunque aún no se ha iniciado totalmente el proceso de estandarización de Privacy Pass, en 2022 <a href="https://blog.cloudflare.com/es-es/eliminating-captchas-on-iphones-and-macs-using-new-standard-es-es">Apple lo implementó de forma general</a>, lo que supone un gran avance. Y como <a href="https://blog.cloudflare.com/es-es/turnstile-private-captcha-alternative-es-es">Cloudflare lo utiliza en Turnstile</a>, nuestra alternativa CAPTCHA, tus usuarios pueden disfrutar desde ya de mejores experiencias.</p>
	<h3 id="-y-en-2023">¿Y en 2023?</h3>
	<p>¿Qué será lo próximo? Además de las especificaciones anteriores que aún no se han completado, el grupo de trabajo de HTTP tiene otros proyectos en curso, como un <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html" target="_blank">método QUERY</a> (como GET, pero con un cuerpo), <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-resumable-upload.html" target="_blank">cargas reanudables</a> (basadas en el protocolo <a href="https://tus.io" target="_blank">tus</a>), <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-variants.html" target="_blank">variantes</a> (un encabezado Vary mejorado para el almacenamiento en caché), <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-sfbis.html" target="_blank">mejoras en los campos estructurados</a> (incluido un nuevo tipo de fecha) y una forma de <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-retrofit.html" target="_blank">readaptar los encabezados existentes a los campos estructurados</a>. Escribiremos más sobre estos proyectos a medida que avancen en 2023.</p>
	<p>En el <a href="https://github.com/HTTPWorkshop/workshop2022/blob/main/report.md" target="_blank">Seminario sobre HTTP 2022</a>, la comunidad también habló sobre nuevos trabajos que podemos emprender para mejorar el protocolo. Algunas de las ideas que se debatieron fueron mejorar nuestra infraestructura común de pruebas del protocolo (ahora mismo tenemos <a href="https://github.com/httpwg/wiki/wiki/HTTP-Testing-Resources" target="_blank">algunos recursos</a>, pero podría mejorar), perfeccionar (o sustituir) los <a href="https://httpwg.org/specs/rfc7838.html" target="_blank">servicios alternativos</a> para permitir una gestión más inteligente y correcta de las conexiones, y cambios más radicales, como <a href="https://mnot.github.io/I-D/draft-nottingham-binary-structured-headers.html" target="_blank">serializaciones alternativas y binarias de los encabezados</a>.</p>
	<p>También hay un debate continuo en la comunidad sobre si HTTP debe dar cabida a pub/sub, o si se debe estandarizar para funcionar sobre WebSockets (y pronto, WebTransport). Aunque es difícil decirlo ahora, el trabajo adyacente sobre <a href="https://datatracker.ietf.org/group/moq/about" target="_blank">Media over QUIC</a> que acaba de comenzar <em>podría</em> ofrecer una oportunidad para impulsarlo.</p>
	<p>Por supuesto, eso no es todo, y está por ver lo que sucederá con HTTP en 2023 (y más adelante). HTTP sigue evolucionando, aunque siga siendo compatible con el mayor sistema de hipertexto distribuido jamás concebido, la red mundial.</p>
</div>