<div class="mb2 gray5">2 min read</div><img class="mr2" src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6xppiMJjjKaKMRMJYRsCe3/3e4baeb14c98c05f86cdc0f2dfbbd49a/a-note-about-kerckhoffs-principle.jpg" alt="">
<div class="post-content lh-copy gray1">
	<p></p>
	<p>Image credit: <a href="http://www.flickr.com/photos/psicologiaclinica">psicologiaclinica</a></p>
	<p>The other day I wrote a long post describing in detail <a href="https://blog.cloudflare.com/keeping-passwords-safe-by-staying-up-to-date">how we used to and how we now store customer passwords</a>. Some people were surprised that we were open about this, and others wanted to understand exactly what part of a security system needs to be kept secret.</p>
	<p>The simple answer is: a security system is only secure if its details can be safely shared with the world. This is known as <a href="https://en.wikipedia.org/wiki/Kerckhoffs's_principle">Kerckhoff's Principle</a>.</p>
	<p>The principle is sometimes stated as "a cryptosystem should be secure even if everything about the system, except the key, is public knowledge" or using Claude Shannon's simpler version: "the enemy knows the system".</p>
	<p>The idea is that if any part of a cryptosystem (except the individual secret key) has to be kept secret then the cryptosystem is not secure. That's because if the simple act of disclosing some detail of the system were to make it suddenly insecure then you've got a problem on your hands.</p>
	<p>You've somehow got to keep that detail secret and for that you'll need a cryptosystem! Given that the whole point of the cryptosystem was to keep secrets, it's useless if it needs some other system to keep itself secret.</p>
	<p>So, the gold standard for any secret keeping system is that all its details should be able to be made public without compromising the security of the system. The security relies on the system itself, not the secrecy of the system. (And as a corollary if anyone tells you've they've got some supersecret encryption system they can't tell you about then it's likely rubbish).</p>
	<p>A great example of this is the breaking of the <a href="https://en.wikipedia.org/wiki/Enigma_machine">Nazi German Enigma cipher</a> during the Second World War. By stealing machines, receiving information from other secret services, and reading the manuals, the Allies knew everything there was to know about how the Enigma machine worked.</p>
	<p>Engima's security relied not on its secrecy, but on its complexity (and on keeping the daily key a secret). Engima was broken by attacking the mathematics behind its encryption and building special machines to exploit mathematical flaws in the encryption.</p>
	<p>That's just as true today. The security of HTTPS, SSL and ciphers like AES or RSA rely on the complexity of the algorithm, not on keeping them secret. In fact, they are all published, detailed standards. The only secret is the key that's chosen when you connect to a secure web site (that's done automatically and randomly by your browser and the server) or when you encrypt a document using a program like GPG.</p>
	<p>Another example is home security. Imagine if you bought a lock that stated that it must be hidden from view so that no one knew what type of lock you had installed. That wouldn't provide much reassurance that the lock was any good. The security of the lock should depend on its mechanism and you keeping the key safe not on you keeping the lock a secret!</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2a7e3lQQwJd4EQe1cvSE3A/87c92e843914277edca262a9758859bf/7190315846_1a651daaf7.jpeg.scaled500.jpg" alt="A note about Kerckhoff's
Principle" class="kg-image" width="400" height="70" loading="lazy">

	</figure>
	<p>Image credit: <a href="http://www.flickr.com/photos/paulorear">paul.orear</a></p>
	<p>When storing passwords securely we rely on the complexity of the bcrypt algorithm. Everything about our storage mechanism is assumed to be something that can be made public. So it's safe to say that we choose a random salt, and that we use bcrypt. The salt is not a key, and it does not need to be kept secret.</p>
	<p>But even more we assume that in the horrible case that our password database were accessed it will still be secure even though the hashed passwords and salts would be available to a hacker. The security of the system relies on the security of bcrypt and nothing else.</p>
	<p>Of course, as a practical matter we don't leave the database lying around for anyone to access. It's kept behind firewalls and securely stored. But when thinking about security it's important to think about the worst case situation, a full disclosure of the secured information, and rely on the algorithm's strength and nothing else.</p>
</div>