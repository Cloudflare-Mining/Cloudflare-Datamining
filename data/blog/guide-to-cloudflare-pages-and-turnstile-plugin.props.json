{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "4",
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Sally Lee",
				"slug": "sallylee",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6m4mhc9h8zDHqerfe40Vda/4d65720d1840c843570c5d77741f6669/sallylee.jpeg",
				"location": "San Francisco Bay Area",
				"website": null,
				"twitter": null,
				"facebook": null,
				"publiclyIndex": true
			}
		],
		"excerpt": "Learn how to use Cloudflare Pages and Turnstile to deploy your website quickly and easily while protecting it from bots, without compromising user experience. Follow our tutorial here for a seamless integration",
		"feature_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3f5JQGx1ehAdTI3Y2EUbnG/7ca9c0ffb5aedea7e76b8d492d9db06d/guide-to-cloudflare-pages-and-turnstile-plugin.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2K7WFOjmj3tTCZ2C90XOzp/1fd9487aaaf44a7b6f853f82f9e2be5f/image1-26.png\" alt=\"Building secure websites: a guide to Cloudflare Pages and Turnstile Plugin\" class=\"kg-image\" width=\"1999\" height=\"1125\" loading=\"lazy\"/>\n            \n            </figure><p>Balancing developer velocity and security against bots is a constant challenge. Deploying your changes as quickly and easily as possible is essential to stay ahead of your (or your customers’) needs and wants. Ensuring your website is safe from malicious bots — without degrading user experience with alien hieroglyphics to decipher just to prove that you are a human — is no small feat. With <a href=\"https://pages.cloudflare.com/\">Pages</a> and <a href=\"https://developers.cloudflare.com/turnstile/\">Turnstile</a>, we&#39;ll walk you through just how easy it is to have the best of both worlds!</p><p><a href=\"https://pages.cloudflare.com/\">Cloudflare Pages</a> offer a seamless platform for deploying and scaling your websites with ease. You can get started right away with configuring your websites with a quick integration using your git provider, and get set up with unlimited requests, bandwidth, collaborators, and projects.</p><p>Cloudflare Turnstile is Cloudflare’s <a href=\"https://www.cloudflare.com/products/turnstile/\">CAPTCHA alternative solution</a> where your users don’t ever have to solve another puzzle to get to your website, no more stop lights and fire hydrants. You can protect your site without having to put your users through an annoying user experience. If you are already using another CAPTCHA service, we have made it easy for you to <a href=\"https://developers.cloudflare.com/turnstile/migration/\">migrate over to Turnstile</a> with minimal effort needed. Check out the <a href=\"https://developers.cloudflare.com/turnstile/\">Turnstile documentation</a> to get started.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"alright-what-are-we-building\">Alright, what are we building?</h3>\n      <a href=\"#alright-what-are-we-building\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>In this tutorial, we&#39;ll walk you through integrating Cloudflare Pages with Turnstile to secure your website against bots. You&#39;ll learn how to deploy Pages, embed the Turnstile widget, validate the token on the server side, and monitor Turnstile analytics. Let’s build upon <a href=\"https://developers.cloudflare.com/pages/tutorials/forms/\">this tutorial</a> from Cloudflare’s developer docs, which outlines how to create an HTML form with Pages and Functions. We’ll also show you how to secure it by integrating with Turnstile, complete with client-side rendering and server-side validation, using the <a href=\"https://developers.cloudflare.com/pages/functions/plugins/turnstile/\">Turnstile Pages Plugin</a>!</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4DaVCMwbVOKW17aOgthwZh/f756f3466f64bc4f889a5b9ea497b910/Screenshot-2024-03-07-at-11.52.43.png\" alt=\"\" class=\"kg-image\" width=\"2000\" height=\"1425\" loading=\"lazy\"/>\n            \n            </figure>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"step-1-deploy-your-pages\">Step 1: Deploy your Pages</h3>\n      <a href=\"#step-1-deploy-your-pages\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>On the Cloudflare Dashboard, select your account and go to Workers &amp; Pages to create a new Pages application with your git provider. Choose the repository where you cloned the tutorial project or any other repository that you want to use for this walkthrough.</p>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5kZP90IyFiaZzl7fX608Dl/355af9d8c998c19e0c032df65d14c324/image2-23.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"1135\" loading=\"lazy\"/>\n            \n            </figure><p>The Build settings for this project is simple:</p><ul><li><p><b>Framework preset</b>: None</p></li><li><p><b>Build command</b>: npm install @cloudflare/pages-plugin-turnstile</p></li><li><p><b>Build output directory</b>: public</p></li></ul><p>Once you select “Save and Deploy”, all the magic happens under the hood and voilà! The form is already deployed.</p>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6I301dY7rRKreWxUwEuHs/7ea859c666d3c04b39c139c47d3b1c7f/image8-3.png\" alt=\"\" class=\"kg-image\" width=\"883\" height=\"363\" loading=\"lazy\"/>\n            \n            </figure>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"step-2-embed-turnstile-widget\">Step 2: Embed Turnstile widget</h3>\n      <a href=\"#step-2-embed-turnstile-widget\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Now, let’s navigate to Turnstile and add the newly created Pages site.</p>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5BadX97G4W7s5FUuMx82MV/891f196d7f6840d7773684c13d9173ab/image5-14.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"1134\" loading=\"lazy\"/>\n            \n            </figure><p>Here are the widget configuration options:</p><ul><li><p><b>Domain</b>: All you need to do is add the domain for the Pages application. In this example, it’s “pages-turnstile-demo.pages.dev”. For each deployment, Pages generates a <a href=\"https://developers.cloudflare.com/pages/configuration/preview-deployments/\">deployment specific preview</a> subdomain. Turnstile covers all subdomains automatically, so your Turnstile widget will work as expected even in your previews. This is covered more extensively in our <a href=\"https://developers.cloudflare.com/turnstile/reference/domain-management/\">Turnstile domain management documentation</a>.</p></li><li><p><b>Widget Mode</b>: There are three types of <a href=\"https://developers.cloudflare.com/turnstile/reference/widget-types/\">widget modes</a> you can choose from.</p></li><li><p><b>Managed</b>: This is the recommended option where Cloudflare will decide when further validation through the checkbox interaction is required to confirm whether the user is a human or a bot. This is the mode we will be using in this tutorial.</p></li></ul>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/78AnsttFltsSDTWMXxFjnH/d1ee443938d095a4d44874607c046760/Screenshot-2024-03-07-at-11.54.30.png\" alt=\"\" class=\"kg-image\" width=\"2000\" height=\"288\" loading=\"lazy\"/>\n            \n            </figure><ul><li><p><b>Non-interactive</b>: This mode does not require the user to interact and check the box of the widget. It is a non-intrusive mode where the widget is still visible to users but requires no added step in the user experience.</p></li></ul>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2EAIzU3P7JhQKFteYXb4Hq/1b39212a5393124a081bef94c7d9a07d/Screenshot-2024-03-07-at-11.55.00.png\" alt=\"\" class=\"kg-image\" width=\"2000\" height=\"279\" loading=\"lazy\"/>\n            \n            </figure><ul><li><p><b>Invisible</b>: Invisible mode is where the widget is not visible at all to users and runs in the background of your website.</p></li><li><p><b>Pre-Clearance setting</b>: With a clearance cookie issued by the Turnstile widget, you can configure your website to verify every single request or once within a session. To learn more about <a href=\"/integrating-turnstile-with-the-cloudflare-waf-to-challenge-fetch-requests\">implementing pre-clearance with Turnstile</a>, check out this blog post.</p></li></ul><p>Once you create your widget, you will be given a sitekey and a secret key. The sitekey is public and used to invoke the Turnstile widget on your site. The secret key should be stored safely for security purposes.</p><p>Let’s embed the widget above the Submit button. Your index.html should look like this:</p>\n            <pre class=\"language-html\"><code class=\"language-html\">&lt;!doctype html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n\t&lt;head&gt;\n\t\t&lt;meta charset=&quot;utf8&quot;&gt;\n\t\t&lt;title&gt;Cloudflare Pages | Form Demo&lt;/title&gt;\n\t\t&lt;meta name=&quot;theme-color&quot; content=&quot;#d86300&quot;&gt;\n\t\t&lt;meta name=&quot;mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;\n\t\t&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;\n\t\t&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;\n\t\t&lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;https://www.cloudflare.com/favicon-128.png&quot;&gt;\n\t\t&lt;link rel=&quot;stylesheet&quot; href=&quot;/index.css&quot;&gt;\n\t\t&lt;script src=&quot;https://challenges.cloudflare.com/turnstile/v0/api.js?onload=_turnstileCb&quot; defer&gt;&lt;/script&gt;\n\t&lt;/head&gt;\n\t&lt;body&gt;\n\n\t\t&lt;main&gt;\n\t\t\t&lt;h1&gt;Demo: Form Submission&lt;/h1&gt;\n\n\t\t\t&lt;blockquote&gt;\n\t\t\t\t&lt;p&gt;This is a demonstration of Cloudflare Pages with Turnstile.&lt;/p&gt;\n\t\t\t\t&lt;p&gt;Pages deployed a &lt;code&gt;/public&lt;/code&gt; directory, containing a HTML document (this webpage) and a &lt;code&gt;/functions&lt;/code&gt; directory, which contains the Cloudflare Workers code for the API endpoint this &lt;code&gt;&amp;lt;form&amp;gt;&lt;/code&gt; references.&lt;/p&gt;\n\t\t\t\t&lt;p&gt;&lt;b&gt;NOTE:&lt;/b&gt; On form submission, the API endpoint responds with a JSON representation of the data. There is no JavaScript running in this example.&lt;/p&gt;\n\t\t\t&lt;/blockquote&gt;\n\n\t\t\t&lt;form method=&quot;POST&quot; action=&quot;/api/submit&quot;&gt;\n\t\t\t\t&lt;div class=&quot;input&quot;&gt;\n\t\t\t\t\t&lt;label for=&quot;name&quot;&gt;Full Name&lt;/label&gt;\n\t\t\t\t\t&lt;input id=&quot;name&quot; name=&quot;name&quot; type=&quot;text&quot; /&gt;\n\t\t\t\t&lt;/div&gt;\n\n\t\t\t\t&lt;div class=&quot;input&quot;&gt;\n\t\t\t\t\t&lt;label for=&quot;email&quot;&gt;Email Address&lt;/label&gt;\n\t\t\t\t\t&lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;email&quot; /&gt;\n\t\t\t\t&lt;/div&gt;\n\n\t\t\t\t&lt;div class=&quot;input&quot;&gt;\n\t\t\t\t\t&lt;label for=&quot;referers&quot;&gt;How did you hear about us?&lt;/label&gt;\n\t\t\t\t\t&lt;select id=&quot;referers&quot; name=&quot;referers&quot;&gt;\n\t\t\t\t\t\t&lt;option hidden disabled selected value&gt;&lt;/option&gt;\n\t\t\t\t\t\t&lt;option value=&quot;Facebook&quot;&gt;Facebook&lt;/option&gt;\n\t\t\t\t\t\t&lt;option value=&quot;Twitter&quot;&gt;Twitter&lt;/option&gt;\n\t\t\t\t\t\t&lt;option value=&quot;Google&quot;&gt;Google&lt;/option&gt;\n\t\t\t\t\t\t&lt;option value=&quot;Bing&quot;&gt;Bing&lt;/option&gt;\n\t\t\t\t\t\t&lt;option value=&quot;Friends&quot;&gt;Friends&lt;/option&gt;\n\t\t\t\t\t&lt;/select&gt;\n\t\t\t\t&lt;/div&gt;\n\n\t\t\t\t&lt;div class=&quot;checklist&quot;&gt;\n\t\t\t\t\t&lt;label&gt;What are your favorite movies?&lt;/label&gt;\n\t\t\t\t\t&lt;ul&gt;\n\t\t\t\t\t\t&lt;li&gt;\n\t\t\t\t\t\t\t&lt;input id=&quot;m1&quot; type=&quot;checkbox&quot; name=&quot;movies&quot; value=&quot;Space Jam&quot; /&gt;\n\t\t\t\t\t\t\t&lt;label for=&quot;m1&quot;&gt;Space Jam&lt;/label&gt;\n\t\t\t\t\t\t&lt;/li&gt;\n\t\t\t\t\t\t&lt;li&gt;\n\t\t\t\t\t\t\t&lt;input id=&quot;m2&quot; type=&quot;checkbox&quot; name=&quot;movies&quot; value=&quot;Little Rascals&quot; /&gt;\n\t\t\t\t\t\t\t&lt;label for=&quot;m2&quot;&gt;Little Rascals&lt;/label&gt;\n\t\t\t\t\t\t&lt;/li&gt;\n\t\t\t\t\t\t&lt;li&gt;\n\t\t\t\t\t\t\t&lt;input id=&quot;m3&quot; type=&quot;checkbox&quot; name=&quot;movies&quot; value=&quot;Frozen&quot; /&gt;\n\t\t\t\t\t\t\t&lt;label for=&quot;m3&quot;&gt;Frozen&lt;/label&gt;\n\t\t\t\t\t\t&lt;/li&gt;\n\t\t\t\t\t\t&lt;li&gt;\n\t\t\t\t\t\t\t&lt;input id=&quot;m4&quot; type=&quot;checkbox&quot; name=&quot;movies&quot; value=&quot;Home Alone&quot; /&gt;\n\t\t\t\t\t\t\t&lt;label for=&quot;m4&quot;&gt;Home Alone&lt;/label&gt;\n\t\t\t\t\t\t&lt;/li&gt;\n\t\t\t\t\t&lt;/ul&gt;\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div id=&quot;turnstile-widget&quot; style=&quot;padding-top: 20px;&quot;&gt;&lt;/div&gt;\n\t\t\t\t&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;\n\t\t\t&lt;/form&gt;\n\t\t&lt;/main&gt;\n\t&lt;script&gt;\n\t// This function is called when the Turnstile script is loaded and ready to be used.\n\t// The function name matches the &quot;onload=...&quot; parameter.\n\tfunction _turnstileCb() {\n\t    console.debug(&#039;_turnstileCb called&#039;);\n\n\t    turnstile.render(&#039;#turnstile-widget&#039;, {\n\t      sitekey: &#039;0xAAAAAAAAAXAAAAAAAAAAAA&#039;,\n\t      theme: &#039;light&#039;,\n\t    });\n\t}\n\t&lt;/script&gt;\n\t&lt;/body&gt;\n&lt;/html&gt;</pre></code>\n            <p>You can embed the Turnstile widget implicitly or explicitly. In this tutorial, we will explicitly embed the widget by injecting the JavaScript tag and related code, then specifying the placement of the widget.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">&lt;script src=&quot;https://challenges.cloudflare.com/turnstile/v0/api.js?onload=_turnstileCb&quot; defer&gt;&lt;/script&gt;</pre></code>\n            \n            <pre class=\"language-javascript\"><code class=\"language-javascript\">&lt;script&gt;\n\tfunction _turnstileCb() {\n\t    console.debug(&#039;_turnstileCb called&#039;);\n\n\t    turnstile.render(&#039;#turnstile-widget&#039;, {\n\t      sitekey: &#039;0xAAAAAAAAAXAAAAAAAAAAAA&#039;,\n\t      theme: &#039;light&#039;,\n\t    });\n\t}\n&lt;/script&gt;</pre></code>\n            <p>Make sure that the <code>div id</code> you assign is the same as the <code>id</code> you specify in <code>turnstile.render</code> call. In this case, let’s use <code>“turnstile-widget”</code>. Once that’s done, you should see the widget show up on your site!</p>\n            <pre class=\"language-html\"><code class=\"language-html\">&lt;div id=&quot;turnstile-widget&quot; style=&quot;padding-top: 20px;&quot;&gt;&lt;/div&gt;</pre></code>\n            \n    <div class=\"flex anchor relative\">\n      <h3 id=\"step-3-validate-the-token\">Step 3: Validate the token</h3>\n      <a href=\"#step-3-validate-the-token\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Now that the Turnstile widget is rendered on the front end, let’s validate it on the server side and check out the Turnstile outcome. We need to make a call to the <code>/siteverify</code> API with the token in the submit function under <code>./functions/api/submit.js</code>.</p><p>First, grab the token issued from Turnstile under cf-turnstile-response. Then, call the <code>/siteverify</code> API to ensure that the token is valid. In this tutorial, we’ll attach the Turnstile outcome to the response to verify everything is working well. You can decide on the expected behavior and where to direct the user based on the <code>/siteverify</code> response.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">/**\n * POST /api/submit\n */\n\nimport turnstilePlugin from &quot;@cloudflare/pages-plugin-turnstile&quot;;\n\n// This is a demo secret key. In prod, we recommend you store\n// your secret key(s) safely. \nconst SECRET_KEY = &#039;0x4AAAAAAASh4E5cwHGsTTePnwcPbnFru6Y&#039;;\n\nexport const onRequestPost = [\n    turnstilePlugin({\n    \tsecret: SECRET_KEY,\n    }),\n    (async (context) =&gt; {\n    \t// Request has been validated as coming from a human\n    \tconst formData = await context.request.formData()\n\n    \tvar tmp, outcome = {};\n\tfor (let [key, value] of formData) {\n\t\ttmp = outcome[key];\n\t\tif (tmp === undefined) {\n\t\t\toutcome[key] = value;\n\t\t} else {\n\t\t\toutcome[key] = [].concat(tmp, value);\n\t\t}\n\t}\n\n\t// Attach Turnstile outcome to the response\n\toutcome[&quot;turnstile_outcome&quot;] = context.data.turnstile;\n\n\tlet pretty = JSON.stringify(outcome, null, 2);\n\n      \treturn new Response(pretty, {\n      \t\theaders: {\n      \t\t\t&#039;Content-Type&#039;: &#039;application/json;charset=utf-8&#039;\n      \t\t}\n      \t});\n    })\n];</pre></code>\n            <p>Since Turnstile accurately decided that the visitor was not a bot, the response for “success” is “true” and “interactive” is “false”. The “interactive” being “false” means that the checkbox was automatically checked by Cloudflare as the visitor was determined to be human. The user was seamlessly allowed access to the website without having to perform any additional actions. If the visitor looks suspicious, Turnstile will become interactive, requiring the visitor to actually click the checkbox to verify that they are not a bot. We used the managed mode in this tutorial but depending on your application logic, you can choose the widget mode that works best for you.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">{\n  &quot;name&quot;: &quot;Sally Lee&quot;,\n  &quot;email&quot;: &quot;sallylee@cloudflare.com&quot;,\n  &quot;referers&quot;: &quot;Facebook&quot;,\n  &quot;movies&quot;: &quot;Space Jam&quot;,\n  &quot;cf-turnstile-response&quot;: &quot;0._OHpi7JVN7Xz4abJHo9xnK9JNlxKljOp51vKTjoOi6NR4ru_4MLWgmxt1rf75VxRO4_aesvBvYj8bgGxPyEttR1K2qbUdOiONJUd5HzgYEaD_x8fPYVU6uZPUCdWpM4FTFcxPAnqhTGBVdYshMEycXCVBqqLVdwSvY7Me-VJoge7QOStLOtGgQ9FaY4NVQK782mpPfgVujriDAEl4s5HSuVXmoladQlhQEK21KkWtA1B6603wQjlLkog9WqQc0_3QMiBZzZVnFsvh_NLDtOXykOFK2cba1mLLcADIZyhAho0mtmVD6YJFPd-q9iQFRCMmT2Sz00IToXz8cXBGYluKtxjJrq7uXsRrI5pUUThKgGKoHCGTd_ufuLDjDCUE367h5DhJkeMD9UsvQgr1MhH3TPUKP9coLVQxFY89X9t8RAhnzCLNeCRvj2g-GNVs4-MUYPomd9NOcEmSpklYwCgLQ.jyBeKkV_MS2YkK0ZRjUkMg.6845886eb30b58f15de056eeca6afab8110e3123aeb1c0d1abef21c4dd4a54a1&quot;,\n  &quot;turnstile_outcome&quot;: {\n    &quot;success&quot;: true,\n    &quot;error-codes&quot;: [],\n    &quot;challenge_ts&quot;: &quot;2024-02-28T22:52:30.009Z&quot;,\n    &quot;hostname&quot;: &quot;pages-turnstile-demo.pages.dev&quot;,\n    &quot;action&quot;: &quot;&quot;,\n    &quot;cdata&quot;: &quot;&quot;,\n    &quot;metadata&quot;: {\n      &quot;interactive&quot;: false\n    }\n  }\n}</pre></code>\n            \n    <div class=\"flex anchor relative\">\n      <h3 id=\"wrapping-up\">Wrapping up</h3>\n      <a href=\"#wrapping-up\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Now that we&#39;ve set up Turnstile, we can head to Turnstile analytics in the <a href=\"https://dash.cloudflare.com/?to=/:account/turnstile\">Cloudflare Dashboard</a> to monitor the <a href=\"https://developers.cloudflare.com/turnstile/reference/tooltips/\">solve rate</a> and widget traffic. Visitor Solve Rate indicates the percentage of visitors who successfully completed the Turnstile widget. A sudden drop in the Visitor Solve Rate could indicate an increase in bot traffic, as bots may fail to complete the challenge presented by the widget. API Solve Rate measures the percentage of visitors who successfully validated their token against the <code>/siteverify</code> API. Similar to the Visitor Solve Rate, a significant drop in the API Solve Rate may indicate an increase in bot activity, as bots may fail to validate their tokens. Widget Traffic provides insights into the nature of the traffic hitting your website. A high number of challenges requiring interaction may suggest that bots are attempting to access your site, while a high number of unsolved challenges could indicate that the Turnstile widget is effectively blocking suspicious traffic.</p>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6LS7efg5RG5VVEE9VVh41n/0c4f7feaeb2c693ea47df2229efa2091/image6-4.png\" alt=\"\" class=\"kg-image\" width=\"1012\" height=\"494\" loading=\"lazy\"/>\n            \n            </figure>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4rZfKrfY91tTRuCvJgFFHU/3a689f0b7a066d2d85fb09725859bd20/image9-1.png\" alt=\"\" class=\"kg-image\" width=\"1013\" height=\"533\" loading=\"lazy\"/>\n            \n            </figure><p>And that’s it! We’ve walked you through how to easily secure your Pages with Turnstile. Pages and Turnstile are currently available for free for every Cloudflare user to get started right away. If you are looking for a seamless and speedy developer experience to get a secure website up and running, protected by Turnstile, head over to the <a href=\"https://dash.cloudflare.com/?to=/:account/turnstile\">Cloudflare Dashboard</a> today!</p>",
		"id": "1XOUeKfqYNFTbbeERuAxAg",
		"localeList": {
			"name": "Building secure websites: a guide to Cloudflare Pages and Turnstile Plugin Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "Learn how to use Cloudflare Pages and Turnstile to deploy your website quickly and easily while protecting it from bots, without compromising user experience. Follow our tutorial here for a seamless integration!",
		"metadata": {
			"title": "Building secure websites: a guide to Cloudflare Pages and Turnstile Plugin",
			"description": "Learn how to use Cloudflare Pages and Turnstile to deploy your website quickly and easily while protecting it from bots, without compromising user experience. Follow our tutorial here for a seamless integration!",
			"imgPreview": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5PEjunpAXDlFwuytEga9mY/e4940be6e6cebf27d1509d55cfbee9bf/guide-to-cloudflare-pages-and-turnstile-plugin-QqfvcL.png"
		},
		"primary_author": {},
		"publicly_index": true,
		"published_at": "2024-03-07T14:00:52.000+00:00",
		"slug": "guide-to-cloudflare-pages-and-turnstile-plugin",
		"tags": [
			{
				"id": "3DmitkNK6euuD5BlhuvOLW",
				"name": "Security Week",
				"slug": "security-week"
			},
			{
				"id": "1mgoRLcodl1ettELWixzCH",
				"name": "Turnstile",
				"slug": "turnstile"
			},
			{
				"id": "11uq7RpwEtvy8Ic53C6cMR",
				"name": "CAPTCHA",
				"slug": "captcha"
			},
			{
				"id": "6Mp7ouACN2rT3YjL1xaXJx",
				"name": "Security",
				"slug": "security"
			},
			{
				"id": "3kr4meEhp1NrKwm01XXeqk",
				"name": "Cloudflare Pages",
				"slug": "cloudflare-pages"
			},
			{
				"id": "4l3WDYLk6bXCyaRc9pRzXa",
				"name": "Bots",
				"slug": "bots"
			},
			{
				"id": "48r7QV00gLMWOIcM1CSDRy",
				"name": "Speed & Reliability",
				"slug": "speed-and-reliability"
			}
		],
		"title": "Building secure websites: a guide to Cloudflare Pages and Turnstile Plugin",
		"updated_at": "2025-10-03T18:49:44.334Z",
		"url": "https://blog.cloudflare.com/guide-to-cloudflare-pages-and-turnstile-plugin"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.icon_aria_label": "Search",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"search.result_stat_empty": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong>",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"search.autocomplete_title": "Insert a query. Press enter to send",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}