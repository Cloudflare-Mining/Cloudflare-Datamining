{
	"initialReadingTime": "4",
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Matthew Prince",
				"slug": "matthew-prince",
				"bio": "A little bit geek, wonk, and nerd. Repeat entrepreneur, recovering lawyer, and former ski instructor. Co-founder & CEO of Cloudflare (NYSE: NET).",
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/1VD9WePJ1jvjFwuSRF0IfQ/4867307860761eb8209f67f2a9dd771f/matthew-prince.jpeg",
				"location": "San Francisco, CA",
				"website": null,
				"twitter": "@eastdakota",
				"facebook": null
			}
		],
		"excerpt": "Yesterday, we announced that 30 of the world's largest hosting providers are now supporting CloudFlare's Railgun WAN optimization technology. ",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/6IfT9icfzUPftggaTxi5pK/707d8adcba1a009570bf75b35bfde427/how-to-tell-how-well-railgun-is-working-for-y.png",
		"featured": false,
		"html": "<p>Yesterday, we announced that 30 of the world&#39;s largest hosting providers are now supporting CloudFlare&#39;s Railgun WAN optimization technology. Railgun uses delta compression to only transmit the parts of a dynamic page that have changed from one request to another. The net effect is that, on average, we can achieve a 99.6% compression ratio. In other words, what uncompressed would have taken 200 packets with Railgun we can transmit in a single packet.</p><p>This blog post is about using headers we include in responses delivered from Railgun in order to see how it is working. We&#39;ve been running Railgun on CloudFlare.com for the last few months so I&#39;ll use it as an example.</p><h3>Exposing the Headers</h3><p>When a request is handled by Railgun, CloudFlare inserts a header with diagnostic information to track how the protocol is doing. If you want to see these headers, you&#39;ll need to use a browser that supports examining header information. Google&#39;s Chrome Browser or Apple&#39;s Safari Browser allow you to access Developer Tools (in Google, select the View &gt; Developer &gt; Developer Tools menu; in Safari, select the Develop &gt; Show Web Inspector menu). In Firefox, you can install <a href=\"http://getfirebug.com/\">Firebug</a> to see response headers. Microsoft&#39;s Internet Explorer makes it a bit trickier to see the response headers, but you can use a tool like <a href=\"http://www.fiddler2.com/fiddler2/\">Fiddler</a> in order to expose them.</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/3ECdNDw0dyUtAPF4eoiXBE/4abcae84d742d995b898d72fb4f86fd8/claire_screenshot.png.scaled500.png\" alt=\"How to Tell How Well Railgun Is Working for Your Site\" class=\"kg-image\" width=\"264\" height=\"523\" loading=\"lazy\"/>\n            \n            </figure><p>At CloudFlare, we&#39;ve also made a Chrome extension for our own debugging purposes that we call Claire. When installed, it adds a small &quot;cloud&quot; icon to the right corner of the URL bar. If you&#39;re visiting a site that uses CloudFlare, lights up orange. Small icons under the cloud indicate whether you&#39;re using SPDY, Railgun, or IPv6 for your connection. Clicking on the icon exposes more data including information about the Railgun connection.</p><p>While Claire makes seeing the Railgun information easy, I&#39;m going to walk through the rest of this post assuming you don&#39;t have it installed. Instead, I&#39;ll use Chrome&#39;s Developer Tools for the examples.</p><h3>Story in the Headers</h3><p>If you open the Developer Tools panel and click on the Network tab you&#39;ll see an interface like the one in the picture below:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/4Z2Fn8wfypVSvHqpTeQaZL/c29c97812de1a89b2d2f70ece27f913c/chrome_developer_tools_cloudflare.png.scaled500.png\" alt=\"How to Tell How Well Railgun Is Working for Your\nSite\" class=\"kg-image\" width=\"500\" height=\"310\" loading=\"lazy\"/>\n            \n            </figure><p>Clicking on the first item in the list, which represents the dynamic HTML content that makes up the page, and then clicking on the Headers tab will show you the headers your browser sent to CloudFlare&#39;s servers as well as, if you scroll down, the response headers that your browser received back. Below is a sample of the response headers when accessing <a href=\"http://www.cloudflare.com\">www.cloudflare.com</a>:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/35LbDaVPf1JXOIaQDZs4r0/682ed67d8905e73ed63b90ba821eda02/cloudflare_response_headers.png.scaled500.png\" alt=\"How to Tell How Well Railgun Is Working for Your\nSite\" class=\"kg-image\" width=\"500\" height=\"167\" loading=\"lazy\"/>\n            \n            </figure><p>There are two headers that CloudFlare is inserting in the response:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">cf-railgun: e95b1c46e0 0.02 0.037872 0030 9878\ncf-ray: 478149ad1570291</pre></code>\n            <p>The second of these headers is what we call a RayID. This is a unique serial number attached to every request through the CloudFlare network, start to finish, which helps us diagnose if there&#39;s a problem at some step in our chain. If you ever have an error on your site when accessing CloudFlare, providing the RayID to our support team can help us track down the cause very quickly. The header I&#39;m going to focus on for this post is the cf-railgun header, which I&#39;ll break down below.</p><h3>The CF-Railgun Header</h3><p>The CF-Railgun header has up to five codes separated by a space. In order, these codes and their corresponding values from the example above are:</p><ul><li><p>Railgun Request ID: e95b1c46e0</p></li><li><p>Compression Ratio: 0.02</p></li><li><p>Origin Processing Time: 0.037872</p></li><li><p>Railgun Flags: 0030</p></li><li><p>Version Number: 9878</p></li></ul><p>Breaking these down, the Railgun Request ID corresponds to an internal process number that allows us to track what connection handled a request in order to diagnose potential problems. Generally, you shouldn&#39;t need this value unless you&#39;re reporting a problem with your Railgun installation.</p><p>The Compression Ratio is more interesting in gauging how Railgun is down. It represents the size of the response after Railgun&#39;s delta compression expressed as a percentage. In the example above, the HTML returned for <a href=\"http://www.cloudflare.com\">www.cloudflare.com</a> is 0.02% of the size of the original that would be returned assuming no origin compression. Another way of thinking about this is the amount of data saved, which can be calculated by subtracting the Compression Ratio value from 100. In this case, 99.98% of the data that would have been required to generate <a href=\"http://www.cloudflare.com\">www.cloudflare.com</a>doesn&#39;t need to be transmitted because of the Railgun compression.</p><p>The Origin Processing Time represents the time, in seconds, that Railgun waits for the origin web server to generate the page. In this case, the origin server takes 0.03782 seconds from when the Railgun listener sends the request to the origin to when it responds. If this number is large, it means your web server or database may be hitting a bottleneck that is slowing down its time to render the full page.</p><p>The Railgun Flags represent how a request was processed. The simplified way of looking at the Railgun Flags is to see the 4-digit sequence as zzXz. Ignore the z&#39;s and focus on the number or letter in the X position. If it is 3,7, B or F then it means Railgun Compression is working correctly.</p><p>If there is an error of some sort, the Compression Ratio is likely to be listed as &quot;normal&quot; or &quot;direct.&quot; This means that Railgun&#39;s compression was bypassed for one reason or another. The Railgun Flags help diagnose why. The Railgun Flags are a bitset and, in order to fully interpret them, you need to use the rg-diag utility which is included with the <a href=\"https://www.cloudflare.com/resources-downloads\">Railgun packages</a>. Run the utility from the command line with the -decode option. For example, to decode the Railgun Code 0038, for example, you&#39;d run:</p><p><b>rg-diag -decode=0038</b></p><p>Which returns in:RailgunFlag Existing origin connection reusedRailgun Flag rg-sender sent dictionaryRailgun Flag rg-listener found dictionary</p><p>This information can be useful in diagnosing potential problems with Railgun. The good news is that the Railgun protocol is designed to be resilient. If a connection fails for some reason, in most cases it will immediately roll over to a normal HTTP or HTTPS connection without the visitor seeing an error.</p><p>Finally, returning to the cf-railgun header, the final variable is the Version Number which indicates the version of the Railgun Listener software that is running on the origin server&#39;s network. The numbers aren&#39;t necessarily sequential, so having a lower number than another Railgun Listener doesn&#39;t necessarily mean your Listener is out of date.</p><h3>Claire Makes It Easy</h3><p>The Claire Chrome Plugin simplifies the header, leaving out the Railgun Flags and Version Number. Instead, it returns the Railgun Request ID (useful to provide to our support team if there&#39;s an issue), the amount of data saved for the particular request (derived from 100 - the Compression Ratio), and the Origin Processing Time (in seconds). Generally, this is all you should need to see whether Railgun is functioning as intended on your site.</p><p>Stay tuned. We&#39;ll post more information on tips for getting the most out of Railgun, as well as some of the design and engineering considerations that went into designing the protocol, over the coming days.</p>",
		"id": "24WcBMjbmal3EbE4ePIV9G",
		"localeList": {
			"name": "How to Tell How Well Railgun Is Working for Your Site Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": null,
		"metadata": {
			"imgPreview": ""
		},
		"primary_author": {},
		"published_at": "2013-02-27T23:07:00.000+00:00",
		"slug": "how-to-tell-how-well-railgun-is-working-for-y",
		"tags": [
			{
				"id": "01lawpu7M1MKsoK2cbP1vg",
				"name": "Railgun",
				"slug": "railgun"
			},
			{
				"id": "6sK5rczHk0pkaWhDEfVHAh",
				"name": "Claire",
				"slug": "claire"
			},
			{
				"id": "48r7QV00gLMWOIcM1CSDRy",
				"name": "Speed & Reliability",
				"slug": "speed-and-reliability"
			},
			{
				"id": "4HIPcb68qM0e26fIxyfzwQ",
				"name": "Developers",
				"slug": "developers"
			}
		],
		"title": "How to Tell How Well Railgun Is Working for Your Site",
		"updated_at": "2024-08-27T02:46:01.489Z",
		"url": "https://blog.cloudflare.com/how-to-tell-how-well-railgun-is-working-for-y"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.blurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}