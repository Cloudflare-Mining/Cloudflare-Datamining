{
	"locale": "en-us",
	"post": {
		"access": true,
		"authors": [
			{
				"id": "5d1644b141acde0011a94faf",
				"name": "Alessandro Ghedini",
				"slug": "alessandro-ghedini",
				"profile_image": "https://blog-cloudflare-com-assets.storage.googleapis.com/2020/09/Ii4TgsoTda2layE131Dk_1204a20b3d1d96bba523a6a2a5fa3cd73bd4fe59240a27ad6eb8c064c6792446.jpg",
				"cover_image": "http://blog.cloudflare.com/content/images/2018/08/general@2x-1.png",
				"bio": null,
				"website": null,
				"location": null,
				"facebook": null,
				"twitter": null,
				"meta_title": null,
				"meta_description": null,
				"url": "http://blog.cloudflare.com/author/alessandro-ghedini/"
			}
		],
		"canonical_url": null,
		"codeinjection_foot": null,
		"codeinjection_head": null,
		"comment_id": "5da79ac7fd9e450505d98cad",
		"comments": false,
		"created_at": "2019-10-16T23:33:43.000+01:00",
		"custom_excerpt": "Just a few weeks ago we announced the availability on our edge network of HTTP/3, the new revision of HTTP intended to improve security and performance on the Internet. Everyone can now enable HTTP/3 on their Cloudflare zone",
		"custom_template": null,
		"email_subject": null,
		"excerpt": "Just a few weeks ago we announced the availability on our edge network of HTTP/3, the new revision of HTTP intended to improve security and performance on the Internet. Everyone can now enable HTTP/3 on their Cloudflare zone",
		"feature_image": "http://blog.cloudflare.com/content/images/2019/10/Screen-Shot-2019-10-16-at-3.42.02-PM-1.png",
		"feature_image_alt": null,
		"feature_image_caption": null,
		"featured": false,
		"frontmatter": null,
		"html": "<figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2019/10/HTTP3-portal@3x.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>Just a few weeks ago <a href=\"http://blog.cloudflare.com/http3-the-past-present-and-future/\">we announced</a> the availability on our edge network of <a href=\"https://www.cloudflare.com/learning/performance/what-is-http3/\">HTTP/3</a>, the new revision of HTTP intended to improve security and performance on the Internet. Everyone can now enable HTTP/3 on their Cloudflare zone and experiment with it using <a href=\"http://blog.cloudflare.com/http3-the-past-present-and-future/#using-google-chrome-as-an-http-3-client\">Chrome Canary</a> as well as <a href=\"http://blog.cloudflare.com/http3-the-past-present-and-future/#using-curl\">curl</a>, among other clients.</p><p>We have previously made available <a href=\"https://github.com/cloudflare/quiche/blob/master/examples/http3-server.rs\">an example HTTP/3 server as part of the quiche project</a> to allow people to experiment with the protocol, but it’s quite limited in the functionality that it offers, and was never intended to replace other general-purpose web servers.</p><p>We are now happy to announce that <a href=\"http://blog.cloudflare.com/enjoy-a-slice-of-quic-and-rust/\">our implementation of HTTP/3 and QUIC</a> can be integrated into your own installation of NGINX as well. This is made available <a href=\"https://github.com/cloudflare/quiche/tree/master/extras/nginx\">as a patch</a> to NGINX, that can be applied and built directly with the upstream NGINX codebase.</p><figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2019/10/quiche-banner-copy@2x.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>It’s important to note that <strong>this is not officially supported or endorsed by the NGINX project</strong>, it is just something that we, Cloudflare, want to make available to the wider community to help push adoption of QUIC and HTTP/3.</p><h3 id=\"building\">Building<br></h3><p>The first step is to <a href=\"https://nginx.org/en/download.html\">download and unpack the NGINX source code</a>. Note that the HTTP/3 and QUIC patch only works with the 1.16.x release branch (the latest stable release being 1.16.1).</p><pre><code> % curl -O https://nginx.org/download/nginx-1.16.1.tar.gz\n % tar xvzf nginx-1.16.1.tar.gz\n</code></pre><p>As well as quiche, the underlying implementation of HTTP/3 and QUIC:</p><pre><code> % git clone --recursive https://github.com/cloudflare/quiche</code></pre><p>Next you’ll need to apply the patch to NGINX:</p><pre><code> % cd nginx-1.16.1\n % patch -p01 &lt; ../quiche/extras/nginx/nginx-1.16.patch\n</code></pre><p>And finally build NGINX with HTTP/3 support enabled:</p><pre><code> % ./configure                          \t\\\n   \t--prefix=$PWD                       \t\\\n   \t--with-http_ssl_module              \t\\\n   \t--with-http_v2_module               \t\\\n   \t--with-http_v3_module               \t\\\n   \t--with-openssl=../quiche/deps/boringssl \\\n   \t--with-quiche=../quiche\n % make</code></pre><p>The above command instructs the NGINX build system to enable the HTTP/3 support ( <code>--with-http_v3_module</code>) by using the quiche library found in the path it was previously downloaded into ( <code>--with-quiche=../quiche</code>), as well as TLS and HTTP/2. Additional build options can be added as needed.</p><p>You can check out the full instructions <a href=\"https://github.com/cloudflare/quiche/tree/master/extras/nginx#readme\">here</a>.</p><h3 id=\"running\">Running</h3><p>Once built, NGINX can be configured to accept incoming HTTP/3 connections by adding the <code>quic</code> and <code>reuseport</code> options to the <a href=\"https://nginx.org/en/docs/http/ngx_http_core_module.html#listen\">listen</a> configuration directive.</p><p>Here is a minimal configuration example that you can start from:</p><pre><code>events {\n    worker_connections  1024;\n}\n\nhttp {\n    server {\n        # Enable QUIC and HTTP/3.\n        listen 443 quic reuseport;\n\n        # Enable HTTP/2 (optional).\n        listen 443 ssl http2;\n\n        ssl_certificate      cert.crt;\n        ssl_certificate_key  cert.key;\n\n        # Enable all TLS versions (TLSv1.3 is required for QUIC).\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;\n        \n        # Add Alt-Svc header to negotiate HTTP/3.\n        add_header alt-svc 'h3-23=\":443\"; ma=86400';\n    }\n}\n</code></pre><p>This will enable both HTTP/2 and HTTP/3 on the TCP/443 and UDP/443 ports respectively.</p><p>You can then use one of the available HTTP/3 clients (such as <a href=\"http://blog.cloudflare.com/http3-the-past-present-and-future/#using-google-chrome-as-an-http-3-client\">Chrome Canary</a>, <a href=\"http://blog.cloudflare.com/http3-the-past-present-and-future/#using-curl\">curl</a> or even the <a href=\"http://blog.cloudflare.com/http3-the-past-present-and-future/#using-quiche-s-http3-client\">example HTTP/3 client provided as part of quiche</a>) to connect to your NGINX instance using HTTP/3.</p><p>We are excited to make this available for everyone to experiment and play with HTTP/3, but it’s important to note that <strong>the implementation is still experimental</strong> and it’s likely to have bugs as well as limitations in functionality. Feel free to submit a ticket to the <a href=\"https://github.com/cloudflare/quiche\">quiche project</a> if you run into problems or find any bug.</p>",
		"id": "5da79ac7fd9e450505d98cad",
		"meta_description": null,
		"meta_title": null,
		"og_description": null,
		"og_image": null,
		"og_title": null,
		"primary_author": {
			"id": "5d1644b141acde0011a94faf",
			"name": "Alessandro Ghedini",
			"slug": "alessandro-ghedini",
			"profile_image": "https://blog-cloudflare-com-assets.storage.googleapis.com/2020/09/Ii4TgsoTda2layE131Dk_1204a20b3d1d96bba523a6a2a5fa3cd73bd4fe59240a27ad6eb8c064c6792446.jpg",
			"cover_image": "http://blog.cloudflare.com/content/images/2018/08/general@2x-1.png",
			"bio": null,
			"website": null,
			"location": null,
			"facebook": null,
			"twitter": null,
			"meta_title": null,
			"meta_description": null,
			"url": "http://blog.cloudflare.com/author/alessandro-ghedini/"
		},
		"primary_tag": {
			"id": "5d16450341acde0011a95167",
			"name": "NGINX",
			"slug": "nginx",
			"description": null,
			"feature_image": null,
			"visibility": "public",
			"meta_title": null,
			"meta_description": null,
			"og_image": null,
			"og_title": null,
			"og_description": null,
			"twitter_image": null,
			"twitter_title": null,
			"twitter_description": null,
			"codeinjection_head": null,
			"codeinjection_foot": null,
			"canonical_url": null,
			"accent_color": null,
			"url": "http://blog.cloudflare.com/tag/nginx/"
		},
		"published_at": "2019-10-17T15:00:00.000+01:00",
		"reading_time": 3,
		"slug": "experiment-with-http-3-using-nginx-and-quiche",
		"tags": [
			{
				"id": "5d16450341acde0011a95167",
				"name": "NGINX",
				"slug": "nginx",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/nginx/"
			},
			{
				"id": "5d16450341acde0011a9525c",
				"name": "QUIC",
				"slug": "quic",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/quic/"
			},
			{
				"id": "5d16450341acde0011a9517a",
				"name": "Chrome",
				"slug": "chrome",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/chrome/"
			},
			{
				"id": "5d16450341acde0011a95204",
				"name": "Developers",
				"slug": "developers",
				"description": null,
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Developers-1.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Developers",
				"meta_description": "Collection of Cloudflare blog posts tagged 'Developers'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/developers/"
			},
			{
				"id": "5d8bf7e1fd9e450505d96eb6",
				"name": "HTTP3",
				"slug": "http3",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/http3/"
			}
		],
		"title": "Experiment with HTTP/3 using NGINX and quiche",
		"twitter_description": null,
		"twitter_image": null,
		"twitter_title": null,
		"updated_at": "2023-07-10T20:31:30.000+01:00",
		"url": "http://blog.cloudflare.com/experiment-with-http-3-using-nginx-and-quiche/",
		"uuid": "36a5cb7d-b4da-4285-9eba-7a921a71e39d",
		"visibility": "public"
	}
}