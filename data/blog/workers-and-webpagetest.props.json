{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "4",
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Andrew Galloni",
				"slug": "andrew-galloni",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/3hb1Z72NWYpZNoXvpFwMMb/cea7af1c522bfc132e9bc3d09fed0d42/andrew-galloni.jpg",
				"location": null,
				"website": null,
				"twitter": null,
				"facebook": null
			}
		],
		"excerpt": "Have you ever wanted to quickly test a new performance idea, or see if the latest performance wisdom is beneficial to your site? As web performance appears to be a stochastic process, it is really important to be able to iterate quickly and review the effects of different experiments.",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/2jQij9GpVmsJnXneAvwCdA/0711ee664d33eae35994346e3098e122/workers-and-webpagetest.png",
		"featured": false,
		"html": "<p><i>This article was originally published as part of  </i><a href=\"https://calendar.perfplanet.com/2019/\"><i>Perf Planet&#39;s 2019 Web Performance Calendar</i></a><i>.</i></p><p>Have you ever wanted to quickly test a new performance idea, or see if the latest performance wisdom is beneficial to your site? As web performance appears to be a stochastic process, it is really important to be able to iterate quickly and review the effects of different experiments. The challenge is to be able to arbitrarily change requests and responses without the overhead of setting up another internet facing server. This can be straightforward to implement by combining two of my favourite technologies : <a href=\"https://webpagetest.org/\">WebPageTest</a> and <a href=\"https://workers.cloudflare.com/\">Cloudflare Workers</a>. Pat Meenan sums this up with the following slide from a recent <a href=\"https://www.slideshare.net/patrickmeenan/getting-the-most-out-of-webpagetest\">getting the most of WebPageTest</a> presentation:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/63FuSzxUDPepqCC577lP24/995cb14280f2153df231f99e76fe46d9/magic.jpg\" alt=\"With the OverrideHost script command WebPageTest + Cloudflare Workers = magic\" class=\"kg-image\" width=\"1024\" height=\"576\" loading=\"lazy\"/>\n            \n            </figure><p>So what is Cloudflare Workers and why is it ideally suited to easy prototyping of optimizations?</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"cloudflare-workers\">Cloudflare Workers</h2>\n            <a href=\"#cloudflare-workers\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>From the documentation :</p><blockquote><p>Cloudflare Workers provides a lightweight JavaScript execution environment that allows developers to augment existing applications or create entirely new ones without configuring or maintaining infrastructure.A Cloudflare Worker is a programmable proxy which brings the simplicity and flexibility of the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\">Service Workers event-based fetch API</a> from the browser to the edge. This allows a worker to intercept and modify requests and responses.</p></blockquote>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/3y9pmmtBYue73BYEUOHtpN/4efc8c7e6950ca3c1453f08088bd6ecb/worker-4.svg\" alt=\"worker-4\" class=\"kg-image\" width=\"671\" height=\"268\" loading=\"lazy\"/>\n            \n            </figure><p>With the Service Worker API you can add an <code>EventListener</code> to any fetch event that is routed through the worker script and modify the request to come from a different origin.</p><p>Cloudflare Workers also provides a <a href=\"https://developers.cloudflare.com/workers/reference/apis/html-rewriter/\">streaming HTMLRewriter</a> to enable on the fly modification of HTML as it passes through the worker. The streaming nature of this parser ensures latency is minimised as the entire HTML document does not have to be buffered before rewriting can happen.</p>\n          <div class=\"flex anchor relative\">\n            <h3 id=\"setting-up-a-worker\">Setting up a worker</h3>\n            <a href=\"#setting-up-a-worker\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n        <p>It is really quick and easy to <a href=\"https://workers.cloudflare.com/\">sign up</a> for a free subdomain at <code>workers.dev</code> which provides you with 100,000 free requests per day. There is a quick-start guide available <a href=\"https://developers.cloudflare.com/workers/quickstart/\">here</a>.To be able to run the examples in this post you will need to <a href=\"https://github.com/cloudflare/wrangler#installation\">install Wrangler</a>, the CLI tool for deploying workers. Once Wrangler is installed run the following command to download the example worker project:    </p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">wrangler generate wpt-proxy https://github.com/xtuc/WebPageTest-proxy</pre></code>\n            <p><a href=\"https://github.com/xtuc/WebPageTest-proxyYou\">You</a> will then need to update the <code>wrangler.toml</code> with your account_id, which can be found in the <a href=\"https://dash.cloudflare.com\">dashboard</a> in the right sidebar. Then configure an API key with the command:</p><p><code>wrangler config</code></p><p>Finally, you can publish the worker with:  </p><p><code>wrangler publish</code></p><p>At this the point, the worker will be active at</p><p><code>https://wpt-proxy.&lt;your-subdomain&gt;.workers.dev</code>.</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"webpagetest-overridehost\">WebPageTest OverrideHost  </h2>\n            <a href=\"#webpagetest-overridehost\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>Now that your worker is configured, the next step is to configure WebPageTest to redirect requests through the worker. WebPageTest has a feature where it can re-point arbitrary origins to a different domain. To access the feature in WebPageTest, you need to use the WebPageTest scripting language &quot;overrideHost&quot; command, as shown:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/3obNudq5ry3Gg8kYI0basR/9139737937c698b6a15152790e068cca/samplescript.png\" alt=\"Override the bbc.co.uk domain to wpt-proxy.prf.workers.dev\" class=\"kg-image\" width=\"944\" height=\"368\" loading=\"lazy\"/>\n            \n            </figure><p>This example will redirect all network requests to <a href=\"http://www.bbc.co.uk\">www.bbc.co.uk</a> to wpt-proxy.prf.workers.dev instead. WebPageTest also adds an <code>x-host</code> header to each redirected request so that the destination can determine for which host the request was originally intended:    </p><p><code>x-host: www.bbc.co.uk</code></p><p>The script can process multiple overrideHost commands to override multiple different origins. If HTTPS is used, WebPageTest can use HTTP/2 and benefit from <a href=\"https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing/\">connection coalescing</a>:  </p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">overrideHost www.bbc.co.uk wpt-proxy.prf.workers.dev    \noverrideHost nav.files.bbci.co.uk wpt-proxy.prf.workers.dev\nnavigate https://www.bbc.co.uk</pre></code>\n            <p> It also supports wildcards:  </p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">overrideHost *bbc.co.uk wpt-proxy.prf.workers.dev    \nnavigate https://www.bbc.co.uk</pre></code>\n            <p>There are a few special strings that can be used in a script when bulk testing, so a single script can be re-used across multiple URLs:</p><ul><li><p><code>%URL%</code> - Replaces with the URL of the current test</p></li><li><p><code>%HOST%</code> - Replaces with the hostname of the URL of the current test</p></li><li><p><code>%HOSTR%</code> - Replaces with the hostname of the final URL in case the test URL does a redirect.</p></li></ul><p>A more generic script would look like this:    </p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">overrideHost %HOSTR% wpt-proxy.prf.workers.dev    \nnavigate %URL% </pre></code>\n            \n          <div class=\"flex anchor relative\">\n            <h2 id=\"basic-worker\">Basic worker</h2>\n            <a href=\"#basic-worker\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>In the base example below, the worker listens for the fetch event, looks for the <code>x-host</code> header that WebPageTest has set and responds by fetching the content from the orginal url:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">/* \n* Handle all requests. \n* Proxy requests with an x-host header and return 403\n* for everything else\n*/\n\naddEventListener(&quot;fetch&quot;, event =&gt; {    \n   const host = event.request.headers.get(&#039;x-host&#039;);        \n   if (host) {          \n      const url = new URL(event.request.url);          \n      const originUrl = url.protocol + &#039;//&#039; + host + url.pathname + url.search;             \n      let init = {             \n         method: event.request.method,             \n         redirect: &quot;manual&quot;,             \n         headers: [...event.request.headers]          \n      };          \n      event.respondWith(fetch(originUrl, init));        \n   } \n   else {           \n     const response = new Response(&#039;x-Host headers missing&#039;, {status: 403});                \n     event.respondWith(response);        \n   }    \n});</pre></code>\n            <p>The source code can be found <a href=\"https://github.com/xtuc/WebPageTest-proxy\">here</a> and instructions to download and deploy this worker are described in the earlier section.</p><p>So what happens if we point all the domains on the BBC website through this worker, using the following config:  </p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">overrideHost    *bbci.co.uk wpt.prf.workers.dev    \noverrideHost    *bbc.co.uk  wpt.prf.workers.dev    \nnavigate    https://www.bbc.co.uk</pre></code>\n            <p>configured to a 3G Fast setting from a UK test location.</p>\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/6y7lIsq1654FwvbSlcpBvh/f80891358f32d3bef569eee3c5b0cf01/simpleworkercompare.png\" alt=\"\" class=\"kg-image\" width=\"2000\" height=\"268\" loading=\"lazy\"/>\n            \n            </figure><p>Comparison of BBC website if when using a single connection. </p><p>Before</p><p>After</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/2pwdrZ0TRNcU2x2AosI09b/227f0ed6ae9837ed08b33c5e5db6abaf/beforeBBC2-1.png\" alt=\"beforeBBC2-1\" class=\"kg-image\" width=\"1073\" height=\"1126\" loading=\"lazy\"/>\n            \n            </figure>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/7DE8XJvQoNTKguQR4Y9a9J/0c1c8e60df5872145dc1416a2e7a6a0f/afterBBC2.png\" alt=\"afterBBC2\" class=\"kg-image\" width=\"1012\" height=\"1127\" loading=\"lazy\"/>\n            \n            </figure><p>The potential performance improvement of loading a page over a single connection, eliminating the additional DNS lookup, TCP connection and TLS handshakes, can be seen  by comparing the filmstrips and waterfalls. There are several reasons why you may not want or be able to move everything to a single domain, but at least it is now easy to see what the performance difference would be.  </p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"htmlrewriter\">HTMLRewriter</h2>\n            <a href=\"#htmlrewriter\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>With the HTMLRewriter, it is possible to change the HTML response as it passes through the worker. A jQuery-like syntax provides CSS-selector matching and a standard set of DOM mutation methods. For instance you could rewrite your page to measure the effects of different preload/prefetch strategies, review the performance savings of removing or using different third-party scripts, or you could stock-take the HEAD of your document. One piece of performance advice is to self-host some third-party scripts. This <a href=\"https://github.com/xtuc/rewrite-3d-party.git\">example</a> script invokes the HTMLRewriter to listen for a script tag with a <code>src</code> attribute. If the script is from a proxiable domain the src is rewritten to be first-party, with a specific path prefix.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">async function rewritePage(request) {  \n  const response = await fetch(request);    \n    return new HTMLRewriter()      \n      .on(&quot;script[src]&quot;, {        \n        element: el =&gt; {          \n          let src = el.getAttribute(&quot;src&quot;);          \n          if (PROXIED_URL_PREFIXES_RE.test(src)) {\n            el.setAttribute(&quot;src&quot;, createProxiedScriptUrl(src));\n          }           \n        }    \n    })    \n    .transform(response);\n}</pre></code>\n            <p>Subsequently, when the browser makes a request with the specific prefix, the worker fetches the asset from the original URL. This example can be downloaded with this command:    </p><p><code>wrangler generate test [https://github.com/xtuc/rewrite-3d-party.git](https://github.com/xtuc/rewrite-3d-party.git)</code></p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"request-mangling\">Request Mangling</h2>\n            <a href=\"#request-mangling\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>As well as rewriting content, it is also possible to change or delay a request. Below is an example of how to randomly add a delay of a second to a request:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">addEventListener(&quot;fetch&quot;, event =&gt; {    \n    const host = event.request.headers.get(&#039;x-host&#039;);    \n    if (host) { \n//....     \n    // Add the delay if necessary     \n    if (Math.random() * 100 &lt; DELAY_PERCENT) {       \n      await new Promise(resolve =&gt; setTimeout(resolve, DELAY_MS));     \n    }    \n    event.respondWith(fetch(originUrl, init));\n//...\n}</pre></code>\n            \n          <div class=\"flex anchor relative\">\n            <h2 id=\"http-2-prioritization\">HTTP/2 prioritization</h2>\n            <a href=\"#http-2-prioritization\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>What if you want to see what the effect of changing the HTTP/2 prioritization of assets would make to your website? Cloudflare Workers provide <a href=\"/better-http-2-prioritization-for-a-faster-web/\">custom http2 prioritization schemes</a> that can be applied by setting a custom header on the response. The <code>cf-priority</code> header is defined as <code>&lt;priority&gt;/&lt;concurrency&gt;</code> so adding:    </p><p><code>response.headers.set(&#39;cf-priority&#39;, “30/0”);</code>    </p><p>would set the priority of that response to 30 with a concurrency of 0 for the given response. Similarly, “30/1” would set concurrency to 1 and “30/n” would set concurrency to n. With this flexibility, you can prioritize the bytes that are important for your website or run a bulk test to prove that your new  prioritization scheme is better than any of the existing browser implementations.</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"summary\">Summary</h2>\n            <a href=\"#summary\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>A major barrier to understanding and innovation, is the amount of time is takes to get feedback. Having a quick and easy framework, to try out a new idea and comprehend the impact, is key. I hope this post has convinced you that combining WebPageTest and Cloudflare Workers is an easy solution to this problem and is indeed magic</p>",
		"id": "4GVvwYx4x8CBGH3mW0gmTr",
		"localeList": {
			"name": "Prototyping optimizations with Cloudflare Workers and WebPageTest Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "How to use Cloudflare Workers and WebPageTest to arbitrarily rewrite sites to quickly prototype and measure any change to a production website.",
		"metadata": {
			"title": "Prototyping optimizations with Cloudflare Workers and WebPageTest",
			"description": "How to use Cloudflare Workers and WebPageTest to arbitrarily rewrite sites to quickly prototype and measure any change to a production website.",
			"imgPreview": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/2tKoxKQ1EMNmYNw1qJjwnb/4d770b0c95835135cbec34c8612ee9b5/workers-and-webpagetest-LkD0xI.png"
		},
		"primary_author": {},
		"published_at": "2020-01-08T15:00:00.000+00:00",
		"slug": "workers-and-webpagetest",
		"tags": [
			{
				"id": "6hbkItfupogJP3aRDAq6v8",
				"name": "Cloudflare Workers",
				"slug": "workers"
			},
			{
				"id": "1OAcGRrbAS8T2hKb2tqB7N",
				"name": "Speed",
				"slug": "speed"
			},
			{
				"id": "5cye1Bh5KxFh3pKSnX8Dsy",
				"name": "Serverless",
				"slug": "serverless"
			},
			{
				"id": "7aYB1Ci6SHWaelke8YAibN",
				"name": "Workers Sites",
				"slug": "workers-sites"
			},
			{
				"id": "4HIPcb68qM0e26fIxyfzwQ",
				"name": "Developers",
				"slug": "developers"
			},
			{
				"id": "3JAY3z7p7An94s6ScuSQPf",
				"name": "Developer Platform",
				"slug": "developer-platform"
			}
		],
		"title": "Prototyping optimizations with Cloudflare Workers and WebPageTest",
		"updated_at": "2024-08-27T02:06:21.654Z",
		"url": "https://blog.cloudflare.com/workers-and-webpagetest"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}