{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "13",
	"locale": "en-us",
	"localesAvailable": [
		"zh-cn"
	],
	"post": {
		"authors": [
			{
				"name": "James M Snell",
				"slug": "jasnell",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5dR6CJtYedvLrkAZ6rxv9I/0db3d5a763a8b0a350ac04ac6410da6b/jasnell.jpg",
				"location": "California",
				"website": "https://bsky.app/profile/jasnell.me",
				"facebook": null,
				"publiclyIndex": true
			}
		],
		"excerpt": "Over the year we have greatly expanded Node.js compatibility. There are hundreds of new Node.js APIs now available that make it easier to run existing Node.js code on our platform.",
		"feature_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3azDNvXrVUxbgAR5XI75O8/711025e190493820da5de1f0aa5423b8/image4.png",
		"featured": false,
		"html": "<p>We&#39;ve been busy.</p><p>Compatibility with the broad JavaScript developer ecosystem has always been a key strategic investment for us. We believe in open standards and an open web. We want you to see <a href=\"https://workers.cloudflare.com/\"><u>Workers</u></a> as a powerful extension of your development platform with the ability to just drop code in that Just Works. To deliver on this goal, the Cloudflare Workers team has spent the past year significantly expanding compatibility with the Node.js ecosystem, enabling hundreds (if not thousands) of popular <a href=\"https://npmjs.com\"><u>npm</u></a> modules to now work seamlessly, including the ever popular <a href=\"https://expressjs.com\"><u>express</u></a> framework.</p><p>We have implemented a <a href=\"https://developers.cloudflare.com/workers/runtime-apis/nodejs/\"><u>substantial subset of the Node.js standard library</u></a>, focusing on the most commonly used, and asked for, APIs. These include:</p><style type=\"text/css\">\n.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}\n.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg .tg-fgy3{font-family:\"Courier New\", Courier, monospace !important;text-align:left;vertical-align:top}\n.tg .tg-akbm{font-weight:bold;text-align:left;text-decoration:underline;vertical-align:top}\n.tg .tg-z2pc{background-color:#0FF;font-family:\"Courier New\", Courier, monospace !important;text-align:left;vertical-align:top}\n.tg .tg-wu3h{background-color:#0FF;color:#15C;text-align:left;text-decoration:underline;vertical-align:top}\n.tg .tg-zb5k{color:#15C;text-align:left;text-decoration:underline;vertical-align:top}\n@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;margin: auto 0px;}}</style>\n<div class=\"tg-wrap\"><table class=\"tg\" style=\"undefined;table-layout: fixed; width: 459px\"><colgroup>\n<col style=\"width: 140.88889px\">\n<col style=\"width: 317.88889px\">\n</colgroup>\n<thead>\n  <tr>\n    <th class=\"tg-akbm\"><span style=\"font-weight:700;font-style:normal;text-decoration:underline;color:#000;background-color:transparent\">Module</span></th>\n    <th class=\"tg-akbm\"><span style=\"font-weight:700;font-style:normal;text-decoration:underline;color:#000;background-color:transparent\">API documentation</span></th>\n  </tr></thead>\n<tbody>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:console</span></td>\n    <td class=\"tg-wu3h\"><a href=\"https://nodejs.org/docs/latest/api/console.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/console.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:crypto</span></td>\n    <td class=\"tg-zb5k\"><a href=\"https://nodejs.org/docs/latest/api/crypto.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/crypto.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:dns</span></td>\n    <td class=\"tg-wu3h\"><a href=\"https://nodejs.org/docs/latest/api/dns.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/dns.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:fs</span></td>\n    <td class=\"tg-zb5k\"><a href=\"https://nodejs.org/docs/latest/api/fs.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/fs.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:http</span></td>\n    <td class=\"tg-wu3h\"><a href=\"https://nodejs.org/docs/latest/api/http.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/http.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:https</span></td>\n    <td class=\"tg-zb5k\"><a href=\"https://nodejs.org/docs/latest/api/https.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/https.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:net</span></td>\n    <td class=\"tg-wu3h\"><a href=\"https://nodejs.org/docs/latest/api/net.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/net.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:process</span></td>\n    <td class=\"tg-zb5k\"><a href=\"https://nodejs.org/docs/latest/api/process.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/process.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:timers</span></td>\n    <td class=\"tg-wu3h\"><a href=\"https://nodejs.org/docs/latest/api/timers.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/timers.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:tls</span></td>\n    <td class=\"tg-zb5k\"><a href=\"https://nodejs.org/docs/latest/api/tls.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/tls.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:zlib</span></td>\n    <td class=\"tg-wu3h\"><a href=\"https://nodejs.org/docs/latest/api/zlib.html\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">https://nodejs.org/docs/latest/api/zlib.html</span></a><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\"> </span></td>\n  </tr>\n</tbody></table></div><p>Each of these has been carefully implemented to approximate Node.js&#39; behavior as closely as possible where feasible. Where matching <a href=\"http://nodejs.org\"><u>Node.js</u></a>&#39; behavior is not possible, our implementations will throw a clear error when called, rather than silently failing or not being present at all. This ensures that packages that check for the presence of these APIs will not break, even if the functionality is not available.</p><p>In some cases, we had to implement entirely new capabilities within the runtime in order to provide the necessary functionality. For <code>node:fs</code>, we added a new virtual file system within the Workers environment. In other cases, such as with <code>node:net</code>, <code>node:tls</code>, and <code>node:http</code>, we wrapped the new Node.js APIs around existing Workers capabilities such as the <a href=\"https://developers.cloudflare.com/workers/runtime-apis/tcp-sockets/\"><u>Sockets API</u></a> and <a href=\"https://developers.cloudflare.com/workers/runtime-apis/fetch/\"><code><u>fetch</u></code></a>.</p><p>Most importantly, <b>all of these implementations are done natively in the Workers runtime</b>, using a combination of TypeScript and C++. Whereas our earlier Node.js compatibility efforts relied heavily on polyfills and shims injected at deployment time by developer tooling such as <a href=\"https://developers.cloudflare.com/workers/wrangler/\"><u>Wrangler</u></a>, we are moving towards a model where future Workers will have these APIs available natively, without need for any additional dependencies. This not only improves performance and reduces memory usage, but also ensures that the behavior is as close to Node.js as possible.</p>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"the-networking-stack\">The networking stack</h2>\n      <a href=\"#the-networking-stack\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Node.js has a rich set of networking APIs that allow applications to create servers, make HTTP requests, work with raw TCP and UDP sockets, send DNS queries, and more. Workers do not have direct access to raw kernel-level sockets though, so how can we support these Node.js APIs so packages still work as intended? We decided to build on top of the existing <a href=\"https://developers.cloudflare.com/workers/runtime-apis/tcp-sockets/\"><u>managed Sockets</u></a> and fetch APIs. These implementations allow many popular Node.js packages that rely on networking APIs to work seamlessly in the Workers environment.</p><p>Let&#39;s start with the HTTP APIs.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"http-client-and-server-support\">HTTP client and server support</h3>\n      <a href=\"#http-client-and-server-support\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>From the moment we announced that we would be pursuing Node.js compatibility within Workers, users have been asking specifically for an implementation of the <code>node:http</code> module. There are countless modules in the ecosystem that depend directly on APIs like <code>http.get(...)</code> and <code>http.createServer(...)</code>.</p><p>The <code>node:http</code> and <code>node:https</code> modules provide APIs for creating HTTP clients and servers. <a href=\"https://blog.cloudflare.com/bringing-node-js-http-servers-to-cloudflare-workers/\"><u>We have implemented both</u></a>, allowing you to create HTTP clients using <code>http.request()</code> and servers using <code>http.createServer()</code>. <a href=\"https://developers.cloudflare.com/workers/runtime-apis/nodejs/http/\"><u>The HTTP client implementation</u></a> is built on top of the Fetch API, while the HTTP server implementation is built on top of the Workers runtime’s existing request handling capabilities.</p><p>The client side is fairly straightforward:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import http from &#039;node:http&#039;;\n\nexport default {\n  async fetch(request) {\n    return new Promise((resolve, reject) =&gt; {\n      const req = http.request(&#039;http://example.com&#039;, (res) =&gt; {\n        let data = &#039;&#039;;\n        res.setEncoding(&#039;utf8&#039;);\n        res.on(&#039;data&#039;, (chunk) =&gt; {\n          data += chunk;\n        });\n        res.on(&#039;end&#039;, () =&gt; {\n          resolve(new Response(data));\n        });\n      });\n      req.on(&#039;error&#039;, (err) =&gt; {\n        reject(err);\n      });\n      req.end();\n    });\n  }\n}\n</pre></code>\n            <p>The server side is just as simple but likely even more exciting. We&#39;ve often been asked about the possibility of supporting <a href=\"https://expressjs.com/\"><u>Express</u></a>, or <a href=\"https://koajs.com/\"><u>Koa</u></a>, or <a href=\"https://fastify.dev/\"><u>Fastify</u></a> within Workers, but it was difficult to do because these were so dependent on the Node.js APIs. With the new additions it is now possible to use both Express and Koa within Workers, and we&#39;re hoping to be able to add Fastify support later. </p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import { createServer } from &quot;node:http&quot;;\nimport { httpServerHandler } from &quot;cloudflare:node&quot;;\n\nconst server = createServer((req, res) =&gt; {\n  res.writeHead(200, { &quot;Content-Type&quot;: &quot;text/plain&quot; });\n  res.end(&quot;Hello from Node.js HTTP server!&quot;);\n});\n\nexport default httpServerHandler(server);\n</pre></code>\n            <p>The <code>httpServerHandler()</code> function from the <code>cloudflare:nod</code>e module integrates the HTTP <code>server</code> with the Workers fetch event, allowing it to handle incoming requests.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"the-node-dns-module\">The <code>node:dns</code> module</h3>\n      <a href=\"#the-node-dns-module\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>The <code>node:dns</code> module provides an API for performing DNS queries. </p><p>At Cloudflare, we happen to have a <a href=\"https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/\"><u>DNS-over-HTTPS (DoH)</u></a> service and our own <a href=\"https://one.one.one.one/\"><u>DNS service called 1.1.1.1</u></a>. We took advantage of this when exposing <code>node:dns</code> in Workers. When you use this module to perform a query, it will just make a subrequest to 1.1.1.1 to resolve the query. This way the user doesn’t have to think about DNS servers, and the query will just work.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"the-node-net-and-node-tls-modules\">The <code>node:net</code> and <code>node:tls</code> modules</h3>\n      <a href=\"#the-node-net-and-node-tls-modules\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>The <code>node:net</code> module provides an API for creating TCP sockets, while the <code>node:tls</code> module provides an API for creating secure TLS sockets. As we mentioned before, both are built on top of the existing <a href=\"https://developers.cloudflare.com/workers/runtime-apis/tcp-sockets/\"><u>Workers Sockets API</u></a>. Note that not all features of the <code>node:net</code> and <code>node:tls</code> modules are available in Workers. For instance, it is not yet possible to create a TCP server using <code>net.createServer()</code> yet (but maybe soon!), but we have implemented enough of the APIs to allow many popular packages that rely on these modules to work in Workers.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import net from &#039;node:net&#039;;\nimport tls from &#039;node:tls&#039;;\n\nexport default {\n  async fetch(request) {\n    const { promise, resolve } = Promise.withResolvers();\n    const socket = net.connect({ host: &#039;example.com&#039;, port: 80 },\n        () =&gt; {\n      let buf = &#039;&#039;;\n      socket.setEncoding(&#039;utf8&#039;)\n      socket.on(&#039;data&#039;, (chunk) =&gt; buf += chunk);\n      socket.on(&#039;end&#039;, () =&gt; resolve(new Response(&#039;ok&#039;));\n      socket.end();\n    });\n    return promise;\n  }\n}\n</pre></code>\n            \n    <div class=\"flex anchor relative\">\n      <h2 id=\"a-new-virtual-file-system-and-the-node-fs-module\">A new virtual file system and the <code>node:fs</code> module</h2>\n      <a href=\"#a-new-virtual-file-system-and-the-node-fs-module\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>What does supporting filesystem APIs mean in a serverless environment? When you deploy a Worker, it runs in Region:Earth and we don’t want you needing to think about individual servers with individual file systems. There are, however, countless existing applications and modules in the ecosystem that leverage the file system to store configuration data, read and write temporary data, and more.</p><p>Workers do not have access to a traditional file system like a Node.js process does, and for good reason! A Worker does not run on a single machine; a single request to one worker can run on any one of thousands of servers anywhere in Cloudflare&#39;s global <a href=\"https://www.cloudflare.com/network\"><u>network</u></a>. Coordinating and synchronizing access to shared physical resources such as a traditional file system harbor major technical challenges and risks of deadlocks and more; challenges that are inherent in any massively distributed system. Fortunately, Workers provide powerful tools like <a href=\"https://developers.cloudflare.com/durable-objects/\"><u>Durable Objects</u></a> that provide a solution for coordinating access to shared, durable state at scale. To address the need for a file system in Workers, we built on what already makes Workers great.</p><p>We implemented a virtual file system that allows you to use the node:fs APIs to read and write temporary, in-memory files. This virtual file system is specific to each Worker. When using a stateless worker, files created in one request are not accessible in any other request. However, when using a Durable Object, this temporary file space can be shared across multiple requests from multiple users. This file system is ephemeral (for now), meaning that files are not persisted across Worker restarts or deployments, so it does not replace the use of the <a href=\"https://developers.cloudflare.com/durable-objects/api/storage-api/\"><u>Durable Object Storage</u></a> mechanism, but it provides a powerful new tool that greatly expands the capabilities of your Durable Objects.</p><p>The <code>node:fs</code> module provides a rich set of APIs for working with files and directories:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import fs from &#039;node:fs&#039;;\n\nexport default {\n  async fetch(request) {\n    // Write a temporary file\n    await fs.promises.writeFile(&#039;/tmp/hello.txt&#039;, &#039;Hello, world!&#039;);\n\n    // Read the file\n    const data = await fs.promises.readFile(&#039;/tmp/hello.txt&#039;, &#039;utf-8&#039;);\n\n    return new Response(`File contents: ${data}`);\n  }\n}\n</pre></code>\n            <p>The virtual file system supports a wide range of file operations, including reading and writing files, creating and removing directories, and working with file descriptors. It also supports standard input/output/error streams via <code>process.stdin</code>, <code>process.stdout</code>, and <code>process.stderr</code>, symbolic links, streams, and more.</p><p>While the current implementation of the virtual file system is in-memory only, we are exploring options for adding persistent storage in the future that would link to existing Cloudflare storage solutions like R2 or Durable Objects. But you don&#39;t have to wait on us! When combined with powerful tools like Durable Objects and <a href=\"https://developers.cloudflare.com/workers/runtime-apis/rpc/\"><u>JavaScript RPC</u></a>, it&#39;s certainly possible to create your own general purpose, durable file system abstraction backed by sqlite storage.</p>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"cryptography-with-node-crypto\">Cryptography with <code>node:crypto</code></h2>\n      <a href=\"#cryptography-with-node-crypto\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>The <code>node:crypto</code> module provides a comprehensive set of cryptographic functionality, including hashing, encryption, decryption, and more. We have implemented a full version of the <code>node:crypto</code> module, allowing you to use familiar cryptographic APIs in your Workers applications. There will be some difference in behavior compared to Node.js due to the fact that Workers uses <a href=\"https://github.com/google/boringssl/blob/main/README.md\"><u>BoringSSL</u></a> under the hood, while Node.js uses <a href=\"https://github.com/openssl\"><u>OpenSSL</u></a>. However, we have strived to make the APIs as compatible as possible, and many popular packages that rely on <code>node:crypto</code> now work seamlessly in Workers.</p><p>To accomplish this, we didn&#39;t just copy the implementation of these cryptographic operations from Node.js. Rather, we worked within the Node.js project to extract the core crypto functionality out into a separate dependency project called <a href=\"https://github.com/nodejs/ncrypto\"><code><u>ncrypto</u></code></a> that is used – not only by Workers but Bun as well – to implement Node.js compatible functionality by simply running the exact same code that Node.js is running.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import crypto from &#039;node:crypto&#039;;\n\nexport default {\n  async fetch(request) {\n    const hash = crypto.createHash(&#039;sha256&#039;);\n    hash.update(&#039;Hello, world!&#039;);\n    const digest = hash.digest(&#039;hex&#039;);\n\n    return new Response(`SHA-256 hash: ${digest}`);\n  }\n}\n</pre></code>\n            <p>All major capabilities of the <code>node:crypto</code> module are supported, including:</p><ul><li><p>Hashing (e.g., SHA-256, SHA-512)</p></li><li><p>HMAC</p></li><li><p>Symmetric encryption/decryption</p></li><li><p>Asymmetric encryption/decryption</p></li><li><p>Digital signatures</p></li><li><p>Key generation and management</p></li><li><p>Random byte generation</p></li><li><p>Key derivation functions (e.g., PBKDF2, scrypt)</p></li><li><p>Cipher and Decipher streams</p></li><li><p>Sign and Verify streams</p></li><li><p>KeyObject class for managing keys</p></li><li><p>Certificate handling (e.g., X.509 certificates)</p></li><li><p>Support for various encoding formats (e.g., PEM, DER, base64)</p></li><li><p>and more…</p></li></ul>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"process-environment\">Process &amp; Environment</h2>\n      <a href=\"#process-environment\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>In Node.js, the <code>node:process</code> module provides a global object that gives information about, and control over, the current Node.js process. It includes properties and methods for accessing environment variables, command-line arguments, the current working directory, and more. It is one of the most fundamental modules in Node.js, and many packages rely on it for basic functionality and simply assume its presence. There are, however, some aspects of the <code>node:process</code> module that do not make sense in the Workers environment, such as process IDs and user/group IDs which are tied to the operating system and process model of a traditional server environment and have no equivalent in the Workers environment.</p><p>When <code>nodejs_compat</code> is enabled, the <code>process</code> global will be available in your Worker scripts or you can import it directly via <code>import process from &#39;node:process&#39;</code>. Note that the <code>process</code> global is only available when the <code>nodejs_compat</code> flag is enabled. If you try to access <code>process</code> without the flag, it will be <code>undefined</code> and the import will throw an error.</p><p>Let&#39;s take a look at the <code>process</code> APIs that do make sense in Workers, and that have been fully implemented, starting with <code>process.env</code>.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"environment-variables\">Environment variables</h3>\n      <a href=\"#environment-variables\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Workers have had <a href=\"https://developers.cloudflare.com/workers/configuration/environment-variables/\"><u>support for environment variables</u></a> for a while now, but previously they were only accessible via the env argument passed to the Worker function. Accessing the environment at the top-level of a Worker was not possible:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">export default {\n  async fetch(request, env) {\n    const config = env.MY_ENVIRONMENT_VARIABLE;\n    // ...\n  }\n}\n</pre></code>\n            <p> With the <a href=\"https://developers.cloudflare.com/workers/configuration/environment-variables/\"><code><u>new process.env</u></code><u> implementation</u></a>, you can now access environment variables in a more familiar way, just like in Node.js, and at any scope, including the top-level of your Worker:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import process from &#039;node:process&#039;;\nconst config = process.env.MY_ENVIRONMENT_VARIABLE;\n\nexport default {\n  async fetch(request, env) {\n    // You can still access env here if you need to\n    const configFromEnv = env.MY_ENVIRONMENT_VARIABLE;\n    // ...\n  }\n}\n</pre></code>\n            <p><a href=\"https://developers.cloudflare.com/workers/configuration/environment-variables/\"><u>Environment variables</u></a> are set in the same way as before, via the <code>wrangler.toml</code> or <code>wrangler.jsonc</code> configuration file, or via the Cloudflare dashboard or API. They may be set as simple key-value pairs or as JSON objects:</p>\n            <pre class=\"language-JSON\"><code class=\"language-JSON\">{\n  &quot;name&quot;: &quot;my-worker-dev&quot;,\n  &quot;main&quot;: &quot;src/index.js&quot;,\n  &quot;compatibility_date&quot;: &quot;2025-09-15&quot;,\n  &quot;compatibility_flags&quot;: [\n    &quot;nodejs_compat&quot;\n  ],\n  &quot;vars&quot;: {\n    &quot;API_HOST&quot;: &quot;example.com&quot;,\n    &quot;API_ACCOUNT_ID&quot;: &quot;example_user&quot;,\n    &quot;SERVICE_X_DATA&quot;: {\n      &quot;URL&quot;: &quot;service-x-api.dev.example&quot;,\n      &quot;MY_ID&quot;: 123\n    }\n  }\n}\n</pre></code>\n            <p>When accessed via <code>process.env</code>, all environment variable values are strings, just like in Node.js.</p><p>Because <code>process.env</code> is accessible at the global scope, it is important to note that environment variables are accessible from anywhere in your Worker script, including third-party libraries that you may be using. This is consistent with Node.js behavior, but it is something to be aware of from a security and configuration management perspective. The <a href=\"https://developers.cloudflare.com/secrets-store/\"><u>Cloudflare Secrets Store</u></a> can provide enhanced handling around secrets within Workers as an alternative to using environment variables.</p>\n    <div class=\"flex anchor relative\">\n      <h4 id=\"importable-environment-and-waituntil\">Importable environment and waitUntil</h4>\n      <a href=\"#importable-environment-and-waituntil\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>When not using the <code>nodejs_compat</code> flag, we decided to go a step further and make it possible to import both the environment, and the <a href=\"https://developers.cloudflare.com/workers/configuration/environment-variables/\"><u>waitUntil mechanism</u></a>, as a module, rather than forcing users to always access it via the <code>env</code> and <code>ctx</code> arguments passed to the Worker function. This can make it easier to access the environment in a more modular way, and can help to avoid passing the <code>env</code> argument through multiple layers of function calls. This is not a Node.js-compatibility feature, but we believe it is a useful addition to the Workers environment:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import { env, waitUntil } from &#039;cloudflare:workers&#039;;\n\nconst config = env.MY_ENVIRONMENT_VARIABLE;\n\nexport default {\n  async fetch(request) {\n    // You can still access env here if you need to\n    const configFromEnv = env.MY_ENVIRONMENT_VARIABLE;\n    // ...\n  }\n}\n\nfunction doSomething() {\n  // Bindings and waitUntil can now be accessed without\n  // passing the env and ctx through every function call.\n  waitUntil(env.RPC.doSomethingRemote());\n}\n</pre></code>\n            <p>One important note about <code>process.env</code>: changes to environment variables via <code>process.env</code> will not be reflected in the <code>env</code> argument passed to the Worker function, and vice versa. The <code>process.env</code> is populated at the start of the Worker execution and is not updated dynamically. This is consistent with Node.js behavior, where changes to <code>process.env</code> do not affect the actual environment variables of the running process. We did this to minimize the risk that a third-party library, originally meant to run in Node.js, could inadvertently modify the environment assumed by the rest of the Worker code.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"stdin-stdout-stderr\">Stdin, stdout, stderr</h3>\n      <a href=\"#stdin-stdout-stderr\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Workers do not have a traditional standard input/output/error streams like a Node.js process does. However, we have implemented <code>process.stdin</code>, <code>process.stdout</code>, and <code>process.stderr</code> as stream-like objects that can be used similarly. These streams are not connected to any actual process stdin and stdout, but they can be used to capture output that is written to the logs captured by the Worker in the same way as <code>console.log</code> and friends, just like them, they will show up in <a href=\"https://developers.cloudflare.com/workers/observability/logs/workers-logs/\"><u>Workers Logs</u></a>.</p><p>The <code>process.stdout</code> and <code>process.stderr</code> are Node.js writable streams:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import process from &#039;node:process&#039;;\n\nexport default {\n  async fetch(request) {\n    process.stdout.write(&#039;This will appear in the Worker logs\\n&#039;);\n    process.stderr.write(&#039;This will also appear in the Worker logs\\n&#039;);\n    return new Response(&#039;Hello, world!&#039;);\n  }\n}\n</pre></code>\n            <p>Support for <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> is also integrated with the virtual file system, allowing you to write to the standard file descriptors <code>0</code>, <code>1</code>, and <code>2</code> (representing <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> respectively) using the <code>node:fs</code> APIs:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import fs from &#039;node:fs&#039;;\nimport process from &#039;node:process&#039;;\n\nexport default {\n  async fetch(request) {\n    // Write to stdout\n    fs.writeSync(process.stdout.fd, &#039;Hello, stdout!\\n&#039;);\n    // Write to stderr\n    fs.writeSync(process.stderr.fd, &#039;Hello, stderr!\\n&#039;);\n\n    return new Response(&#039;Check the logs for stdout and stderr output!&#039;);\n  }\n}\n</pre></code>\n            \n    <div class=\"flex anchor relative\">\n      <h3 id=\"other-process-apis\">Other process APIs</h3>\n      <a href=\"#other-process-apis\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>We cannot cover every <code>node:process</code> API in detail here, but here are some of the other notable APIs that we have implemented:</p><ul><li><p><code>process.nextTick(fn)</code>: Schedules a callback to be invoked after the current execution context completes. Our implementation uses the same microtask queue as promises so that it behaves exactly the same as <code>queueMicrotask(fn)</code>.</p></li><li><p><code>process.cwd()</code> and <code>process.chdir()</code>: Get and change the current virtual working directory. The current working directory is initialized to /<code>bundle</code> when the Worker starts, and every request has its own isolated view of the current working directory. Changing the working directory in one request does not affect the working directory in other requests.</p></li><li><p><code>process.exit()</code>: Immediately terminates the current Worker request execution. This is unlike Node.js where <code>process.exit()</code> terminates the entire process. In Workers, calling <code>process.exit()</code> will stop execution of the current request and return an error response to the client.</p></li></ul>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"compression-with-node-zlib\">Compression with <code>node:zlib</code></h2>\n      <a href=\"#compression-with-node-zlib\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>The <code>node:zlib</code> module provides APIs for compressing and decompressing data using various algorithms such as gzip, deflate, and brotli. We have implemented the <code>node:zlib</code> module, allowing you to use familiar compression APIs in your Workers applications. This enables a wide range of use cases, including data compression for network transmission, response optimization, and archive handling.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import zlib from &#039;node:zlib&#039;;\n\nexport default {\n  async fetch(request) {\n    const input = &#039;Hello, world! Hello, world! Hello, world!&#039;;\n    const compressed = zlib.gzipSync(input);\n    const decompressed = zlib.gunzipSync(compressed).toString(&#039;utf-8&#039;);\n\n    return new Response(`Decompressed data: ${decompressed}`);\n  }\n}\n</pre></code>\n            <p>While Workers has had built-in support for gzip and deflate compression via the <a href=\"https://compression.spec.whatwg.org/\"><u>Web Platform Standard Compression API</u></a>, the <code>node:zlib</code> module support brings additional support for the Brotli compression algorithm, as well as a more familiar API for Node.js developers.</p>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"timing-scheduling\">Timing &amp; scheduling</h2>\n      <a href=\"#timing-scheduling\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Node.js provides a set of timing and scheduling APIs via the <code>node:timers</code> module. We have implemented these in the runtime as well.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import timers from &#039;node:timers&#039;;\n\nexport default {\n  async fetch(request) {\n    timers.setInterval(() =&gt; {\n      console.log(&#039;This will log every half-second&#039;);\n    }, 500);\n\n    timers.setImmediate(() =&gt; {\n      console.log(&#039;This will log immediately after the current event loop&#039;);\n    });\n\n    return new Promise((resolve) =&gt; {\n      timers.setTimeout(() =&gt; {\n        resolve(new Response(&#039;Hello after 1 second!&#039;));\n      }, 1000);\n    });\n  }\n}\n</pre></code>\n            <p>The Node.js implementations of the timers APIs are very similar to the standard Web Platform with one key difference: the Node.js timers APIs return <code>Timeout</code> objects that can be used to manage the timers after they have been created. We have implemented the <code>Timeout</code> class in Workers to provide this functionality, allowing you to clear or re-fire timers as needed.</p>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"console\">Console</h2>\n      <a href=\"#console\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>The <code>node:console</code> module provides a set of console logging APIs that are similar to the standard <code>console</code> global, but with some additional features. We have implemented the <code>node:console</code> module as a thin wrapper around the existing <code>globalThis.console</code> that is already available in Workers.</p>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"how-to-enable-the-node-js-compatibility-features\">How to enable the Node.js compatibility features</h2>\n      <a href=\"#how-to-enable-the-node-js-compatibility-features\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>To enable the Node.js compatibility features as a whole within your Workers, you can set the <code>nodejs_compat</code> <a href=\"https://developers.cloudflare.com/workers/configuration/compatibility-flags/\"><u>compatibility flag</u></a> in your <a href=\"https://developers.cloudflare.com/workers/wrangler/configuration/\"><code><u>wrangler.jsonc or wrangler.toml</u></code></a> configuration file. If you are not using Wrangler, you can also set the flag via the <a href=\"https://dash.cloudflare.com\"><u>Cloudflare dashboard</u></a> or API:</p>\n            <pre class=\"language-JSON\"><code class=\"language-JSON\">{\n  &quot;name&quot;: &quot;my-worker&quot;,\n  &quot;main&quot;: &quot;src/index.js&quot;,\n  &quot;compatibility_date&quot;: &quot;2025-09-21&quot;,\n  &quot;compatibility_flags&quot;: [\n    // Get everything Node.js compatibility related\n    &quot;nodejs_compat&quot;,\n  ]\n}\n</pre></code>\n            <p><b>The compatibility date here is key! Update that to the most current date, and you&#39;ll always be able to take advantage of the latest and greatest features.</b></p><p>The <code>nodejs_compat</code> flag is an umbrella flag that enables all the Node.js compatibility features at once. This is the recommended way to enable Node.js compatibility, as it ensures that all features are available and work together seamlessly. However, if you prefer, you can also enable or disable some features individually via their own compatibility flags:</p><style type=\"text/css\">\n.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}\n.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg .tg-fgy3{font-family:\"Courier New\", Courier, monospace !important;text-align:left;vertical-align:top}\n.tg .tg-u0qz{font-family:Arial, Helvetica, sans-serif !important;font-size:x-large;font-weight:bold;text-align:left;\n  text-decoration:underline;vertical-align:top}\n.tg .tg-z2pc{background-color:#0FF;font-family:\"Courier New\", Courier, monospace !important;text-align:left;vertical-align:top}\n@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;margin: auto 0px;}}</style>\n<div class=\"tg-wrap\"><table class=\"tg\"><thead>\n  <tr>\n    <th class=\"tg-u0qz\"><span style=\"font-style:normal;color:#000;background-color:transparent\">Module</span></th>\n    <th class=\"tg-u0qz\"><span style=\"font-style:normal;color:#000;background-color:transparent\">Enable Flag (default)</span></th>\n    <th class=\"tg-u0qz\"><span style=\"font-style:normal;color:#000;background-color:transparent\">Disable Flag</span></th>\n  </tr></thead>\n<tbody>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:console</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">enable_nodejs_console_module</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">disable_nodejs_console_module</span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:fs</span></td>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">enable_nodejs_fs_module</span></td>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">disable_nodejs_fs_module</span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:http (client)</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">enable_nodejs_http_modules</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">disable_nodejs_http_modules</span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:http (server)</span></td>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">enable_nodejs_http_server_modules</span></td>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">disable_nodejs_http_server_modules</span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:os</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">enable_nodejs_os_module</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">disable_nodejs_os_module</span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:process</span></td>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">enable_nodejs_process_v2</span></td>\n    <td class=\"tg-fgy3\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">node:zlib</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">nodejs_zlib</span></td>\n    <td class=\"tg-z2pc\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">no_nodejs_zlib</span></td>\n  </tr>\n  <tr>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">process.env</span></td>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">nodejs_compat_populate_process_env</span></td>\n    <td class=\"tg-fgy3\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">nodejs_compat_do_not_populate_process_env</span></td>\n  </tr>\n</tbody></table></div><p>By separating these features, you can have more granular control over which Node.js APIs are available in your Workers. At first, we had started rolling out these features under the one <code>nodejs_compat</code> flag, but we quickly realized that some users perform feature detection based on the presence of certain modules and APIs and that by enabling everything all at once we were risking breaking some existing Workers. Users who are checking for the existence of these APIs manually can ensure new changes don’t break their workers by opting out of specific APIs:</p>\n            <pre class=\"language-JSON\"><code class=\"language-JSON\">{\n  &quot;name&quot;: &quot;my-worker&quot;,\n  &quot;main&quot;: &quot;src/index.js&quot;,\n  &quot;compatibility_date&quot;: &quot;2025-09-15&quot;,\n  &quot;compatibility_flags&quot;: [\n    // Get everything Node.js compatibility related\n    &quot;nodejs_compat&quot;,\n    // But disable the `node:zlib` module if necessary\n    &quot;no_nodejs_zlib&quot;,\n  ]\n}\n</pre></code>\n            <p>But, to keep things simple, <b>we recommend starting with the </b><code><b>nodejs_compat</b></code><b> flag, which will enable everything. You can always disable individual features later if needed.</b> There is no performance penalty to having the additional features enabled.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"handling-end-of-lifed-apis\">Handling end-of-life&#39;d APIs</h3>\n      <a href=\"#handling-end-of-lifed-apis\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>One important difference between Node.js and Workers is that Node.js has a <a href=\"https://nodejs.org/en/eol\"><u>defined long term support (LTS) schedule</u></a> that allows it to make breaking changes at certain points in time. More specifically, Node.js can remove APIs and features when they reach end-of-life (EOL). On Workers, however, we have a rule that once a Worker is deployed, <a href=\"https://blog.cloudflare.com/backwards-compatibility-in-cloudflare-workers/\"><u>it will continue to run as-is indefinitely</u></a>, without any breaking changes as long as the compatibility date does not change. This means that we cannot simply remove APIs when they reach EOL in Node.js, since this would break existing Workers. To address this, we have introduced a new set of compatibility flags that allow users to specify that they do not want the <code>nodejs_compat</code> features to include end-of-life APIs. These flags are based on the Node.js major version in which the APIs were removed:</p><p>The <code>remove_nodejs_compat_eol</code> flag will remove all APIs that have reached EOL up to your current compatibility date:</p>\n            <pre class=\"language-json\"><code class=\"language-json\">{\n  &quot;name&quot;: &quot;my-worker&quot;,\n  &quot;main&quot;: &quot;src/index.js&quot;,\n  &quot;compatibility_date&quot;: &quot;2025-09-15&quot;,\n  &quot;compatibility_flags&quot;: [\n    // Get everything Node.js compatibility related\n    &quot;nodejs_compat&quot;,\n    // Remove Node.js APIs that have reached EOL up to your\n    // current compatibility date\n    &quot;remove_nodejs_compat_eol&quot;,\n  ]\n}\n</pre></code>\n            <ul><li><p>The <code>remove_nodejs_compat_eol_v22</code> flag will remove all APIs that reached EOL in Node.js v22. When using r<code>emovenodejs_compat_eol</code>, this flag will be automatically enabled if your compatibility date is set to a date after Node.js v22&#39;s EOL date (April 30, 2027).</p></li><li><p>The <code>remove_nodejs_compat_eol_v23</code> flag will remove all APIs that reached EOL in Node.js v23. When using r<code>emovenodejs_compat_eol</code>, this flag will be automatically enabled if your compatibility date is set to a date after Node.js v24&#39;s EOL date (April 30, 2028).</p></li><li><p>The <code>remove_nodejs_compat_eol_v24</code> flag will remove all APIs that reached EOL in Node.js v24. When using <code>removenodejs_compat_eol</code>, this flag will be automatically enabled if your compatibility date is set to a date after Node.js v24&#39;s EOL date (April 30, 2028).</p></li></ul><p>If you look at the date for <code>remove_nodejs_compat_eol_v23</code> you&#39;ll notice that it is the same as the date for <code>remove_nodejs_compat_eol_v24</code>. That is not a typo! Node.js v23 is not an LTS release, and as such it has a very short support window. It was released in October 2023 and reached EOL in May 2024. Accordingly, we have decided to group the end-of-life handling of non-LTS releases into the next LTS release. This means that when you set your compatibility date to a date after the EOL date for Node.js v24, you will also be opting out of the APIs that reached EOL in Node.js v23. Importantly, these flags will not be automatically enabled until your compatibility date is set to a date after the relevant Node.js version&#39;s EOL date, ensuring that existing Workers will have plenty of time to migrate before any APIs are removed, or can choose to just simply keep using the older APIs indefinitely by using the reverse compatibility flags like <code>add_nodejs_compat_eol_v24</code>.</p>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"giving-back\">Giving back</h2>\n      <a href=\"#giving-back\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>One other important bit of work that we have been doing is expanding Cloudflare&#39;s investment back into the Node.js ecosystem as a whole. There are now five members of the Workers runtime team (plus one summer intern) that are actively contributing to the <a href=\"https://github.com/nodejs/node\"><u>Node.js project</u></a> on GitHub, two of which are members of Node.js&#39; Technical Steering Committee. While we have made a number of new feature contributions such as an implementation of the Web Platform Standard <a href=\"https://blog.cloudflare.com/improving-web-standards-urlpattern/\"><u>URLPattern</u></a> API and improved implementation of <a href=\"https://github.com/nodejs/ncrypto\"><u>crypto</u></a> operations, our primary focus has been on improving the ability for other runtimes to interoperate and be compatible with Node.js, fixing critical bugs, and improving performance. As we continue to grow our efforts around Node.js compatibility we will also grow our contributions back to the project and ecosystem as a whole.</p><style type=\"text/css\">\n.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}\n.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;\n  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg .tg-1wig{font-weight:bold;text-align:left;vertical-align:top}\n.tg .tg-12li{background-color:#0FF;font-size:100%;font-weight:bold;text-align:left;vertical-align:top}\n.tg .tg-t978{background-color:#0FF;text-align:left;vertical-align:top}\n.tg .tg-wu3h{background-color:#0FF;color:#15C;text-align:left;text-decoration:underline;vertical-align:top}\n.tg .tg-0lax{text-align:left;vertical-align:top}\n.tg .tg-zb5k{color:#15C;text-align:left;text-decoration:underline;vertical-align:top}\n.tg .tg-lvtv{background-color:#0FF;font-weight:bold;text-align:left;vertical-align:top}\n@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;margin: auto 0px;}}</style>\n<div class=\"tg-wrap\"><table class=\"tg\"><thead>\n  <tr>\n    <th class=\"tg-12li\" colspan=\"2\"><span style=\"font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Aaron Snell</span></th>\n    <th class=\"tg-t978\" rowspan=\"2\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">2025 Summer Intern, Cloudflare Containers</span><br><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Node.js Web Infrastructure Team</span></th>\n    <th class=\"tg-t978\" rowspan=\"2\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2ud1DF6HOI3ha2ySAhPOve/803132cf224695a48698afb806bf147b/Aaron.png?h=250\" alt=\"Image\" width=\"85\" height=\"85\"></th>\n  </tr>\n  <tr>\n    <th class=\"tg-t978\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2nqff7ZSEryQfXbl2OdwfJ/6b4a56a3e71f439032d3bc0413d2d72f/GitHub.png?h=250\" alt=\"Image\" width=\"25\" height=\"25\"></th>\n    <th class=\"tg-wu3h\"><a href=\"https://github.com/flakey5\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">flakey5</span></a></th>\n  </tr></thead>\n<tbody>\n  <tr>\n    <td class=\"tg-1wig\" colspan=\"2\"><span style=\"font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Dario Piotrowicz</span></td>\n    <td class=\"tg-0lax\" rowspan=\"2\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Senior System Engineer</span><br><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Node.js Collaborator</span></td>\n    <td class=\"tg-0lax\" rowspan=\"2\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/4K17bsjek1z4u2KRTtZ8uS/d7058dea515cb057a1727bcd01a0f5d2/Dario.png?h=250\" alt=\"Image\" width=\"85\" height=\"85\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-0lax\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2nqff7ZSEryQfXbl2OdwfJ/6b4a56a3e71f439032d3bc0413d2d72f/GitHub.png?h=250\" alt=\"Image\" width=\"25\" height=\"25\"></td>\n    <td class=\"tg-zb5k\"><a href=\"https://github.com/dario-piotrowicz\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">dario-piotrowicz</span></a></td>\n  </tr>\n  <tr>\n    <td class=\"tg-lvtv\" colspan=\"2\"><span style=\"font-weight:700;font-style:normal\">Guy Bedford</span></td>\n    <td class=\"tg-t978\" rowspan=\"2\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Principal Systems Engineer</span><br><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Node.js Collaborator</span></td>\n    <td class=\"tg-t978\" rowspan=\"2\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/iYM8oWWSK89MesmQwctfc/4d86847238b1f10e18717771e2ad5ee8/Guy.png?h=250\" alt=\"Image\" width=\"85\" height=\"85\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-t978\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2nqff7ZSEryQfXbl2OdwfJ/6b4a56a3e71f439032d3bc0413d2d72f/GitHub.png?h=250\" alt=\"Image\" width=\"25\" height=\"25\"></td>\n    <td class=\"tg-wu3h\"><a href=\"https://github.com/guybedford\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">guybedford</span></a></td>\n  </tr>\n  <tr>\n    <td class=\"tg-1wig\" colspan=\"2\"><span style=\"font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">James Snell</span></td>\n    <td class=\"tg-0lax\" rowspan=\"2\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Principal Systems Engineer</span><br><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Node.js TSC</span></td>\n    <td class=\"tg-0lax\" rowspan=\"2\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/4vN2YAqsEBlSnWtXRM0pTT/5e9130753ed71933fc94bc2c634425f3/James.png?h=250\" width=\"85\" height=\"85\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-0lax\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2nqff7ZSEryQfXbl2OdwfJ/6b4a56a3e71f439032d3bc0413d2d72f/GitHub.png?h=250\" alt=\"Image\" width=\"25\" height=\"25\"></td>\n    <td class=\"tg-zb5k\"><a href=\"https://github.com/jasnell\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">jasnell</span></a></td>\n  </tr>\n  <tr>\n    <td class=\"tg-lvtv\" colspan=\"2\"><span style=\"font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Nicholas Paun</span></td>\n    <td class=\"tg-t978\" rowspan=\"2\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Systems Engineer</span><br><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Node.js Contributor</span></td>\n    <td class=\"tg-t978\" rowspan=\"2\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/4ePtfLAzk4pKYi4hU4dRLX/e4dcdfe86a4e54c4d02e356e2078d214/Nicholas.png?h=250\" width=\"85\" height=\"85\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-t978\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2nqff7ZSEryQfXbl2OdwfJ/6b4a56a3e71f439032d3bc0413d2d72f/GitHub.png?h=250\" alt=\"Image\" width=\"25\" height=\"25\"></td>\n    <td class=\"tg-wu3h\"><a href=\"https://github.com/npaun\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">npaun</span></a></td>\n  </tr>\n  <tr>\n    <td class=\"tg-1wig\" colspan=\"2\"><span style=\"font-weight:700;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Yagiz Nizipli</span></td>\n    <td class=\"tg-0lax\" rowspan=\"2\"><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Principal Systems Engineer</span><br><span style=\"font-weight:400;font-style:normal;text-decoration:none;color:#000;background-color:transparent\">Node.js TSC</span></td>\n    <td class=\"tg-0lax\" rowspan=\"2\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2nvpEqU0VHi3Se9fxJ5vE8/0f5628bc1756c7e3e363760be9c493ae/Yagiz.png?h=250\" width=\"85\" height=\"85\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-0lax\"><img src=\"https://images.ctfassets.net/zkvhlag99gkb/2nqff7ZSEryQfXbl2OdwfJ/6b4a56a3e71f439032d3bc0413d2d72f/GitHub.png?h=250\" alt=\"Image\" width=\"25\" height=\"25\"></td>\n    <td class=\"tg-zb5k\"><a href=\"https://github.com/anonrig\"><span style=\"font-weight:400;font-style:normal;text-decoration:underline;color:#15C;background-color:transparent\">anonrig</span></a></td>\n  </tr>\n</tbody></table></div><p>Cloudflare is also proud to continue supporting critical infrastructure for the Node.js project through its <a href=\"https://openjsf.org/blog/openjs-cloudflare-partnership\"><u>ongoing strategic partnership</u></a> with the OpenJS Foundation, providing free access to the project to services such as Workers, R2, DNS, and more.</p>\n    <div class=\"flex anchor relative\">\n      <h2 id=\"give-it-a-try\">Give it a try!</h2>\n      <a href=\"#give-it-a-try\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Our vision for Node.js compatibility in Workers is not just about implementing individual APIs, but about creating a comprehensive platform that allows developers to run existing Node.js code seamlessly in the Workers environment. This involves not only implementing the APIs themselves, but also ensuring that they work together harmoniously, and that they integrate well with the unique aspects of the Workers platform.</p><p>In some cases, such as with <code>node:fs</code> and <code>node:crypto</code>, we have had to implement entirely new capabilities that were not previously available in Workers and did so at the native runtime level. This allows us to tailor the implementations to the unique aspects of the Workers environment and ensure both performance and security.</p><p>And we&#39;re not done yet. We are continuing to work on implementing additional Node.js APIs, as well as improving the performance and compatibility of the existing implementations. We are also actively engaging with the community to understand their needs and priorities, and to gather feedback on our implementations. If there are specific Node.js APIs or npm packages that you would like to see supported in Workers, <a href=\"https://github.com/cloudflare/workerd/\"><u>please let us know</u></a>! If there are any issues or bugs you encounter, please report them on our <a href=\"https://github.com/cloudflare/workerd/\"><u>GitHub repository</u></a>. While we might not be able to implement every single Node.js API, nor match Node.js&#39; behavior exactly in every case, we are committed to providing a robust and comprehensive Node.js compatibility layer that meets the needs of the community.</p><p>All the Node.js compatibility features described in this post are <a href=\"https://developers.cloudflare.com/workers/runtime-apis/nodejs/\"><u>available now</u></a>. To get started, simply enable the <code>nodejs_compat</code> compatibility flag in your <code>wrangler.toml</code> or <code>wrangler.jsonc</code> file, or via the Cloudflare dashboard or API. You can then start using the Node.js APIs in your Workers applications right away.</p>",
		"id": "rMNgTNdCcEh6MjAlrKkL3",
		"localeList": {
			"name": "LOC: A year of improving Node.js compatibility in Cloudflare Workers",
			"enUS": "English for Locale",
			"zhCN": "Translated for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "Over the year we have greatly expanded Node.js compatibility. There are hundreds of new Node.js APIs now available that make it easier to run existing Node.js code on our platform. This has been a major initiative for us, and we are excited to share the progress we've made.",
		"metadata": {
			"title": "A year of improving Node.js compatibility in Cloudflare Workers",
			"description": "Over the year we have greatly expanded Node.js compatibility. There are hundreds of new Node.js APIs now available that make it easier to run existing Node.js code on our platform. This has been a major initiative for us, and we are excited to share the progress we've made.",
			"imgPreview": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6XAA3wpGE4F9rXzzQ9ewRt/6a97b723196ac2c22766bb3d07c71c82/A_year_of_improving_Node.js_compatibility_in_Cloudflare_Workers-OG.png"
		},
		"primary_author": {},
		"publicly_index": true,
		"published_at": "2025-09-25T14:00+01:00",
		"slug": "nodejs-workers-2025",
		"tags": [
			{
				"id": "3XzVULQKajbCuWudT6JD0p",
				"name": "Node.js",
				"slug": "node-js"
			},
			{
				"id": "1Cv5JjXzKWKEA10JdYbXu1",
				"name": "Birthday Week",
				"slug": "birthday-week"
			},
			{
				"id": "6hbkItfupogJP3aRDAq6v8",
				"name": "Cloudflare Workers",
				"slug": "workers"
			},
			{
				"id": "78aSAeMjGNmCuetQ7B4OgU",
				"name": "JavaScript",
				"slug": "javascript"
			},
			{
				"id": "5cye1Bh5KxFh3pKSnX8Dsy",
				"name": "Serverless",
				"slug": "serverless"
			},
			{
				"id": "1IVpRmO1Bg0J9pDI7FUeEB",
				"name": "Servers",
				"slug": "servers"
			}
		],
		"title": "A year of improving Node.js compatibility in Cloudflare Workers",
		"updated_at": "2025-10-28T08:27:54.512Z",
		"url": "https://blog.cloudflare.com/nodejs-workers-2025"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.icon_aria_label": "Search",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"search.result_stat_empty": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong>",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"search.autocomplete_title": "Insert a query. Press enter to send",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}