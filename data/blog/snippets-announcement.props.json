{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "6",
	"locale": "en-us",
	"localesAvailable": [
		"zh-cn",
		"zh-tw",
		"fr-fr",
		"de-de",
		"ja-jp",
		"pt-br",
		"es-es"
	],
	"post": {
		"authors": [
			{
				"name": "Sam Marsh",
				"slug": "sam-marsh",
				"bio": "Group Product Manager at Cloudflare. Responsible for areas such as Rules, Cache, Protocols, Custom Error Pages and more.",
				"profile_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5kVXxWDGGrehLTLG30sCWm/feef23af27efd36a36a0c53870de34a7/sam-marsh.png",
				"location": "England, United Kingdom",
				"website": null,
				"twitter": "@marshnet_social",
				"facebook": null
			}
		],
		"excerpt": "Today we are announcing Cloudflare Snippets. Snippets are a simple way of executing a small piece of Javascript on select HTTP requests, using the ruleset engine filtering logic.",
		"feature_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4mH78GfuqQm6rcPFNAf6rC/02659e9a04ed3a10bb19f7a7f3ea30ad/snippets-announcement.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/1OJBcvw1RLIv4SmqBQoDVE/12f4e3f81b9aff4ecc7a62c7017c98c2/image3-28.png\" alt=\"The most programmable Supercloud with Cloudflare Snippets\" class=\"kg-image\" width=\"1801\" height=\"1013\" loading=\"lazy\"/>\n            \n            </figure>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"your-traffic-how-you-like-it\">Your traffic, how you like it</h2>\n            <a href=\"#your-traffic-how-you-like-it\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>Cloudflare is used by a highly diverse customer base. We offer simple-to-use products for everything from setting HTTP headers to rewriting the URI path and performing URL redirects. Sometimes customers need more than the out-of-the-box functionality, not just adding an HTTP header - but performing some advanced calculation to create the output. Today they would need to create a feature request and wait for it to be shipped, write a <a href=\"https://workers.cloudflare.com/\">Cloudflare Worker</a>, or keep this modification ‘on origin’ - on their own infrastructure.</p><p>To simplify this, we are delighted to announce Cloudflare Snippets. Snippets are a new way to perform traffic modifications that users either cannot do via our productised offerings, or want to do programmatically. The best part? The vast majority of customers will pay <i>nothing extra</i> for using Snippets.</p><p>Users now have a choice. Perform the action via a rule. Or, if more functionality is needed, write a Snippet.  Neither will mean waiting. Neither will incur additional cost (although a high fair usage cap will apply). Snippets unblocks users to do what they want, when they want. All on Cloudflare.</p><p>Snippets will support the import of code written in various languages, such as JavaScript (modern), VCL (legacy) and Apache .htaccess files (legacy). This allows customers to migrate legacy operational code onto our platform - whilst also consolidating their JavaScript operations.</p><p>Please use the sign-up form to join the waitlist for Snippets if you are interested in testing. We hope to begin admitting users into the closed beta early 2023.</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"why-build-snippets\">Why build Snippets?</h2>\n            <a href=\"#why-build-snippets\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>Over the past 18 months we have released a number of new rules products such as <a href=\"/introducing-transform-rules-with-url-rewriting-at-the-edge/\">Transform Rules,</a> <a href=\"/introducing-cache-rules/\">Cache Rules</a>, <a href=\"/origin-rules/\">Origin Rules</a>, <a href=\"/configuration-rules/\">Config Rules</a> and <a href=\"/dynamic-redirect-rules/\">Redirect Rules</a>. These new products give more control to customers on how we process their traffic as it flows through our global network. The feedback on these products so far has been overwhelmingly positive. However, our customers still occasionally need the ability to do more than the out-of-the-box functionality allows.</p><p>There are always some use cases where a product doesn’t provide the functionality that a customer needs for their specific situation.  For example, whilst thousands of our customers are now using Transform Rules to solve their HTTP header modification use cases, there remains a small number of use cases that are not possible, such as setting dynamic expiry times with cookies or hashing tokens with a key.</p><p>This is where Cloudflare Snippets help. Customers will no longer need to use the full Cloudflare Workers platform to implement these relatively simple use cases. Nor will they need to wait for us to build their feature requests. Instead, they will be able to run a Snippet of JavaScript.</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"migrating-legacy-code-to-snippets\">Migrating legacy code to Snippets</h2>\n            <a href=\"#migrating-legacy-code-to-snippets\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p><a href=\"https://varnish-cache.org/docs/trunk/users-guide/vcl.html\">Varnish Control Language</a> (VCL) is only used within the context of Varnish. Launched around 16 years ago, it has historically been used to configure traffic and routing for <a href=\"https://www.cloudflare.com/learning/cdn/what-is-a-cdn/\">Content Delivery Networks</a> as it was extensible to a wide range of use cases.</p><p>There are still a good number of businesses out there using VCL to perform routing and traffic modification actions. Whilst other providers are deprecating support for VCL, we want to make sure those of you comfortable using it are still supported.</p><p>Snippets won&#39;t run pure VCL. Instead, we will convert VCL into easy to maintain rules or Snippets. To achieve this we’re building a simple-to-use, self-serve VCL converter that analyzes uploaded VCL code and auto-generates suggested Snippets, and if we can find a match, also generates suggested rules for products such as Transform Rules or Cache Rules.</p><p>This topic was initially handled via <a href=\"/announcing-turpentine/\">Project Turpentine</a>, a suite of tools used by Cloudflare employees to parse a customer’s VCL into a suggested JavaScript configuration. This JavaScript could then be loaded into a Worker, or series of Workers.</p><p>Snippets takes the idea and principles of Turpentine further. Much further. By building a parser directly in the dashboard it puts the power directly into the hands of users and gives them a choice. You can tell us to migrate everything we can into Rules with the remaining code migrated into Snippets, or, you can choose to tell us to migrate everything into discrete Snippets. It&#39;s your call.</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/7783datzERcQclqZ8Ey84u/12736fcb80fffecbdb6a73f7053e9deb/image1-55.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"1266\" loading=\"lazy\"/>\n            \n            </figure><p>We’ll give Apache <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Server-side/Apache_Configuration_htaccess\">htaccess</a> and NGINX <a href=\"https://www.nginx.com/resources/wiki/start/topics/examples/full/\">configuration files</a> the same treatment. The goal being users simply upload the files from their websites Apache or NGINX configuration, and we generate suggested Snippets and/or rules.</p><p>The days of having to use legacy code for operational tasks are coming to an end. Snippets allow users to migrate these workloads to Cloudflare, and let them focus on the bigger problems of the business vs maintaining legacy systems.</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"the-difference-between-snippets-and-workers\">The difference between Snippets and Workers</h2>\n            <a href=\"#the-difference-between-snippets-and-workers\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>Most readers will already be familiar with Cloudflare Workers, our powerful developer platform which allows businesses to run and build entire products and solutions on Cloudflare&#39;s global network. Snippets is also built on this platform, but has a few key differences.</p><p>The first major difference is that a Snippet will run as part of the <a href=\"https://developers.cloudflare.com/ruleset-engine/\">Ruleset Engine</a> as dedicated new <i>phases</i>, similar to Transform Rules and Cache Rules. Customers will be able to select and execute a Snippet based on any <a href=\"https://developers.cloudflare.com/ruleset-engine/rules-language/fields\">ruleset engine filter</a>. This allows customers to run a Snippet against every request, or filter for specific HTTP traffic based on the fields we offer, such as traffic with a certain bot score, originating from a specific country, or with a specific cookie. Snippets will be additive, meaning users can have one Snippet to add an HTTP header, and another to rewrite the URL, and both will execute if they match:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/1RAJyoslLJf0Q7yiGjqTiD/1b0b09e884088b571e513fd8225e8892/image2-39.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"824\" loading=\"lazy\"/>\n            \n            </figure><p>Another major difference - Cloudflare Snippets are available for all plan levels, at no additional cost. 99% of users won&#39;t pay a single cent, ever, to use this solution. This allows customers to migrate their simple workloads from legacy solutions like VCL to the Cloudflare platform, and actively reduce their monthly spend.</p><!--kg-card-begin: html--><table>\n<thead>\n  <tr>\n    <th></th>\n    <th>Free Plans</th>\n    <th>Pro Plans</th>\n    <th> Business Plans</th>\n    <th>Enterprise Plans</th>\n  </tr>\n</thead>\n<tbody>\n  <tr>\n    <td>Snippets available</td>\n    <td>5 Snippets per zone.</td>\n    <td>20 Snippets per zone.</td>\n    <td>50 Snippets per zone.</td>\n    <td>200 Snippets per zone*<br>(Customers can speak with their Customer Success team to have this increased).</td>\n  </tr>\n</tbody>\n</table><!--kg-card-end: html--><p>Cloudflare Snippets are lightweight when compared with Workers, offering 5ms maximum execution time, 2MB maximum memory and 32KB total package size. This comparably small footprint allows us to offer this to 99% of users at no additional cost, whilst also being sufficient for the identified use cases like HTTP header modification, URL rewriting and traffic routing - all of which don&#39;t need the vast resources offered by Cloudflare Workers.</p><!--kg-card-begin: html--><table>\n<thead>\n  <tr>\n    <th></th>\n    <th>Cloudflare Snippets</th>\n    <th>Cloudflare Workers Unbound<br>(For comparison)</th>\n  </tr>\n</thead>\n<tbody>\n  <tr>\n    <td>Runtime support</td>\n    <td>JavaScript</td>\n    <td>JavaScript and WASM</td>\n  </tr>\n  <tr>\n    <td>Execution location</td>\n    <td>Global - All Cloudflare locations</td>\n    <td>Global - All Cloudflare locations</td>\n  </tr>\n  <tr>\n    <td>Triggers supported</td>\n    <td>Ruleset Engine Filters</td>\n    <td>HTTP Request<br>HTTP Response<br>Cron Triggers</td>\n  </tr>\n  <tr>\n    <td>Maximum execution time</td>\n    <td>5ms</td>\n    <td>30 Seconds HTTP<br>15 Minutes (Cron Trigger)</td>\n  </tr>\n  <tr>\n    <td>Maximum memory</td>\n    <td>2MB</td>\n    <td>128MB</td>\n  </tr>\n  <tr>\n    <td>Total package size</td>\n    <td>32KB</td>\n    <td>5MB</td>\n  </tr>\n  <tr>\n    <td>Environment variables</td>\n    <td>8/Snippet</td>\n    <td>64/Worker</td>\n  </tr>\n  <tr>\n    <td>Environment variable size</td>\n    <td>1KB</td>\n    <td>5KB</td>\n  </tr>\n  <tr>\n    <td>Subrequests</td>\n    <td>1/request</td>\n    <td>1000/request</td>\n  </tr>\n  <tr>\n    <td>Terraform Support</td>\n    <td>✅</td>\n    <td>✅</td>\n  </tr>\n  <tr>\n    <td>Wrangler Support</td>\n    <td></td>\n    <td>✅</td>\n  </tr>\n  <tr>\n    <td>Cron Triggers</td>\n    <td></td>\n    <td>✅</td>\n  </tr>\n  <tr>\n    <td>Key Value Store</td>\n    <td></td>\n    <td>✅</td>\n  </tr>\n  <tr>\n    <td>Durable Objects</td>\n    <td></td>\n    <td>✅</td>\n  </tr>\n  <tr>\n    <td>R2 Integration</td>\n    <td></td>\n    <td>✅</td>\n  </tr>\n</tbody>\n</table><!--kg-card-end: html-->\n          <div class=\"flex anchor relative\">\n            <h2 id=\"what-will-you-be-able-to-build-with-cloudflare-snippets\">What will you be able to build with Cloudflare Snippets?</h2>\n            <a href=\"#what-will-you-be-able-to-build-with-cloudflare-snippets\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>Snippets will allow customers to migrate their existing workloads to Cloudflare. They will also open up a number of new possible use cases for customers. We have highlighted three common examples below, however there are many more to choose from.</p>\n          <div class=\"flex anchor relative\">\n            <h3 id=\"example-1-sending-suspect-bots-to-a-honeypot\">Example 1: Sending suspect bots to a honeypot</h3>\n            <a href=\"#example-1-sending-suspect-bots-to-a-honeypot\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n        <p>When creating Snippets customers will be able to access Cloudflare <a href=\"https://developers.cloudflare.com/workers/runtime-apis/request/\">features</a> available in the Workers runtime, such as the bot score field. This enables customers to forward an HTTP request to a honeypot or use the RegExp Javascript function to change the URL construct being sent back to the end user when traffic is assigned a bot score below a certain threshold, e.g. <a href=\"https://developers.cloudflare.com/bots/concepts/bot-score/#:~:text=A%20bot%20score%20is%20a,request%20came%20from%20a%20human.\">29 and lower</a>.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">…\nif (request.cf.botManagement.score &lt; 30) {\nconst honeypot = &quot;https://example.com/&quot;;\nreturn await fetch(honeypot, request);\n…\n}</pre></code>\n            \n          <div class=\"flex anchor relative\">\n            <h3 id=\"example-2-cookie-modification\">Example 2: Cookie modification</h3>\n            <a href=\"#example-2-cookie-modification\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n        <p>Another common use case we foresee Snippets addressing is cookie modification. Usage can range from simply setting an expiry in five minutes by using <code>getTime</code> and <code>setTime</code> JavaScript functions to setting a dynamic cookie based on user request attributes for A/B testing purposes.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">…\n{\nlet res = await fetch(request);\nres = new Response(res.body, res);\n// 24h * 60m * 60s * 1000ms = 86400000ms\nconst expiry = new Date(Date.now() + 7 * 86400000).toUTCString();\nconst group = request.headers.get(&quot;userGroup&quot;) == &quot;premium&quot; ? &quot;A&quot; : &quot;B&quot;;\nres.headers.append(\n      &quot;Set-Cookie&quot;,\n`testGroup=${group}; Expires=${expiry}; path=/`\n    );\n…</pre></code>\n            \n          <div class=\"flex anchor relative\">\n            <h3 id=\"example-3-uri-query-management\">Example 3: URI query management</h3>\n            <a href=\"#example-3-uri-query-management\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n        <p>Customers can also deploy Cloudflare Snippets to do complex operations such as splicing the URI query value to selectively remove or inject additional parameters. Query string manipulation is typically done using Transform Rules. However, with Transform Rules the <code>set/</code> action is effectively a <code>replace</code> action. This action when applied to the URI query string will remove the entire value if there is one and set it to what the user specifies, thus overwriting it. This is a problem for customers who wish to selectively inject specific query parameters for matching traffic. For example,  setting an additional query, e.g. <code>?utm_campaign=facebook</code> when common social media platforms are detected in the user agent. With Snippets, customers will be able to do this selective removal and insertion using a simple piece of JavaScript, e.g.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">…\nif (userAgent.includes(&quot;Facebook&quot;)) {\n      const url = new URL(request.url);\n      const params = new URLSearchParams(url.search);\n      params.set(&quot;utm_campaign&quot;, &quot;facebook&quot;);\n      url.search = params.toString();\n      const transformedRequest = new Request(url, request)\n…\n}</pre></code>\n            <p>We are excited to see what other use cases Cloudflare Snippets unlock for our customers.</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"will-you-stop-adding-actions-to-rulesets\">Will you stop adding actions to rulesets?</h2>\n            <a href=\"#will-you-stop-adding-actions-to-rulesets\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>The simple answer is no! We will continue to build out our no-code actions within the ruleset engine, developing new products to solve customer needs.</p><p>It may sound obvious - but a core component to feature improvement is talking to customers. Talking to Snippet users will help us understand what real life use cases Snippets help solve and highlight feature gaps we have in our product suite. We can then review if it makes sense to productise that use case, or leave it requiring Snippets.</p><p>We also understand that not everyone is a software developer. We are therefore exploring how we can make Snippets accessible to all by creating selectable templates available in a library that can be copied and modified by customers, with minimum coding knowledge required. With Snippets, powerful won’t mean difficult.</p>\n          <div class=\"flex anchor relative\">\n            <h2 id=\"accessing-cloudflare-snippets\">Accessing Cloudflare Snippets</h2>\n            <a href=\"#accessing-cloudflare-snippets\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n            </a>\n          </div>\n          <p>Snippets are currently under development — you can sign up <a href=\"https://www.cloudflare.com/lp/cloudflare-snippets/\">here</a> to join the waitlist for access.</p><p>We hope to begin admitting users into the closed beta in early 2023, with an open beta to follow.</p>",
		"id": "zV6omBtZzUdVJucURgijz",
		"localeList": {
			"name": "The most programmable Supercloud with Cloudflare Snippets Config",
			"enUS": "English for Locale",
			"zhCN": "Translated for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "Translated for Locale",
			"frFR": "Translated for Locale",
			"deDE": "Translated for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "Translated for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "Translated for Locale",
			"esLA": "No Page for Locale",
			"esES": "Translated for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "Today we are announcing Cloudflare Snippets. Snippets are a simple way of executing a small piece of Javascript on select HTTP requests, using the ruleset engine filtering logic.",
		"metadata": {
			"title": "The most programmable Supercloud with Cloudflare Snippets",
			"description": "Today we are announcing Cloudflare Snippets. Snippets are a simple way of executing a small piece of Javascript on select HTTP requests, using the ruleset engine filtering logic.",
			"imgPreview": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3VtcQpUkz2iEox66ahQQVd/61ea26ae66bbb412ed5aba3e808af35b/snippets-announcement-uuLClj.png"
		},
		"primary_author": {},
		"published_at": "2022-11-17T14:00:00.000+00:00",
		"slug": "snippets-announcement",
		"tags": [
			{
				"id": "2xCnBweKwOI3VXdYsGVbMe",
				"name": "Developer Week",
				"slug": "developer-week"
			},
			{
				"id": "4eBircwQ1VIos6rC8wgALG",
				"name": "Snippets",
				"slug": "snippets"
			},
			{
				"id": "78aSAeMjGNmCuetQ7B4OgU",
				"name": "JavaScript",
				"slug": "javascript"
			}
		],
		"title": "The most programmable Supercloud with Cloudflare Snippets",
		"updated_at": "2024-10-09T23:21:12.171Z",
		"url": "https://blog.cloudflare.com/snippets-announcement"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}