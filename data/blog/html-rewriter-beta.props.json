{
	"initialReadingTime": "3",
	"locale": "en-us",
	"localesAvailable": [
		"zh-cn",
		"fr-fr",
		"de-de",
		"ja-jp",
		"es-es"
	],
	"post": {
		"authors": [
			{
				"name": "Rita Kozlov",
				"slug": "rita",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/56u5zfWi9255rUocOgksl0/a6a42861fcb316349fbca745c649bd97/rita.png",
				"location": null,
				"website": null,
				"twitter": "@ritakozlov_",
				"facebook": null
			}
		],
		"excerpt": "Today, we’re excited to announce HTMLRewriter beta — a streaming HTML parser with an easy to use selector based JavaScript API for DOM manipulation, available in the Cloudflare Workers runtime.",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/3pJBHLvxZFAZf57LzN8f3G/35e8cfdaa59f891d631fbdce49e27b6c/html-rewriter-beta.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card kg-width-wide\">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/30jGjkwD5AYnBTg1FWO3Up/c7b2485a2615fe1118059ca8fae9fffa/HTML-rewrriter-beta_2x-1.png\" alt=\"\" class=\"kg-image\" width=\"3111\" height=\"1594\" loading=\"lazy\"/>\n            \n            </figure><p>Today, we’re excited to announce HTMLRewriter beta — a streaming HTML parser with an easy to use selector based JavaScript API for DOM manipulation, available in the Cloudflare Workers runtime.</p><p>For those of you who are unfamiliar, <a href=\"https://workers.cloudflare.com\">Cloudflare Workers</a> is a lightweight serverless platform that allows developers to leverage Cloudflare’s network to augment existing applications or create entirely new ones without configuring or maintaining infrastructure.</p><h2>Static Sites to Dynamic Applications</h2><p>On Friday we announced <a href=\"https://workers.cloudflare.com/sites\">Workers Sites</a>: a static site deployment workflow built into the <a href=\"https://github.com/cloudflare/wrangler\">Wrangler</a> CLI tool. Now, paired with the HTML Rewriter API, you can perform DOM transformations on top of your static HTML, right on the Cloudflare edge.</p><p>You could previously do this by ingesting the entire body of the response into the Worker, however, that method was prone to introducing a few issues. First, parsing a large file was bound to run into memory or CPU limits. Additionally, it would impact your TTFB as the body could no longer be streamed, and the browser would be prevented from doing any speculative parsing to load subsequent assets.</p><p>HTMLRewriter was the missing piece to having your application fully live on the edge – soup to nuts. You can <a href=\"https://developers.cloudflare.com/workers/tutorials/build-a-serverless-function/\">build your API</a> on Cloudflare Workers as a serverless function, have the static elements of your frontend hosted on <a href=\"https://workers.cloudflare.com/sites\">Workers Sites</a>, and dynamically tie them together using the HTMLRewriter API.</p><h2>Enter JAMStack</h2><p>You may be thinking “wait!”, JavaScript, serverless APIs… this is starting to sound a little familiar. It sounded familiar to us too.</p><blockquote><p><a href=\"https://t.co/1yWAxV6KMK\">pic.twitter.com/1yWAxV6KMK</a></p><p>— steveklabnik (@steveklabnik) <a href=\"https://twitter.com/steveklabnik/status/1177615137588568065?ref_src=twsrc%5Etfw\">September 27, 2019</a></p></blockquote><p>Is this JAMStack?</p><p>First, let’s answer the question — what is JAMStack? JAMStack is a term coined by Mathias Biilmann, that stands for JavaScript, APIs, and Markup. JAMStack applications are intended to be very easy to scale since they rely on simplified static site deployment. They are also intended to simplify the web development workflow, especially for frontend developers, by bringing data manipulation and rendering that traditionally happened on the backend to the front-end and interacting with the backend only via API calls.</p><p>So to that extent, yes, this is JAMStack. However, HTMLRewriter takes this idea one step further.</p><h2>The Edge: Not Quite Client, Not Quite Server</h2><p>Most JAMStack applications rely on client-side calls to third-party APIs, where the rendering can be handled client-side using JavaScript, allowing front end developers to work with toolchains and languages they are already familiar with. However, this means with every page load the client has to go to the origin, wait for HTML and JS, and then after being parsed and loaded make multiple calls to APIs. Additionally, all of this happens on client-side devices which are inevitably less powerful machines than servers and have potentially flaky last-mile connections.</p><p>With HTMLRewriter in Workers, you can make those API calls from the edge, where failures are significantly less likely than on client device connections, and results can often be cached. Better yet, you can write the APIs themselves in Workers and can incorporate the results directly into the HTML — all on the same powerful edge machine. Using these machines to perform “edge-side rendering” with HTMLRewriter always happens as close as possible to your end users, without happening on the device itself, and it eliminates the latency of traveling all the way to the origin.</p><h2>What does the HTMLRewriter API look like?</h2><p>The <code>HTMLRewriter</code> class is a jQuery-like experience directly inside of your Workers application, allowing developers to build deeply functional applications, leaning on a powerful JavaScript API to parse and transform HTML.</p><p>Below is an example of how you can use the HTMLRewriter to rewrite links on a webpage from HTTP to HTTPS.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">const REWRITER = new HTMLRewriter()\n    .on(&#039;a.avatar&#039;, { element:  e =&gt; rewriteUrl(e, &#039;href&#039;) })\n    .on(&#039;img&#039;, { element: e =&gt; rewriteUrl(e, &#039;src&#039;) });\n\nasync function handleRequest(req) {\n  const res = await fetch(req);\n  return REWRITER.transform(res);\n}</pre></code>\n            <p>In the example above, we create a new instance of HTMLRewriter, and use the selector to find all instances of <code>a</code> and <code>img</code> elements, and call the <code>rewriteURL</code> function on the <code>href</code> and <code>src</code> properties respectively.</p><p><b>Internationalization and localization tutorial:</b> If you’d like to take things further, we have a <a href=\"https://developers.cloudflare.com/workers/tutorials/localize-a-website/\">full tutorial</a> on how to make your application i18n friendly using HTMLRewriter.</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/6Hx5zCalSwUhO7RfpEy6v/9b58fe7068d0016645f5f742db8ee604/i18n-htmlrewriter.jpg\" alt=\"\" class=\"kg-image\" width=\"1280\" height=\"779\" loading=\"lazy\"/>\n            \n            </figure><h2>Getting started</h2><p>If you’re already using Cloudflare Workers, you can simply get started with the HTMLRewriter by consulting our <a href=\"https://developers.cloudflare.com/workers/reference/apis/html-rewriter/\">documentation</a> (no sign up or anything else required!). If you’re new to Cloudflare Workers, we recommend starting out by signing up <a href=\"https://workers.cloudflare.com/sign-up\">here</a>.</p><p>If you’re interested in the nitty, gritty details of how the HTMLRewriter works, and learning more than you’ve ever wanted to know about parsing the DOM, stay tuned. We’re excited to share the details with you in a future post.</p><p>One last thing, you are not limited to Workers Sites only. Since Cloudflare Workers can be deployed as a proxy in front of any application you can use the HTMLRewriter as an elegant way to augment your existing site, and easily add dynamic elements, regardless of backend.</p><h2>We love to hear from you!</h2><p>We’re always iterating and working to improve our product based on customer feedback! Please help us out by <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSffHlmO_4iyvDU6KbPLpZ820gZBymIlbjq6KL-oZCC97cCnTw/viewform?usp=sf_link\">filling out our survey</a> about your experience.</p><hr/><p><i>Have you built something interesting with Workers? Let us know </i><a href=\"https://twitter.com/CloudflareDev/\"><i>@CloudflareDev</i></a><i>!</i></p>",
		"id": "1YcG6S2gcpqVDtNgyAv1Kb",
		"localeList": {
			"name": "Not so static... Introducing the HTMLRewriter API Beta to Cloudflare Workers Config",
			"enUS": "English for Locale",
			"zhCN": "Translated for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "Translated for Locale",
			"deDE": "Translated for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "Translated for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "Translated for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": null,
		"metadata": {
			"imgPreview": ""
		},
		"primary_author": {},
		"published_at": "2019-09-30T18:00:00.000+01:00",
		"slug": "html-rewriter-beta",
		"tags": [
			{
				"id": "5cye1Bh5KxFh3pKSnX8Dsy",
				"name": "Serverless",
				"slug": "serverless"
			},
			{
				"id": "6hbkItfupogJP3aRDAq6v8",
				"name": "Cloudflare Workers",
				"slug": "workers"
			},
			{
				"id": "7aYB1Ci6SHWaelke8YAibN",
				"name": "Workers Sites",
				"slug": "workers-sites"
			},
			{
				"id": "4HIPcb68qM0e26fIxyfzwQ",
				"name": "Developers",
				"slug": "developers"
			},
			{
				"id": "3JAY3z7p7An94s6ScuSQPf",
				"name": "Developer Platform",
				"slug": "developer-platform"
			}
		],
		"title": "Not so static... Introducing the HTMLRewriter API Beta to Cloudflare Workers",
		"updated_at": "2024-08-27T02:08:40.869Z",
		"url": "https://blog.cloudflare.com/html-rewriter-beta"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.blurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}