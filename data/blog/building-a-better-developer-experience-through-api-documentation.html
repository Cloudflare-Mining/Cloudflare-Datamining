<div class="mb2 gray5">6 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image4-18.png" class="kg-image" alt="Building a better developer experience through API documentation" loading="lazy"></figure>
	<p>We’re excited to share that the next iteration of <a href="https://developers.cloudflare.com/api" target="_blank">Cloudflare’s API reference documentation</a> is now available. The new docs standardize our API content and improve the overall developer experience for interacting with Cloudflare’s API.</p>
	<h3 id="why-does-api-documentation-matter">Why does API documentation matter?</h3>
	<p>Everyone talks about how important APIs are, but not everyone acknowledges the critical role that API documentation plays in an API’s usability. Throwing docs together is easy. Getting them right is harder.</p>
	<p>At Cloudflare, we try to meet our users where they are. For the majority of customers, that means providing clear, easy-to-use products in our dashboard. But developers don’t always want what our dashboard provides. Some developers prefer to use a CLI or Wrangler to have a higher level of control over what’s happening with their Cloudflare products. Others want more customization and deeper ties into their company’s internal applications. Some want all the above.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image5-9.png" class="kg-image" alt="Illustration of a developer in front of a laptop with the Cloudflare lava lamp." loading="lazy"></figure>
	<p>A developer’s job is to create, debug, and optimize code - whether that’s an application, interface, database, etc. - as efficiently as possible and ensure that code runs as efficiently as possible. <a href="https://www.cloudflare.com/learning/security/api/what-is-an-api" target="_blank">APIs</a> enable that efficiency through automation. Let’s say a developer wants to run a cache purge every time content is updated on their website. They could use Cloudflare’s dashboard to enable cache purge, but they might want it to happen automatically instead. Enter Cloudflare’s API.</p>
	<p>In the same way that the Cloudflare dashboard is an interface for humans, an API is an interface for computers. For a computer to execute on instructions, there is no room for interpretation. The instructions, formatted as requests, have to follow a specific set of rules and include certain requirements. API documentation details what those rules and requirements are.</p>
	<p>It’s a frustrating experience for developers when you’re in the details of a complex project and can’t troubleshoot an error because the docs aren’t comprehensive or don’t load. Unfortunately, that’s been the reality for developers using Cloudflare’s API. Figuring out how to use Cloudflare’s API was a “choose your own adventure” story for the Cloudflare users who made 126 million visits monthly to our API documentation. If the APIs you needed were fully documented, you encountered long page load times and a site that couldn’t render on mobile.</p>
	<p>From a technical standpoint, we were using api.cloudflare.com for both the API documentation site and the Cloudflare API access point, which is awkward. We needed a more sustainable way for internal teams to create and document their APIs according to an accepted standard.</p>
	<h3 id="building-a-better-developer-experience-for-our-apis">Building a better developer experience for our APIs</h3>
	<p>Like with all of our documentation projects at Cloudflare, we started by thinking about the user’s workflow - in this case, a developer’s workflow as they’re getting started with the Cloudflare API.</p>
	<p><strong>Providing docs on mobile</strong><br>We know developers research products before diving into projects, usually exploring API documentation before writing any code. That means making docs available on mobile for working on the go. Check.</p>
	<p><strong>Improving the navigation</strong><br>As a developer, at the point you’re looking at API docs, you generally have an idea of what you want to use the API for. Our goal with the new API docs is to make it as easy as possible for you to find the information you need. We recognize that endpoints are organized a bit haphazardly in the current API docs. To address that clunkiness, we’ve grouped endpoints by product or setting and alphabetized that list on the new site, making it easier to navigate and find what you’re looking for. And while this may seem like a small thing, you now can use a keyboard shortcut to search the page.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image6-6.png" class="kg-image" alt="Screen capture of the new API documentation site on mobile, showing the alphabetized list of endpoints." loading="lazy"></figure>
	<p><strong>Clarifying authentication</strong><br>Once developers start writing code, you first have to handle authentication to start using the API. Authentication information is now readily available for every endpoint, and we link to the <a href="https://developers.cloudflare.com/fundamentals/api/get-started" target="_blank">full developer docs about authentication</a> from the API overview page.</p>
	<p><strong>Adding examples</strong><br>Good API docs have clear descriptions, but the best API docs share templates and examples to minimize a developer’s friction to deploying code. Every endpoint now includes an example and clearly indicates which parameters are required, removing yet another decision developers have to make when working with our API.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image2-34.png" class="kg-image" alt="Screen capture of new API documentation site, showing List Members endpoint with authentication information, required parameters, and examples." loading="lazy"></figure>
	<p><strong>Gathering feedback and iterating</strong><br>As we implemented all of these improvements, we kept some of our biggest users - our internal developers - informed along the way. We shared the test site early and often to get internal feedback, which caught bugs and helped us refine the site’s usability. The Discord and Community MVPs also volunteered to test the site, giving us valuable outside perspective on what we built. We incorporated all of that feedback to provide a vetted, deliberate UX at launch.</p>
	<h3 id="how-we-built-this">How we built this</h3>
	<p>Since this week is all about what you can build on our developer platform, we wanted to share the details about how this all works under the hood (hint: it’s mostly Workers).</p>
	<p>We used a combination of open-source tools and Cloudflare products to revamp the API doc site. Previously the content on api.cloudflare.com was sourced from the JSON hyper-schema files that described our APIs, but over the years we repeatedly heard that published schemas would help you better integrate with Cloudflare. Several Cloudflare engineering teams started adopting the <a href="https://www.openapis.org" target="_blank">OpenAPI specification</a>, and with a little research, planning, and testing, we pivoted from those JSON hyper-schemas to the OpenAPI framework. Check out the blog post about our <a href="https://blog.cloudflare.com/open-api-transition">Transition to OpenAPI</a> for more details.</p>
	<p>Because the OpenAPI specification defines how to describe APIs, our schema files now have consistency - not just among the various products, but also with an industry-accepted standard. Hundreds of documentation and code generation tools exist to pull from that standard, which means we have options that weren’t available for our homegrown JSON hyper-schemas.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image3-25.png" class="kg-image" alt="Reference architecture for the new API documentation site." loading="lazy"></figure>
	<p>We chose <a href="https://github.com/stoplightio/elements" target="_blank">Stoplight Elements</a>, an open-source React framework, for our site design because it has a clean layout and is easily customizable. While there are a number of both dynamic and static tools for parsing OpenAPI schemas and rendering documentation sites, we chose React because of its ubiquity, performance, and because it plays well with Cloudflare Pages, our deployment tool of choice. Within Stoplight you can generate code samples for a variety of &nbsp;programming languages, like JavaScript, Java, and Python, as well as for tools like cURL, HTTPie, and wget.</p>
	<p>We build and deploy the React application with <a href="https://pages.cloudflare.com" target="_blank">Cloudflare Pages</a>, and using <a href="https://developers.cloudflare.com/pages/platform/functions" target="_blank">Pages functions</a>, we optimize the OpenAPI schema file for Stoplight’s UI and cache it on Cloudflare’s network, reducing the latency needed to request the schema. Whenever teams add new API endpoints or definitions to the schema, we just update the schema file in GitHub. Because our API documentation loads the schema dynamically, this means we don’t have to wait for Cloudflare Pages to deploy a new version of the documentation site. The automation helps us ensure that everything we expose in the API is documented without manual interaction. Deploying with Pages gives us yet another opportunity to test our own products out on ourselves, helping us find areas for improvement that we turn around and pass along to you.</p>
	<h3 id="looking-ahead">Looking ahead</h3>
	<p>Moving our schemas to the OpenAPI specification allows us to use ready-to-go tools like Stoplight, but we’re just getting started. Soon we’ll be adding search functionality, letting you access all relevant information across developer, API, and support docs. The mobile experience will evolve, providing an even cleaner way to read API content when you’re on your phone. We’ll also add a “try it out” functionality to test out your requests right in the browser before writing your own code.</p>
	<p>Over time, we want an even tighter integration between the API reference documentation, our how-to content in developer docs, and the Cloudflare dashboard. The standardized structure we get with the OpenAPI spec sets us up to reuse the schema files across our client libraries, Terraform, <a href="https://www.cloudflare.com/learning/security/api/what-is-an-api-gateway" target="_blank">API gateway</a>, and Trakal. The consistency across API descriptions makes it easier for us to do things like localize API content, customize out-of-the-box documentation generation tools, and continue innovating like we always do.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image1-41.png" class="kg-image" alt="How we treat content as a product" loading="lazy"></figure>
	<h3 id="we-want-to-hear-from-you-">We want to hear from you!</h3>
	<p>As you’re using the new <a href="https://developers.cloudflare.com/api" target="_blank">API doc site</a>, send us your <a href="https://docs.google.com/forms/d/e/1FAIpQLSfu46XUqWbabzDOhkIn5XCu7Wqufng_ouC4QB3qxScPge1ttA/viewform" target="_blank">feedback</a> and let us know if there are any feature improvements you’d like to see in the future. We want the site to be as useful as possible for your day-to-day interactions with Cloudflare’s API. We hope the improvements to our API doc experience will help you seamlessly use our API and efficiently deploy and maintain your Cloudflare products.</p>
	<p>Thanks for your patience and perspective as we iterate on the API docs!</p>
</div>