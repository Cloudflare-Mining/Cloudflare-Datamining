<div class="mb2 gray5">6 min read</div>
<div class="mt4">This post is also available in <a href="https://blog.cloudflare.com/zh-cn/introducing-d1">简体中文</a>, <a href="https://blog.cloudflare.com/fr-fr/introducing-d1">Français</a>, <a href="https://blog.cloudflare.com/de-de/introducing-d1">Deutsch</a>, <a href="https://blog.cloudflare.com/ja-jp/introducing-d1">日本語</a>, <a href="https://blog.cloudflare.com/es-es/introducing-d1">Español</a> and <a href="https://blog.cloudflare.com/zh-tw/introducing-d1">繁體中文</a>.</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/1CcMpQn5JUAxQK64qZT2n5/ea03da5edd2dda24e66dd8f61ed902ea/image1-23.png" alt="Announcing D1: Our first SQL database" class="kg-image" width="1801" height="1013" loading="lazy">

	</figure>
	<p>We <a href="https://blog.cloudflare.com/introducing-cloudflare-workers">announced</a> Cloudflare Workers in 2017, giving developers access to compute on our network. We were excited about the possibilities this unlocked, but we quickly realized — most real world applications are stateful. Since then, we’ve delivered <a href="https://www.cloudflare.com/developer-platform/workers-kv">KV</a>, <a href="https://www.cloudflare.com/developer-platform/durable-objects">Durable Objects</a>, and <a href="https://www.cloudflare.com/developer-platform/r2">R2</a>, giving developers access to various types of storage.</p>
	<p>Today, we're excited to announce D1, our first SQL database.</p>
	<p>While the wait on beta access shouldn’t be long — we’ll start letting folks in as early as June (<a href="https://www.cloudflare.com/lp/d1">sign up here</a>), we’re excited to share some details of what’s to come.</p>
	<h2>Meet D1, the database designed for Cloudflare Workers</h2>
	<p>D1 is built on SQLite. Not only is SQLite the most ubiquitous database in the world, used by billions of devices a day, it’s also the first ever <i>serverless</i> database. Surprised? SQLite was so ahead of its time, it dubbed itself “<a href="https://www.cloudflare.com/learning/serverless/what-is-serverless">serverless</a>” before the term gained connotation with cloud services, and originally meant literally “not involving a server”.</p>
	<p>Since Workers itself runs between the server and the client, and was inspired by technology built for the client, SQLite seemed like the perfect fit for our first entry into databases.</p>
	<p>So what can you build with D1? The true answer is “almost anything!”, that might not be very helpful in triggering the imagination, so how about a live demo?</p>
	<h2>D1 Demo: Northwind Traders</h2>
	<p>You can check out an example of D1 in action by trying out our demo running here: <a href="https://northwind.d1sql.com">northwind.d1sql.com</a>.</p>
	<p>If you’re wondering “Who are Northwind Traders?”, Northwind Traders is the “Hello, World!” of databases, if you will. A sample database that Microsoft would provide alongside Microsoft Access to use as their own tutorial. It first appeared 25 years ago in 1997, and you’ll find many examples of its use on the Internet.</p>
	<p>It’s a typical business application, with a realistic schema, with many foreign keys, across many different tables — a truly timeless representation of data.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/6rze39GwPcbi7rkFaoKTi4/bc2f2fd572fb4ccfd3c59d07f23bea63/image3-13.png" alt="" class="kg-image" width="1999" height="1314" loading="lazy">

	</figure>
	<p>When was the recent order of Queso Cabrales shipped, and what ship was it on? You can quickly find out. Someone calling in about ordering some Chai? Good thing Exotic Liquids still has 39 units in stock, for just \$18 each.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/5ytvt3wgKWXkTkp8aMDMDx/8d02285441da9cde392d561b4c7b5c4c/image2-14.png" alt="" class="kg-image" width="1999" height="1314" loading="lazy">

	</figure>
	<p>We welcome you to play and poke around, and answer any questions you have about Northwind Trading’s business.</p>
	<p>The Northwind Traders demo also features a dashboard where you can find details and metrics about the D1 SQL queries happening behind the scenes.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/7r5YpPnZLYMbqwJDW5v38Y/3ff4d25eefdc6dd20e8a6e12d4349689/image5-5.png" alt="" class="kg-image" width="1999" height="1503" loading="lazy">

	</figure>
	<h2>What can you build with D1?</h2>
	<p>Going back to our original question before the demo, however, what can you build with D1?</p>
	<p>While you may not be running Northwind Traders yourself, you’re likely running a very similar piece of software somewhere. Even at the very core of Cloudflare’s service is a database. A SQL database filled with tables, materialized views and a plethora of stored procedures. Every time a customer interacts with our dashboard they end up changing state in that database.</p>
	<p>The reality is that databases are everywhere. They are inside the web browser you’re reading this on, inside every app on your phone, and the storage for your bank transaction, travel reservations, business applications, and on and on. Our goal with D1 is to help you build anything from APIs to rich and powerful applications, including <a href="https://www.cloudflare.com/ecommerce">eCommerce sites</a>, accounting software, <a href="https://www.cloudflare.com/saas">SaaS solutions</a>, and CRMs.</p>
	<p>You can even combine D1 with <a href="https://www.cloudflare.com/zero-trust/products/access">Cloudflare Access</a> and create internal dashboards and admin tools that are securely locked to only the people in your organization. The world, truly, is your oyster.</p>
	<h2>The D1 developer experience</h2>
	<p>We’ll talk about the capabilities, and upcoming features further down in the post, but at the core of it, the strength of D1 is the developer experience: allowing you to go from nothing to a full stack application in an instant. Think back to a tool you’ve used that made development feel magical — that’s exactly what we want developing with Workers and D1 to feel like.</p>
	<p>To give you a sense of it, here’s what getting started with D1 will look like.</p>
	<h3>Creating your first D1 database</h3>
	<p>With D1, you will be able to create a database, in just a few clicks — define the tables, insert or upload some data, no need to memorize any commands unless you need to.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/2T8rfy6OTt9UbegCxnLFWD/0f50ca407c330a46499cd87e87ede3af/image4-10.png" alt="" class="kg-image" width="1999" height="1143" loading="lazy">

	</figure>
	<p>Of course, if the command-line is your jam, earlier this week, we announced <a href="https://blog.cloudflare.com/10-things-i-love-about-wrangler">the new and improved Wrangler 2</a>, the best tool for wrangling and deploying your Workers, and soon also your tool for deploying D1. Wrangler will also come with native D1 support, so you can create &amp; manage databases with a few simple commands:</p><!--kg-card-begin: html-->
	<div style="position: relative; padding-top: 60.42084168336673%;"><iframe src="https://iframe.videodelivery.net/6bc08db0ee3524778effb6af3cbbf90f?preload=true&amp;poster=https%3A%2F%2Fvideodelivery.net%2F6bc08db0ee3524778effb6af3cbbf90f%2Fthumbnails%2Fthumbnail.jpg%3Ftime%3D9s%26height%3D600" style="border: none; position: absolute; top: 0; left: 0; height: 100%; width: 100%;" allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;" allowfullscreen="true"></iframe></div>
	<p></p><!--kg-card-end: html-->
	<h3>Accessing D1 from your Worker</h3>
	<p>Attaching D1 to your Worker is as easy as creating a new binding. Each D1 database that you attach to your Worker gets attached with its own binding on the <code>env</code> parameter:</p>
	<pre class="language-js"><code class="language-js">export default {
  async fetch(request, env, ctx) {
    const { pathname } = new URL(request.url)
    if (pathname === '/num-products') {
      const { result } = await env.DB.get(`SELECT count(*) AS num_products FROM Product;`)
      return new Response(`There are ${result.num_products} products in the D1 database!`)
    }
  }
}</code></pre>
	<p>Or, for a slightly more complex example, you can safely pass parameters from the URL to the database using a Router and parameterised queries:</p>
	<pre class="language-js"><code class="language-js">import { Router } from 'itty-router';
const router = Router();

router.get('/product/:id', async ({ params }, env) =&gt; {
  const { result } = await env.DB.get(
    `SELECT * FROM Product WHERE ID = $id;`,
    { $id: params.id }
  )
  return new Response(JSON.stringify(result), {
    headers: {
      'content-type': 'application/json'
    }
  })
})

export default {
  fetch: router.handle,
}</code></pre>
	<h2>So what can you expect from D1?</h2>
	<p>First and foremost, we want you to be able to develop with D1, without having to worry about cost.</p>
	<p>At Cloudflare, we don’t believe in keeping your data hostage, so D1, like R2, will be free of egress charges. Our plan is to price D1 like we price our storage products by charging for the base storage plus database operations performed.</p>
	<p>But, again, we don’t want our customers worrying about the cost or what happens if their business takes off, and they need more storage or have more activity. We want you to be able to build applications as simple or complex as you can dream up. We will ensure that D1 costs less and performs better than comparable centralized solutions. The promise of serverless and a global network like Cloudflare’s is <a href="https://www.cloudflare.com/learning/performance/speed-up-a-website">performance</a> and <a href="https://www.cloudflare.com/plans">lower cost</a> driven by our architecture.</p>
	<p>Here’s a small preview of the features in D1.</p>
	<h3>Read replication</h3>
	<p>With D1, we want to make it easy to store your whole application's state in the one place, so you can perform arbitrary queries across the full data set. That’s what makes relational databases so powerful.</p>
	<p>However, we don’t think powerful should be synonymous with cumbersome. Most relational databases are huge, monolithic things and configuring replication isn't trivial, so in general, most systems are designed so that all reads and writes flow back to a single instance. D1 takes a different approach.</p>
	<p>With D1, we want to take configuration off your hands, and take advantage of Cloudflare's global network. D1 will create read-only clones of your data, close to where your users are, and constantly keep them up-to-date with changes.</p>
	<h3>Batching</h3>
	<p>Many operations in an application don't just generate a single query. If your logic is running in a Worker near your user, but each of these queries needs to execute on the database, then sending them across the wire one-by-one is extremely inefficient.</p>
	<p>D1’s API includes batching: anywhere you can send a single SQL statement you can also provide an array of them, meaning you only need a single HTTP round-trip to perform multiple operations. This is perfect for transactions that need to execute and commit atomically:</p>
	<pre class="language-js"><code class="language-js">async function recordPurchase(userId, productId, amount) { 
  const result = await env.DB.exec([
    [
      `UPDATE users SET balance = balance - $amount WHERE user_id = $user_id`,
      { $amount: amount, $user_id: userId },
    ],
    [
      'UPDATE product SET total_sales = total_sales + $amount WHERE product_id = $product_id',
      { $amount: amount, $product_id: productId },
    ],
  ])
  return result
}</code></pre>
	<h3>Embedded compute</h3>
	<p>But we're going further. With D1, it will be possible to define a chunk of your Worker code that runs directly next to the database, giving you total control and maximum performance—each request first hits your Worker near your users, but depending on the operation, can hand off to another Worker deployed alongside a replica or your primary D1 instance to complete its work.</p>
	<h3>Backups and redundancy</h3>
	<p>There are few things as critical as the data stored in your main application's database, so D1 will automatically save snapshots of your database to Cloudflare's cloud storage service, R2, at regular intervals, with a one-click restoration process. And, since we're building on the redundant storage of Durable Objects, your database can physically move locations as needed, resulting in self-healing from even the most catastrophic problems in seconds.</p>
	<h3>Importing and exporting data</h3>
	<p>While D1 already supports the SQLite API, making it easy for you to write your queries, you might also need data to run them on. If you’re not creating a brand-new application, you may want to import an existing dataset from another source or database, which is why we’ll be working on allowing you to bring your own data to D1.</p>
	<p>Likewise, one of SQLite’s advantages is its portability. If your application has a dedicated staging environment, say, you’ll be able to clone a snapshot of that data down to your local machine to develop against. And we’ll be adding more flexibility, such as the ability to create a new database with a set of test data for each new pull request on your Pages project.</p>
	<h2>What’s next?</h2>
	<p>This wouldn’t be a Cloudflare announcement if we didn’t conclude on “we’re just getting started!” — and it’s true! We are really excited about all the powerful possibilities our database on our global network opens up.</p>
	<p>Are you already thinking about what you’re going to build with D1 and Workers? Same. <a href="https://www.cloudflare.com/lp/d1">Give us your details</a>, and we’ll give you access as soon as we can — look out for a beta invite from us starting as early as June 2022!</p>
</div>