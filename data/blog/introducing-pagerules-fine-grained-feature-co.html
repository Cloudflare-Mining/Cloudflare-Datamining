<div class="mb2 gray5">2 min read</div><img class="mr2" src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6bWDEUemWyi7yOXg1xYvBU/2adca5511caf6e6af0f09570e68efdac/introducing-pagerules-fine-grained-feature-co.png" alt="">
<div class="post-content lh-copy gray1">
	<p></p>
	<p>CloudFlare is provisioned by DNS. That means that, from the beginning, you've been able to turn CloudFlare on or off on a subdomain level. From the CloudFlare DNS Manager, you can toggle the little clouds next to your subdomains orange (on) or gray (off) in order to control whether traffic for that subdomain will pass through CloudFlare's proxy.</p>
	<p>Often, however, users have wanted finer-grained control. For example, you may want to have a CloudFlare app like UserVoice added to your public-facing pages, but not appear on your private administrative areas of your website. Before today, that wasn't an option.</p>
	<div class="flex anchor relative">
		<h3 id="introducing-page-rules">Introducing Page Rules</h3>
		<a href="https://blog.cloudflare.com/#introducing-page-rules" aria-hidden="true" class="relative sm:absolute sm:-left-5">
			<svg width="16" height="16" viewBox="0 0 24 24">
				<path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path>
			</svg>
		</a>
	</div>
	<p>Page Rules is a powerful new set of tools that allows you to control how CloudFlare works on your site on a page-by-page basis. The feature provides many of the most popular controls of HTACCESS with a user-friendly interface. Page Rules are now available for all users from the Settings menu next to each domain on the My Websites page. Over the next few days we'll be posting some tutorials on the CloudFlare Blog on various ways you can use Page Rules, but I wanted to start with the example above: how to turn a <a href="https://www.cloudflare.com/apps">CloudFlare app</a> like UserVoice off on the administrative portion of your website.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/5LTm69sDiI1jAiwKVOC1sm/d7152f7cc3b507b634ff74e7c82bd0e6/page_rules_menu_highlighted.png.scaled500.png" alt="Introducing Page Rules: Fine Grained Control over CloudFlare's Features" class="kg-image" width="214" height="236" loading="lazy">

	</figure>
	<div class="flex anchor relative">
		<h3 id="using-page-rules-to-control-cloudflare-features-and-apps">Using Page Rules to Control CloudFlare Features and Apps</h3>
		<a href="https://blog.cloudflare.com/#using-page-rules-to-control-cloudflare-features-and-apps" aria-hidden="true" class="relative sm:absolute sm:-left-5">
			<svg width="16" height="16" viewBox="0 0 24 24">
				<path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path>
			</svg>
		</a>
	</div>
	<p>The first step to using Page Rules is to define a pattern that defines when the rule is triggered. These patterns can be simple, such as a single URL, or complicated including multiple wildcards. Imagine you have a content management system with a single administrative URL:</p>
	<ul>
		<li>
			<p><code>https://www.example.com/admin.php</code></p>
		</li>
	</ul>
	<p>If that is the only URL where you want <a href="https://www.cloudflare.com/apps">CloudFlare Apps</a> to be turned off, you can enter it in exactly that form as a new pattern. Then, below the pattern, toggle the "Apps" setting to "Off." It's as simple as that.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/2XxkZRlVkPF0IUSWK3XT6z/fd8bff9a9e492c0b99d43219598a5883/new_page_rule.png.scaled500.png" alt="Introducing Page Rules: Fine Grained Control over CloudFlare's Features" class="kg-image" width="500" height="83" loading="lazy">

	</figure>
	<div class="flex anchor relative">
		<h3 id="wildcard-and-advanced-pattern-matching">Wildcard and Advanced Pattern Matching</h3>
		<a href="https://blog.cloudflare.com/#wildcard-and-advanced-pattern-matching" aria-hidden="true" class="relative sm:absolute sm:-left-5">
			<svg width="16" height="16" viewBox="0 0 24 24">
				<path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path>
			</svg>
		</a>
	</div>
	<p>The pattern above will only match the following URL:</p>
	<ul>
		<li>
			<p><code>https://www.example.com/admin.php</code></p>
		</li>
	</ul>
	<p>It will not match any of the following URLs:</p>
	<ul>
		<li>
			<p><code>http://www.example.com/admin.php</code> <i>[http ≠ https]</i></p>
		</li>
		<li>
			<p><code>https://example.com/admin.php</code> <i>[missing www subdomain]</i></p>
		</li>
		<li>
			<p><code>https://www.example.com/admin</code> <i>[admin ≠ admin.php]</i></p>
		</li>
	</ul>
	<p>You can make rules more flexible by including wildcards with the * character. For example, if you wanted the pattern to match all four of the above URLs, you could use a pattern like:</p>
	<ul>
		<li>
			<p><code>*example.com/admin*</code></p>
		</li>
	</ul>
	<p>A wildcard can represent <b>zero or more</b> characters and can be used anywhere in the pattern. So, for example, the following pattern:</p>
	<ul>
		<li>
			<p><code>https://www.example.com/*b*/*</code></p>
		</li>
	</ul>
	<p>Would match:</p>
	<ul>
		<li>
			<p><code>https://www.example.com/blog/</code></p>
		</li>
		<li>
			<p><code>https://www.example.com/blog/index.php</code></p>
		</li>
		<li>
			<p><code>https://www.example.com/b/admin/folder/index.php</code></p>
		</li>
		<li>
			<p><code>https://www.example.com/myblog/</code></p>
		</li>
	</ul>
	<p>But would not match:</p>
	<ul>
		<li>
			<p><code>https://www.example.com/blog</code> <i>[missing the trailing slash]</i></p>
		</li>
		<li>
			<p><code>https://www.example.com/sam/index.php</code> <i>[sam doesn't contain a "b"]</i></p>
		</li>
	</ul>
	<p>### Practical Example Many WordPress users want to disable CloudFlare Apps and performance features like Rocket Loader on their WordPress Admin panel while leaving them on for their public facing pages. To do this, for most default WordPress setups, you can now create a PageRule by defining the following rule:</p>
	<ul>
		<li>
			<p><code>*example.com/wp-admin*</code></p>
		</li>
	</ul>
	<p>Then toggle Apps and Performance to "off" then click the Add Rule button. As soon as the rule is in place, your WordPress admin pages will not have CloudFlare Apps like UserVoice included and will not be altered by features like Rocket Loader or AutoMinify.</p>
	<div class="flex anchor relative">
		<h3 id="non-trivial">Non-Trivial</h3>
		<a href="https://blog.cloudflare.com/#non-trivial" aria-hidden="true" class="relative sm:absolute sm:-left-5">
			<svg width="16" height="16" viewBox="0 0 24 24">
				<path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path>
			</svg>
		</a>
	</div>
	<p>Making this work at our scale is non-trivial. To make sure it is fast, when you create a rule, it is compiled into machine code and pushed out to the edge of our network within a couple seconds. Every rule needs then needs to be checked with every request. Given that, under normal load, we're now processing well over 50,000 requests per second, we needed to put some limits on the number of rules per user. Free accounts include three (3) Page Rules per domain. If you need more, you can upgrade to a Pro account which includes twenty (20) Page Rules per domain.</p>
	<p>Over the next few days, we'll be posting other powerful things you can do with Page Rules including how you can use it for advanced URL forwarding as well as ways that it can enable powerful new caching.</p>
</div>