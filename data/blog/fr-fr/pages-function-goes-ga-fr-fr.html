<div class="mb2 gray5">7 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image2-37.png" class="kg-image" alt="Spice up static sites on Cloudflare Pages with Page Functions" loading="lazy"></figure>
	<p>Avant le lancement de Pages en avril 2021, nous savions que cela serait le début de quelque chose de magique, une expérience qui semblait idéale. Nous l'envisagions simple et fluide au point que <em><strong>n'importe quel développeur</strong></em> pourrait mettre un site web en ligne en quelques secondes et y ajouter des éléments supplémentaires à l'aide du reste de notre écosystème Cloudflare.</p>
	<p>Quelques mois plus tard, lorsque nous avons annoncé que Pages devenait une plateforme full-stack en novembre 2021, cette idée s'est concrétisée. L'histoire de Pages n'allait pas s'arrêter avec la création d'une plateforme de développement pour des sites uniquement statiques et avec Cloudflare Workers faisant déjà partie de cet écosystème, nous savions que nous disposions là d'un potentiel inexploité. Avec la mise en place de Pages Functions, nous avons donné aux développeurs les moyens d'ajouter facilement à n'importe quel site statique du contenu dynamique avec la puissance de Cloudflare Workers.</p>
	<p>Au cours de l'année dernière, depuis que Functions existe en version Bêta ouverte, nous avons pu examiner avec plus de précision le type de capacités full-stack que les développeurs recherchent pour leurs projets et en tenir compte pour faire évoluer Functions jusqu'à sa forme actuelle.</p>
	<p><strong>Nous nous réjouissons d'annoncer la mise en disponibilité générale de Pages Functions !</strong></p>
	<h2 id="r-capitulatif-de-functions">Récapitulatif de Functions</h2>
	<p>Certes, dans le contexte de Pages, on parle de « Functions », mais ces fonctions qui s'exécutent sur le réseau Cloudflare sont en réalité une forme "déguisée" de Cloudflare Workers. Pages tire parti de la puissance et de l'évolutivité des Workers, qu'elle spécialise afin de s'aligner sur l'expérience des utilisateurs de Pages.</p>
	<p>Avec Functions, vous pouvez imaginer des possibilités de fonctionnalité dynamique à ajouter à votre site : intégration avec des solutions de stockage, connexion aux services d'un tiers, utilisation du rendu côté serveur avec vos infrastructures full-stack de prédilection et plus encore. Puisque Pages Functions s'ouvre au trafic de production, passons en revue certaines des fonctionnalités intéressantes que nous avons améliorées et ajoutées à cette version.</p>
	<h2 id="l-exp-rience">L'expérience</h2>
	<h3 id="d-ployez-avec-git">Déployez avec Git</h3>
	<p>Vous adorez coder ? Nous gérons l'infrastructure et vous faites reste.</p>
	<p>Écrivez simplement une Function JavaScript/Typescritp et déposez-la dans un répertoire de <strong>fonctions</strong> en soumettant votre code à votre fournisseur Git. Notre système CI compilera votre code et le déploiera aux côtés de vos ressources statiques.</p>
	<h3 id="t-l-chargez-directement-vos-functions">Téléchargez directement vos Functions</h3>
	<p>Vous préférez vous occuper vous-même de la compilation ? Votre fournisseur de git n'est pas encore pris en charge par Pages ? Aucun problème ! Après avoir déposé votre Function dans le dossier des <strong>fonctions</strong>, vous pouvez procéder à la compilation avec votre outil CI préféré, puis télécharger votre projet dans l'instance Pages pour le déploiement.</p>
	<h3 id="d-boguez-vos-functions">Déboguez vos Functions</h3>
	<p>Pendant la période de version Bêta, nous avons compris qu'avec vos équipes vous accordiez de la valeur à la visibilité avant toute chose. Comme pour Cloudflare Workers, nous avons prévu un moyen facile pour vous d'observer vos fonctions tandis qu'elles traitent vos requêtes ; plus vite vous prenez conscience d'un problème, plus vite vous pouvez réagir.</p>
	<p>Vous pouvez désormais facilement journaliser vos Functions en adaptant vos journaux. Pour des informations de base telles que le résultat ou l'IP de requête, vous pouvez accéder au tableau de bord Pages afin d'obtenir les journaux correspondants.</p><!--kg-card-begin: html-->
	<div style="position: relative; padding-top: 66.54804270462633%;"><iframe src="https://customer-eq7kiuol0tk9chox.cloudflarestream.com/441c4b4499e2a017aa79e6a40300019f/iframe?preload=true&amp;poster=https%3A%2F%2Fcustomer-eq7kiuol0tk9chox.cloudflarestream.com%2F441c4b4499e2a017aa79e6a40300019f%2Fthumbnails%2Fthumbnail.jpg%3Ftime%3D11s%26height%3D600" style="border: none; position: absolute; top: 0; left: 0; height: 100%; width: 100%;" allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;" allowfullscreen="true"></iframe></div><!--kg-card-end: html-->
	<p>Pour des filtres plus spécifiques, vous pouvez utiliser</p><!--kg-card-begin: markdown-->
	<pre><code>wrangler pages deployment tail
</code></pre>
	<!--kg-card-end: markdown-->
	<p>pour recevoir un flux en direct de la console et les journaux d'exception pour chaque requête reçue par votre Function.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image1-52.png" class="kg-image" alt="" loading="lazy"></figure>
	<h3 id="obtenez-des-mesures-en-temps-r-el-de-functions">Obtenez des mesures en temps réel de Functions</h3>
	<p>Dans le tableau de bord, Pages regroupe les données pour vos Functions sous la forme de mesures d'aboutissements/mesures de requêtes et le statut d'invocation. Vous pouvez vous reporter au tableau de bord de vos mesures non seulement pour mieux comprendre votre utilisation par projet, mais également pour contrôler l'état de vos fonctions en détectant les volumes d'aboutissements/erreurs.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/11/image4-20.png" class="kg-image" alt="" loading="lazy"></figure>
	<h3 id="int-grez-rapidement-l-cosyst-me-cloudflare">Intégrez rapidement l'écosystème Cloudflare</h3>
	<h4 id="liaisons-de-stockage"><strong>Liaisons de stockage</strong></h4>
	<p>Vous voulez passer véritablement au full-stack ? Nous savons combien il est difficile de trouver une solution de stockage qui réponde à vos besoins et puisse s'inscrire dans votre écosystème ; et pourtant cela pourrait être facile.</p>
	<p>Avec Functions, vous pouvez profiter d'une large gamme de produits de stockage dont Workers KV, Durable Objects, R2, D1 et, très prochainement, <a href="https://developers.cloudflare.com/queues" target="_blank">Queues</a> et <a href="https://developers.cloudflare.com/analytics/analytics-engine" target="_blank">Workers Analytics Engine</a> ! Il vous suffit de créer votre espace de noms, compartiment ou base de données et d'ajouter votre liaison au tableau de bord Pages pour mettre en service votre site-full stack en quelques clics.</p>
	<p>De l'ajout d'un système de commentaires rapide à la mise en place de votre propre authentification, en passant par la création de sites de commerce électronique reposant sur une base de données, l'intégration des produits existants dans notre plateforme de développement permet d'ouvrir la voie à un ensemble exponentiel de scénarios d'utilisation pour votre site.</p>
	<h4 id="liaisons-de-secrets"><strong>Liaisons de secrets</strong></h4>
	<p>En plus d'ajouter des variables d'environnement disponibles à votre projet à la fois au moment du développement et de l'exécution, vous pouvez désormais également lui ajouter des « secrets ». Il s'agit de variables d'environnement chiffrées qui ne peuvent pas être visualisées par n'importe quelle interface de tableau de bord et qui se révèlent particulièrement intéressantes pour héberger des données sensibles telles que les jetons d'API ou les mots de passe.</p>
	<h3 id="int-grer-des-services-provenant-des-tiers">Intégrer des services provenant des tiers</h3>
	<p>Notre objectif avec Pages est de toujours vous suivre lorsqu'il s'agit des outils que vous aimez utiliser. Au cours de cette période de version Bêta, nous avons observé des schémas récurrents dans la manière dont vous employez Functions pour l'intégration de services tiers courants. Les <a href="https://developers.cloudflare.com/pages/platform/functions/plugins" target="_blank">Plug-ins Pages</a>, nos fragments de code prêts à l'emploi, permettent une utilisation immédiate pour le développement de l'écosystème de votre choix autour de votre application.</p>
	<p>Concrètement, les plug-ins pour Pages sont des éléments de code runtime réutilisables et personnalisables susceptibles d'être intégrés à n'importe quel endroit de votre application Pages. Il s'agit d'une Function Pages « composable », qui accorde aux plug-ins la pleine puissance de Functions (c'est-à-dire Workers), y compris la capacité de configurer des intergiciels, des itinéraires paramétrés et des ressources statiques.</p>
	<p>Avec les plug-ins de Pages, vous pouvez procéder à une intégration avec pléthore d'applications tierces ; y compris les applications officiellement prises en charge <a href="https://developers.cloudflare.com/pages/platform/functions/plugins/sentry" target="_blank">Sentry</a>, <a href="https://developers.cloudflare.com/pages/platform/functions/plugins/honeycomb" target="_blank">Honeycomb</a>, <a href="https://developers.cloudflare.com/pages/platform/functions/plugins/stytch" target="_blank">Stytch</a>, <a href="https://developers.cloudflare.com/pages/platform/functions/plugins/mailchannels" target="_blank">MailChannels</a> et plus encore.</p>
	<h3 id="utilisez-votre-infrastructures-full-stack-de-pr-dilection">Utilisez votre infrastructures full stack de prédilection</h3>
	<p>Toujours dans l'idée de rejoindre les développeurs là où ils se trouvent, nous avons pensé aux infrastructures Javascript. Toujours prompte à défendre les infrastructures largement adoptés, mais aussi celles à venir, notre équipe travaille avec de nombreux auteurs d'infrastructures pour vous donner l'occasion de jouer avec leurs nouvelles technologies et de les déployer immédiatement sur Pages.</p>
	<h4 id="d-sormais-compatible-avec-next-js-13-et-plus-encore-">Désormais compatible avec Next.js 13 et plus encore !</h4>
	<p>Récemment, nous avons annoncé que nous <a href="https://blog.cloudflare.com/next-on-pages">prenions en charge les applications Next.js</a> qui entrent dans le cadre d'Edge Runtime. Aujourd'hui nous sommes heureux d'annoncer que nous sommes désormais compatibles avec Next.js 13. Next.js 13 ajoute à notre infrastructure Next.js certains des paradigmes modernes les plus demandés, notamment le routage imbriqué, les composants serveur et le streaming de React 18.</p>
	<p>Vous préférez une autre infrastructure ? Aucun problème.</p>
	<p>Passez au full-stack sur Pages pour profiter de l'avantage du rendu côté serveur (SSR) avec une des nombreuses infrastructures officiellement prises en charge telles que <a href="https://remix.run" target="_blank">Remix</a>, <a href="https://kit.svelte.dev" target="_blank">SvelteKit</a>, <a href="https://qwik.builder.io/qwikcity/overview" target="_blank">QwikCity,</a> <a href="https://start.solidjs.com/getting-started/what-is-solidstart" target="_blank">SolidStart</a>, <a href="https://astro.build" target="_blank">Astro</a> et <a href="https://nuxtjs.org" target="_blank">Nuxt</a>. Vous pouvez <a href="https://blog.cloudflare.com/pages-full-stack-frameworks">lire notre publication de blog sur la prise en charge de SSR sur Pages </a> et sur la façon de commencer avec ces infrastructures.</p>
	<h3 id="acc-dez-plus-rapidement-au-mode-avanc-">Accédez plus rapidement au mode avancé</h3>
	<p>Certes les fonctions Pages sont émulées par Workers, nous comprenons toutefois que la valeur nominale n'est pas tout à fait la même pour les deux. Cependant, pour les utilisateurs existants, qui utilisent peut-être Workers et auraient envie d'essayer Cloudflare Pages, nous avons <a href="https://developers.cloudflare.com/pages/platform/functions/advanced-mode" target="_blank">prévu un chemin d'accès direct</a> qui vous permettra de démarrer plus rapidement.</p>
	<p>Si vous avez déjà un Worker unique et que vous souhaitez une méthode facile pour passer au full-stack sur Pages, vous pouvez utiliser le mode avancé des Functions de Pages. Générez un <a href="https://developers.cloudflare.com/workers/runtime-apis/fetch-event/#syntax-module-worker" target="_blank">module Worker ES</a> appelé <code>_worker.js</code> dans le répertoire de sortie de votre projet et procédez au déploiement ! Ce processus peut se révéler particulièrement avantageux si vous êtes auteur d'infrastructure ou si vous travaillez sur un scénario d'utilisation plus complexe qui ne suit pas la structure de fichiers que nous avons fournie.</p>
	<h2 id="-volution-illimit-e">Évolution illimitée</h2>
	<p>Ainsi, aujourd'hui tandis que nous annonçons la mise en disponibilité générale de Functions, nous sommes très heureux de permettre à votre trafic d'évoluer. Pendant la période de la version Bêta, nous avons imposé une limite quotidienne de 100 000 requêtes gratuites afin de vous permettre d'essayer la fonctionnalité. La limite de 100 000 requêtes gratuites par jour reste en vigueur, mais vous pouvez désormais payer pour ne plus avoir aucune limite.</p>
	<p>Dans la mesure où les Functions ne sont que des Workers « spéciaux », après cette annonce vous allez voir l'utilisation des Functions apparaître sur vos factures dans le cadre de l'abonnement payant à Workers ou via le contrat Workers Enterprise. À l'instar de Workers, dans le cadre d'une offre payante, vous avez la possibilité de choisir entre deux modèles d'utilisation, par regroupement ou sans limite, et vous serez facturé en conséquence.</p>
	<p>Pour que Pages reste le « cadeau de Cloudflare à Internet », vous bénéficierez d'un nombre illimité de requêtes gratuites pour les ressources statiques, et vous serez essentiellement facturé pour les requêtes dynamiques. Vous pouvez <a href="https://developers.cloudflare.com/pages/platform/functions/pricing" target="_blank">en lire davantage</a> sur la facturation de Functions dans notre documentation.</p>
	<h2 id="commencez-d-s-aujourd-hui">Commencez dès aujourd'hui</h2>
	<p>Pour vous mettre en route, consultez les <a href="https://developers.cloudflare.com/pages/platform/functions" target="_blank">documents concernant Pages Functions</a> et les articles de <a href="https://blog.cloudflare.com/pages-full-stack-frameworks">notre blog</a> qui concernent certaines des meilleures infrastructures à utiliser pour déployer votre première application full-stack. Lorsque vous commencerez à créer vos projets, n'oubliez pas de nous le faire savoir dans le canal <a href="https://discord.com/channels/595317990191398933/910978223968518144" target="_blank">#functions</a> sous Pages dans notre <a href="https://discord.gg/cloudflaredev" target="_blank">Discord Cloudflare Developers</a>. Joyeux développement !</p>
</div>