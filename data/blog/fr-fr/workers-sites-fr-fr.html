<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/09/image2-1.png" class="kg-image"></figure>
	<p>La performance sur le web a toujours été une bataille qui se joue à la vitesse de la lumière : l'accès à un site de Londres qui est desservi à partir de Seattle signifie que chaque requête d'actif unique doit parcourir plus de 11000 km. La première avancée significative dans la bataille de la performance web a été de maintenir des connexions HTTP/1.1 persistantes et la possibilité pour les navigateurs d’ouvrir plusieurs connexions. L’avancée suivante a été le CDN, qui rapproche vos actifs statiques de vos utilisateurs finaux en les mettant en cache dans des centres de données plus proches d'eux. Aujourd'hui, avec Workers Sites, nous sommes ravis d'annoncer la prochaine grande percée : des sites entiers distribués directement à la périphérie d'Internet.</p>
	<h2 id="d-ploiement-la-p-riph-rie-du-r-seau"><strong>Déploiement à la périphérie du réseau</strong></h2>
	<p>Pourquoi la simple mise en cache des actifs n'est pas suffisante ? Oui, la mise en cache améliore la performance. Mais une amélioration importante de la performance engendre une série de casse-tête. Le CDN peut deviner quels actifs il doit mettre en cache, mais cela reste une supposition. Configurer votre site pour une performance maximale a toujours été un processus qui engendre des erreurs et qui nécessite un ensemble de règles et d'en-têtes ésotériques. Même lorsqu'il est parfaitement configuré, presque rien n'est mis en cache de manière définitive, les précieuses requêtes ont encore souvent besoin de parcourir tout le chemin vers votre origine (où qu'elle se trouve). L'invalidation du cache est, après tout, l'un des <a href="https://twitter.com/secretgeek/status/7269997868" target="_blank">problèmes les plus difficiles en informatique</a>.</p>
	<p>Cela soulève la question suivante : plutôt que de déplacer maladroitement les octets de l'origine vers la périphérie bit après bit, pourquoi ne pas pousser toute l'origine vers la périphérie ?</p>
	<h2 id="workers-sites-largir-la-plateforme-workers"><strong>Workers Sites : Élargir la plateforme Workers</strong></h2>
	<p>Il y a deux ans, pour la Semaine de l'anniversaire, nous avons annoncé <a href="https://workers.cloudflare.com/" target="_blank">Cloudflare Workers</a>, un moyen pour les développeurs d'écrire et d'exécuter JavaScript et WebAssembly sur notre réseau dans 194 villes à travers le monde. Un an plus tard, nous lancions Workers KV, notre magasin clé-valeur distribuée, qui a permis aux développeurs de stocker l'état à la périphérie dans ces mêmes villes.</p>
	<p>Workers Sites tire parti de la puissance de Workers et Workers KV, tout en permettant aux développeurs de télécharger leurs sites directement à la périphérie, plus près des utilisateurs finaux. Né à la périphérie, Workers Sites est, selon nous, ce à quoi le développement moderne sur le Web devrait ressembler : nativement sécurisé, rapide et très évolutif. Vous passerez moins de temps à configurer et plus de temps sur votre code et votre contenu.</p>
	<h2 id="comment-a-marche"><strong>Comment ça marche</strong></h2>
	<p>Les sites Workers sont déployés avec quelques commandes terminales et peuvent desservir un site généré par n'importe quel générateur de sites statiques, comme Hugo, Gatsby ou Jekyll. À l'aide de <a href="https://github.com/cloudflare/wrangler" target="_blank">Wrangler</a> (notre CLI), vous pouvez télécharger les actifs de votre site directement dans KV. Lorsqu'une requête arrive sur votre site Workers, le Cloudflare Worker généré par Wrangler lira et desservira l'actif de KV, avec les en-têtes appropriés (pas besoin de vous préoccuper de Content-Type et de Cache-Control : nous faisons le nécessaire).</p>
	<p>Les sites Workers peuvent être utilisés pour déployer n'importe quel site statique, tel qu'un blog, des sites de markéting ou un portefeuille. &nbsp;Si jamais vous voulez que votre site devienne un peu moins statique, votre Worker n’est que du code, il vous suffit de l’étendre jusqu'à ce que vous ayez un site dynamique fonctionnant dans le monde entier.</p>
	<h2 id="commencer"><strong>Commencer</strong></h2>
	<p>Pour commencer avec Workers Sites, vous devez d'abord <a href="https://dash.cloudflare.com/sign-up" target="_blank">vous inscrire sur Workers</a>. Après avoir sélectionné votre sous-domaine workers.dev, choisissez le forfait Workers Unlimited (à partir de 5 $ par mois) pour avoir accès à Workers KV et la possibilité de déployer des sites Workers.</p>
	<p>Après vous être inscrit à Workers Unlimited, vous devrez installer le CLI pour Workers, Wrangler. Wrangler peut être installé à partir de NPM ou Cargo :</p>
	<pre><code class="language-bash"># NPM Installation
npm i @cloudflare/wrangler -g
# Cargo Installation
cargo install wrangler</code></pre>
	<p>Une fois que vous installez Wrangler, vous êtes prêt à déployer votre site statique, selon les étapes suivantes :</p>
	<ol>
		<li>Exécutez <code>wrangler init --site</code> dans le répertoire qui contient les actifs construits de votre site statique</li>
		<li>Remplissez le nouveau fichier <code>wrangler.toml</code> avec les données de votre compte et les détails de votre projet</li>
		<li>Publiez votre site avec <code>wrangler publish</code></li>
	</ol>
	<p>Vous pouvez également consulter notre <a href="https://developers.cloudflare.com/workers/sites" target="_blank">documentation de référence</a> Workers Sites ou suivre le tutoriel complet pour <a href="https://developers.cloudflare.com/workers/tutorials/deploy-a-react-app" target="_blank">create-react-app</a> dans les documents.</p>
	<p>Si vous préférez commencer en regardant une vidéo, nous avons ce qu’il vous faut ! <a href="https://watch.cloudflarestream.com/9943b400b59802b77f83a8a57f39d682" target="_blank">Cette vidéo</a> vous expliquera comment créer et déployer votre premier site Workers :</p>
	<!--kg-card-begin: html-->
	<stream src="9943b400b59802b77f83a8a57f39d682" controls=""></stream>
	<script data-cfasync="false" defer="" type="text/javascript" src="https://embed.videodelivery.net/embed/r4xu.fla9.latest.js?video=9943b400b59802b77f83a8a57f39d682"></script>
	<!--kg-card-end: html-->
	<h2 id="rapide-comme-l-clair-d-atlanta-zagreb"><strong>Rapide comme l’éclair : d'Atlanta à Zagreb</strong></h2>
	<p>En plus d'améliorer l'expérience des développeurs, nous avons beaucoup travaillé en coulisse pour veiller à ce que les déploiements et les sites eux-mêmes soient rapides comme l’éclair : nous sommes ravis de partager ce processus avec vous dans notre <a href="https://blog.cloudflare.com/extending-the-workers-platform">post sur le blog technique</a>.</p>
	<p>Pour tester la performance des sites Workers, nous avons pris l'un de nos sites personnels et l'avons déployé pour effectuer plusieurs benchmarks. Ce test concernait notre site, mais vos résultats peuvent être différents.</p>
	<p>Une façon courante d’évaluer la performance de votre site à l'aide de <a href="https://developers.google.com/web/tools/lighthouse" target="_blank">Google Lighthouse</a>, ce que vous pouvez faire directement à partir de l'onglet Audits de votre navigateur Chrome.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/09/image1-7.png" class="kg-image"></figure>
	<p>Nous avons donc passé le premier test haut la main : 100 ! Cependant, l’exécution d’un benchmark à partir de votre propre ordinateur présente un inconvénient : vos utilisateurs ne se trouvent pas nécessairement au même endroit que vous. En fait, vos utilisateurs sont de <em>moins en moins</em> au même endroit que vous.</p>
	<p>L'emplacement à partir duquel vous effectuez votre benchmark est vraiment important : l'exécution de tests depuis différents emplacement produira des résultats différents. Faire un benchmark depuis Seattle et toucher un serveur sur la côte ouest des États-Unis en dit très peu sur votre performance globale.</p>
	<p>Nous avons décidé d'utiliser un outil appelé Catchpoint pour exécuter des benchmark à partir de villes du monde entier. Pour voir comment nous comparons, nous avons déployé le site sur trois plateformes de déploiement de sites statiques différentes, y compris Workers Sites.</p>
	<p>Étant donné que les fournisseurs proposent des régions de centres de données sur les côtes des États-Unis ou en Europe centrale, il est courant de voir de bonnes performances dans des régions comme l'Amérique du Nord, et nous vous avons couverts ici :</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2019/09/Screen-Shot-2019-09-26-at-10.58.41-PM.png" class="kg-image"></figure>
	<p>Mais qu'en est-il de vos utilisateurs dans le reste du monde ? Les performances sont encore plus importantes dans ces régions : les premiers utilisateurs ne vont pas se connecter à votre site avec un MacBook Pro, sur une connexion rapide comme l’éclair. Workers Sites vous permet d'atteindre ces régions sans aucun effort supplémentaire de votre part : chaque fois que <a href="https://blog.cloudflare.com/scaling-the-cloudflare-global/">notre carte se développe</a>, votre présence mondiale augmente avec elle.</p>
	<p>Nous avons exécuté quelques benchmarks depuis différentes parties du monde pour vous et nous sommes heureux de partager les résultats :</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2019/09/Screen-Shot-2019-09-26-at-10.58.24-PM.png" class="kg-image"></figure>
	<h2 id="une-derni-re-chose-"><strong>Une dernière chose...</strong></h2>
	<p>Le déploiement de votre prochain site avec Workers Sites est facile et mène à de grandes performances. Nous avons donc pensé qu’il était juste que nous nous déployions avec les Workers Sites nous-mêmes. Avec cette annonce, nous mettons également en open source la<a href="https://developers.cloudflare.com/workers" target="_blank">documentation Cloudflare Workers</a> ! Et elle est maintenant disponible à partir d'un centre de données Cloudflare près de chez vous en utilisant les Workers Sites.</p>
	<p>Nous avons hâte de voir ce que vous déployez avec <a href="https://workers.cloudflare.com/sites" target="_blank">Workers Sites</a> !</p>
	<hr>
	<p><em>Avez-vous construit quelque chose d'intéressant avec Workers ou Workers Sites ? Faites-le nous savoir @CloudflareDev !</em></p>
</div>