<div class="mb2 gray5">16 min read</div>
<div class="post-content lh-copy gray1">
	<!--kg-card-begin: markdown-->
	<p><small><em>Cet article de blog présente et résume les informations contenues dans un <a href="https://research.cloudflare.com/publications/Singanamalla2022" target="_blank">document de recherche</a> de Cloudflare, proposé à l'occasion du forum ACM <a href="https://conferences.sigcomm.org/imc/2022/program" target="_blank">Internet Measurement Conference</a>, concernant la mesure et le prototypage de la fusion de connexions avec les extensions ORIGIN Frame.</em></small></p>
	<!--kg-card-end: markdown-->
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2023/09/pasted-image-0--3--1-1.png" class="kg-image" alt="" loading="lazy" width="1600" height="889"></figure>
	<p>Certains lecteurs seront peut-être surpris d'apprendre qu'une seule consultation d'une page web peut entraîner l'établissement de dizaines, voire de centaines de connexions web par un navigateur. Prenons l'exemple de cet article de blog. S'il s'agit de votre première consultation du blog de Cloudflare, ou si votre dernière visite remonte à un certain temps, votre navigateur établira une multitude de connexions afin d'afficher la page. Le navigateur effectuera des requêtes DNS afin d'identifier les adresses IP correspondant à l'adresse blog.cloudflare.com, puis il transmettra d'autres requêtes afin de récupérer toutes les sous-ressources de la page web nécessaires à l'affichage de la page complète. Combien de requêtes ? Au moment où nous écrivons ces lignes, 32 noms d'hôtes différents sont utilisés lors du chargement du blog de Cloudflare, ce qui signifie 32 requêtes DNS et <em>au moins</em> 32 connexions TCP (ou QUIC), sauf si le client est en mesure de réutiliser (ou fusionner) certaines de ces connexions.</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2023/09/Screenshot-2023-09-03-at-18.34.41.png" class="kg-image" alt="" loading="lazy" width="1562" height="894"></figure>
	<p>Chaque nouvelle connexion web exerce une charge supplémentaire sur les capacités de traitement d'un serveur, au risque de provoquer des problèmes d'évolutivité en période d'affluence, mais également d'exposer au réseau les métadonnées de clients, telles que les noms d'hôte en clair auxquels accède un individu. Ces méta-informations peuvent potentiellement révéler les activités en ligne et les comportements de navigation d'un utilisateur à des acteurs malveillants et des espions présents sur le réseau.</p>
	<p>Dans cet article de blog, nous allons examiner de plus près la « fusion de connexions ». Depuis notre première étude consacrée à la <a href="https://blog.cloudflare.com/connection-coalescing-experiments">fusion basée sur les adresses IP en 2021</a>, nous avons effectué d'autres mesures et modélisations de grande ampleur sur l'ensemble d'Internet, dans le but de comprendre et de prédire les situations dans lesquelles la fusion serait la plus efficace, le cas échéant. La gestion de la fusion d'adresses IP à grande échelle étant une entreprise difficile, l'année dernière, nous avons mis en œuvre et expérimenté une norme prometteuse appelée <a href="https://datatracker.ietf.org/doc/rfc8336" target="_blank">extension HTTP/2 ORIGIN Frame</a>, que nous avons utilisée pour regrouper les connexions à la périphérie de notre réseau, sans nous préoccuper de la gestion des adresses IP.</p>
	<p>Il s'avère, en fin de compte, que de nombreux grands fournisseurs ne saisissent pas les opportunités qui s'offrent à eux. Nous espérons que cet article de blog (ainsi que notre <a href="https://research.cloudflare.com/publications/Singanamalla2022" target="_blank">publication</a> présentée lors du forum ACM IMC 2022, dans laquelle figurent des informations détaillées) constitue une première étape qui aidera les serveurs et les clients à tirer parti de la norme ORIGIN Frame.</p>
	<h3 id="mise-en-sc%C3%A8ne">Mise en scène</h3>
	<p>Sommairement, lorsqu'un utilisateur parcourt le web, pour afficher les pages web, le navigateur récupère des sous-ressources dépendantes, afin de construire la page web complète. Ce processus ressemble étrangement à l'assemblage de produits physiques dans une usine, et en ce sens, une page web moderne peut être considérée comme une usine d'assemblage :elle dépend d'une « chaîne logistique » de ressources indispensables à la fabrication du produit final.</p>
	<p>Dans le monde physique, une usine d'assemblage peut passer une commande unique contenant différentes pièces et recevoir une livraison unique depuis un fournisseur (similaire au <a href="https://www.sciencedirect.com/science/article/abs/pii/092552739290109K" target="_blank">processus de « kitting »</a>, permettant de maximiser la valeur et de minimiser les temps de réponse). Quels que soient le fabricant de ces pièces et l'endroit où elles sont produites, la démarche ne nécessite qu'une « connexion » avec le fournisseur ; ainsi, un camion transitant entre un fournisseur et une usine d'assemblage peut être rempli de pièces provenant d'une multitude de fabricants.</p>
	<p>En raison de l'architecture du web, les navigateurs font habituellement l'inverse, dans la nature. Pour récupérer les images, le code JavaScript et les autres ressources d'une page web (les pièces), les clients web (les usines d'assemblage) doivent établir <em>au moins</em> une connexion à chaque nom d'hôte (les fabricants) défini dans le code HTML renvoyé par le serveur (le fournisseur). Peu importe que les connexions à ces noms d'hôte soient établies avec le même serveur ou non ; elles peuvent, par exemple, être établies avec un <a href="https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy" target="_blank">proxy inverse</a>, tel que Cloudflare. Pour chaque fabricant, un « nouveau » camion sera nécessaire pour transporter les matériaux à l'usine d'assemblage depuis le même fournisseur ou, plus formellement, une nouvelle connexion devra être établie pour demander la transmission d'une sous-ressource depuis un nom d'hôte sur la même page web.</p>
	<figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2023/08/pasted-image-0--4-.png" class="kg-image" alt="Without connection coalescing" loading="lazy" width="1600" height="682">
		<figcaption>Without connection coalescing</figcaption>
	</figure>
	<p>Le nombre de connexions utilisées pour charger une page web peut être étonnamment élevé. Il est également fréquent que les sous-ressources nécessitent d'autres sous-sous-ressources, et que de nouvelles connexions soient donc établies à la suite des précédentes. N'oubliez pas non plus que les connexions HTTP aux noms d'hôtes sont souvent précédées de requêtes DNS ! La fusion de connexions permet d'utiliser moins de connexions<em>, c'est-à-dire de « réutiliser » la même flotte de camions pour transporter des pièces depuis plusieurs fabricants vers un fournisseur unique.</em></p>
	<figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2023/08/pasted-image-0--5-.png" class="kg-image" alt="With connection coalescing" loading="lazy" width="1600" height="682">
		<figcaption>With connection coalescing&nbsp;</figcaption>
	</figure>
	<h3 id="la-fusion-des-connexions-dans-la-th%C3%A9orie">La fusion des connexions dans la théorie</h3>
	<p>La fusion des connexions a été <a href="https://datatracker.ietf.org/doc/html/rfc7540" target="_blank">introduite dans la spécification HTTP/2</a>, puis reprise dans la spécification <a href="https://www.rfc-editor.org/rfc/rfc9114.html#name-connection-reuse" target="_blank">HTTP/3</a>. Nous avons <a href="https://blog.cloudflare.com/connection-coalescing-experiments">précédemment</a> publié un article de blog consacré à la fusion de connexions (nous vous invitons à le consulter pour une introduction détaillée). Bien que l'idée soit simple, sa mise en œuvre peut comporter un certain nombre de défis techniques. Par exemple, souvenez-vous que 32 noms d'hôtes (au moment de la rédaction de cet article) sont impliqués dans le chargement de la page web que vous consultez actuellement. Parmi ces 32 noms d'hôtes, on dénombre 16 domaines uniques (définis comme « <a href="https://www.cloudflare.com/learning/dns/top-level-domain" target="_blank">domaine de premier niveau+1</a> »). Alors, pouvons-nous créer moins de connexions ou « fusionner » des connexions existantes pour chaque domaine unique ? La réponse est « <em>Oui, mais sous conditions</em> ».</p>
	<p>Le nombre exact de connexions impliquées dans le chargement de la page de l'article de blog est tout sauf évident à évaluer ; il est même difficile à déterminer. 32 noms d'hôtes peuvent être rattachés à 16 domaines ; toutefois, bien que cela soit contre-intuitif, cela ne signifie pas que la réponse à la question « Combien de connexions uniques sont établies ? » est 16. La véritable réponse pourrait être <em>une</em> connexion seulement, si tous les noms d'hôtes sont accessibles depuis un serveur unique, ou 32 connexions indépendantes, si un serveur différent et distinct est nécessaire pour accéder à chaque nom d'hôte individuel.</p>
	<p>La réutilisation des connexions peut revêtir une multitude de formes ; il est donc important de définir la « fusion de connexions » dans l'espace HTTP. Par exemple, la réutilisation d'une connexion <a href="https://www.cloudflare.com/learning/ddos/glossary/tcp-ip" target="_blank">TCP</a> ou TLS existante à un nom d'hôte dans le but de transmettre plusieurs demandes de sous-ressources depuis ce <strong><em>même</em></strong>nom d'hôte constitue une réutilisation de la connexion, mais pas une fusion.</p>
	<p>La fusion se produit lorsqu'un canal TLS existant pour un nom d'hôte donné peut être réaffecté ou utilisé pour établir une connexion à un nom d'hôte <strong><em>différent</em></strong>. Par exemple, lorsque vous visitez blog.cloudflare.com, le code HTML renvoie vers des sous-ressources accessibles depuis cdnjs.cloudflare.com. Pour réutiliser la même connexion TLS pour les sous-ressources, il est nécessaire que les deux noms d'hôte apparaissent ensemble dans la liste « <a href="https://en.wikipedia.org/wiki/Subject_Alternative_Name" target="_blank">Server Alternative Name (SAN)</a> » du certificat TLS ; cependant, cette étape n'est pas suffisante, à elle seule, pour convaincre les navigateurs de mettre en œuvre la fusion. Après tout, le service cdnjs.cloudflare.com peut ou non être accessible sur le même serveur que blog.cloudflare.com, même s'il figure sur le même certificat. Alors, comment le navigateur peut-il le déterminer ? La fusion fonctionne uniquement lorsque les serveurs mettent en place les conditions requises, mais il incombe aux clients de décider de l'utiliser ou non. Les navigateurs nécessitent donc un signal de fusion autre que la liste SAN figurant sur le certificat. Pour reprendre notre analogie, l'usine d'assemblage peut commander directement une pièce à un fabricant, sans toutefois savoir si le fournisseur possède déjà cette pièce dans son entrepôt.</p>
	<p>Il existe deux signaux explicites qu'un navigateur peut utiliser pour décider si des connexions peuvent être fusionnées : l'un est basé sur l'adresse IP, l'autre sur l'extension ORIGIN Frame. Dans le premier cas, les opérateurs du serveur doivent configurer une liaison étroite entre les enregistrements DNS et les ressources HTTP disponibles sur le serveur. Cette approche s'avère difficile à gérer et à déployer, et crée en réalité une dépendance risquée, car toutes les ressources doivent être réunies dans un ensemble spécifique ou à une adresse IP unique. L'influence des adresses IP sur les décisions de fusion <a href="https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing" target="_blank">varie d'un navigateur à l'autre</a> ; certains navigateurs sont assez conservateurs, tandis que d'autres sont plus permissifs. Par ailleurs, l'approche HTTP ORIGIN Frame constitue un signal plus facile à orchestrer pour les serveurs ; elle est également flexible et, en cas d'incident, offre une gestion simple, n'entraînant pas d'interruption du service (dans le cas d'une mise en œuvre conforme à la spécification).</p>
	<p>La différence fondamentale entre ces deux signaux de coalescence est que les signaux de fusion basés sur l'adresse IP sont implicites, voire accidentels, et obligent les clients à déduire des possibilités de fusion qui peuvent exister ou non. Cela n'est guère surprenant, puisque les adresses IP sont conçues pour <a href="https://blog.cloudflare.com/addressing-agility">n'avoir aucun lien réel avec les noms ! </a>En revanche, l'extension ORIGIN Frame est un signal explicite transmis depuis les serveurs aux clients, indiquant que la fusion est possible, quoi qu'indique le DNS pour un nom d'hôte donné.</p>
	<p>Nous avons précédemment expérimenté la <a href="https://blog.cloudflare.com/connection-coalescing-experiments">fusion de connexions basée sur les adresses IP</a> ; aux fins de cet article de blog, nous allons examiner plus en détail la fusion basée sur les extensions ORIGIN Frame.</p>
	<h2 id="quest-ce-que-la-norme-origin-frame">Qu'est-ce que la norme ORIGIN Frame ?</h2>
	<p>La norme ORIGIN Frame est une extension des spécifications <a href="https://www.rfc-editor.org/rfc/rfc8336" target="_blank">HTTP/2</a>et <a href="https://www.rfc-editor.org/rfc/rfc9412" target="_blank">HTTP/3</a>, une trame spéciale transmise sur le flux 0 ou le flux de contrôle de la connexion, respectivement. La trame permet aux serveurs d'envoyer aux clients, sur une connexion TLS <em>existante</em>préalablement établie, une instruction origin-set incluant les noms d'hôtes pour lesquels elle est autorisée, et qui n'entraînera pas d'<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/421" target="_blank">erreurs HTTP 421</a>. Les noms d'hôtes dans l'instruction origin-set doivent impérativement figurer également dans la liste SAN du certificat associé au serveur, même si ces noms d'hôtes sont annoncés sur des adresses IP différentes via le DNS.</p>
	<p>Spécifiquement, deux étapes différentes sont requises :</p>
	<ol>
		<li>Les serveurs web doivent transmettre une liste énumérant le contenu de l'instruction origin-set (c'est-à-dire les noms d'hôte pour lesquels une connexion donnée peut être utilisée) dans l'extension ORIGIN Frame.</li>
	</ol>
	<ol>
		<li>Le certificat TLS renvoyé par le serveur web doit couvrir, dans les entrées SAN des noms DNS, les noms d'hôte supplémentaires renvoyés dans l'extension ORIGIN Frame.</li>
	</ol>
	<p>Sommairement, les extensions ORIGIN Frame complètent le certificat TLS que les opérateurs peuvent joindre, comme pour dire « Pssst ! Hé, le client, voici les noms disponibles pour cette connexion sur les listes SAN ; tu peux fusionner les connexions ! ». Dans la mesure où l'extension ORIGIN Frame ne fait pas partie du certificat lui-même, son contenu peut être modifié indépendamment. Aucun nouveau certificat n'est requis,et il n'existe aucune dépendance vis-à-vis des adresses IP. Pour un nom d'hôte fusionnable, les connexions TCP/QUIC+TLS existantes peuvent être réutilisées sans nécessiter de nouvelles connexions ou requêtes DNS.</p>
	<p><a href="https://w3techs.com/technologies/overview/proxy" target="_blank">De nombreux sites web dépendent aujourd'hui</a> de contenus servis depuis des réseaux CDN, tels que le service CDN de Cloudflare. L'utilisation de services CDN externes offre aux sites web les avantages de la vitesse et de la fiabilité, et réduit également la charge que représente le contenu servi par leurs <a href="https://www.cloudflare.com/learning/cdn/glossary/origin-server" target="_blank">serveurs d'origine</a>. Servir le site web et les ressources depuis le même réseau CDN (même s'il s'agit de noms d'hôtes différents, appartenant à des entités différentes) offre des opportunités très intéressantes aux opérateurs de réseaux CDN : ils peuvent permettre la réutilisation et la fusion de connexions, puisqu'ils peuvent contrôler à la fois la gestion des certificats et les requêtes de connexion pour l'envoi d'extensions ORIGIN Frame pour le compte du serveur d'origine réel.</p>
	<p>Malheureusement, aucune approche permettant de mettre en pratique les possibilités offertes par la norme ORIGIN Frame n'a été mise au point. À notre connaissance, jusqu'à aujourd'hui, il n'existe aucun déploiement de serveur prenant en charge les extensions ORIGIN Frame,et seul le navigateur Firefox offre la prise en charge des extensions ORIGIN Frames. Puisque la fusion basée sur les adresses IP constitue un défi et que l'extension ORIGIN Frame ne bénéficie actuellement d'aucune prise en charge, est-il intéressant d'investir du temps et de l'énergie dans le développement d'une meilleure prise en charge de la fusion de connexions ? Nous avons décidé de le découvrir en effectuant des mesures à grande échelle sur l'ensemble d'Internet, afin de comprendre les opportunités et de prévoir les possibilités, puis nous avons mis en œuvre la norme ORIGIN Frame afin de l'expérimenter sur du trafic de production.</p>
	<h1 id="exp%C3%A9rience-no-1-quelle-est-lampleur-des-changements-n%C3%A9cessaires">Expérience n<sup>o</sup> 1 : Quelle est l'ampleur des changements nécessaires ?</h1>
	<p>En février 2021, <a href="https://blog.cloudflare.com/connection-coalescing-experiments">nous avons collecté des données</a> concernant 500 000 <a href="https://radar.cloudflare.com/domains" target="_blank">sites web parmi les plus populaires d'Internet</a>en exécutant une session <a href="https://github.com/WPO-Foundation/webpagetest" target="_blank">Web Page Test</a> modifiée sur 100 machines virtuelles. Une instance automatisée du navigateur Chrome (v. 88) a été lancée pour chaque consultation d'une page web, afin d'éliminer les effets de la mise en cache (car nous voulions comprendre la fusion, et non la mise en cache). À la fin de chaque session, nous avons utilisé les outils de développement de Chrome pour récupérer et écrire les données de chargement de la page sous la forme d'un fichier au format HTTP Archive (HAR), avec une chronologie complète des événements, ainsi que des informations supplémentaires sur les certificats et leur validation. En outre, nous avons analysé les chaînes de certificats correspondant à la page web racine et aux nouvelles connexions TLS établies suite aux demandes de sous-ressources, afin (i) d'identifier les émetteurs de certificats pour les noms d'hôtes, (ii) d'inspecter la présence de l'extension Subject Alternative Name (SAN) et (iii) de valider la résolution des noms DNS à l'adresse IP utilisée. Des informations plus détaillées sur notre méthodologie et nos résultats sont disponibles dans le <a href="https://research.cloudflare.com/publications/Singanamalla2022" target="_blank">document technique</a>.</p>
	<p>La première étape consistait à comprendre quelles ressources étaient demandées par les pages web, afin d'assurer le rendu du contenu de la page, ainsi que les endroits auxquels ces ressources étaient présentes sur Internet. La fusion des connexions est possible lorsque la colocalisation des domaines de sous-ressources est idéale. Nous avons déterminé approximativement l'emplacement d'un domaine en identifiant le système autonome (AS, « Autonomous System ») correspondant. Par exemple, le domaine rattaché à <a href="https://cdnjs.cloudflare.com/https:/cdnjs.cloudflare.com" target="_blank">cdnjs</a> est accessible via le système AS 13335 dans la table de routage BGP, et ce numéro de système AS appartient à Cloudflare. La figure ci-dessous décrit le pourcentage de pages web ainsi que le nombre de systèmes AS uniques nécessaires au chargement d'une page web complète.</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2023/08/Screenshot-2023-08-31-at-1.39.16-PM.png" class="kg-image" alt="" loading="lazy" width="1810" height="884"></figure>
	<p>Dans environ 14 % des cas, le chargement complet des pages web nécessite deux systèmes AS, ce qui signifie qu'elles dépendent d'un système AS supplémentaire pour les sous-ressources. Dans plus de 50 % des cas, les pages web n'ont pas besoin de contacter plus de six systèmes AS pour obtenir toutes les sous-ressources nécessaires. Cette conclusion, représentée sur le graphique ci-dessus, implique qu'un nombre relativement restreint d'opérateurs fournit les contenus correspondant aux sous-ressources nécessaires à la majorité (environ 50 %) des sites web, et que l'utilisation éventuelle d'extensions ORIGIN Frame ne nécessiterait que quelques modifications pour produire l'effet escompté. De manière optimiste, on peut donc estimer que le potentiel de fusion de connexions est égal au nombre de systèmes AS uniques nécessaires à l'obtention de toutes les sous-ressources d'une page web. Dans la pratique, toutefois, cette estimation peut être supplantée par des facteurs opérationnels tels que les accords de niveau de service (SLA) ou être facilitée par des mappages flexibles entre les sockets, les noms et les adresses IP, sur lesquels <a href="https://research.cloudflare.com/publications/Fayed2021" target="_blank">Cloudflare a précédemment travaillé</a>.</p>
	<p>Nous avons ensuite essayé de comprendre l'impact de la fusion sur les indicateurs de connexion. Les nombres mesuré et idéal de requêtes DNS et de connexions TLS nécessaires au chargement d'une page web sont récapitulés en fonction de leurs distributions cumulées sur la figure ci-dessous.</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2023/08/Screenshot-2023-08-31-at-1.39.02-PM.png" class="kg-image" alt="" loading="lazy" width="1916" height="1056"></figure>
	<p>Grâce à la modélisation et à une analyse approfondie, nous avons déterminé que la fusion de connexions mise en œuvre par le biais d'extensions ORIGIN Frame permettrait de réduire d'une valeur médiane de plus de 60 % le nombre de requêtes DNS et de connexions TLS effectuées par les navigateurs.Nous avons effectué cette modélisation en identifiant le nombre de demandes d'enregistrements DNS provenant des clients, puis en associant ces demandes à l'extension ORIGIN Frame devant idéalement être servie.</p>
	<p>De nombreux serveurs multi-origines, tels que ceux utilisés par les <a href="https://www.cloudflare.com/learning/cdn/what-is-a-cdn" target="_blank">réseaux CDN</a>, ont tendance à réutiliser les certificats et à servir un même certificat avec plusieurs entrées SAN DNS. Cette approche permet aux opérateurs de gérer un nombre moins élevé de certificats pendant les cycles de création et de renouvellement de ces derniers. Bien qu'il soit théoriquement possible d'ajouter des millions de noms à un certificat, la création de ce type de certificat ne constitue pas une approche raisonnable, et sa gestion efficace serait problématique. En continuant à se fier à des certificats existants, nos mesures de modélisation mettent en lumière le volume de changements nécessaires pour permettre une fusion de connexions parfaite, tout en fournissant des informations sur l'ampleur de ces changements, comme le démontre la figure ci-dessous.</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2023/08/Screenshot-2023-08-31-at-1.38.35-PM.png" class="kg-image" alt="" loading="lazy" width="1920" height="1070"></figure>
	<p>Nous identifions que plus de 60 % des certificats servis par les sites web ne nécessitent aucune modification et pourraient tirer profit des extensions ORIGIN Frame, et qu'en ajoutant au maximum 10 noms DNS SAN aux certificats, nous pouvons assurer la fusion de connexions pour plus de 92 % des sites web inclus dans nos mesures. Les modifications les plus efficaces pourraient être mises en œuvre par les fournisseurs de réseaux CDN en ajoutant à chaque certificat trois ou quatre de leurs noms d'hôtes les plus demandés.</p>
	<h3 id="exp%C3%A9rience-no-2-la-norme-origin-frames-en-action">Expérience no 2 : La norme ORIGIN Frames en action</h3>
	<p>Afin de valider nos attentes concernant la modélisation, nous avons ensuite adopté une approche plus active, au début de 2022. Notre expérience suivante s'est concentrée sur 5 000 sites web qui utilisent fréquemment <em>cdnjs.cloudflare.com</em> en tant que sous-ressource. En modifiant notre point de terminaison TLS expérimental, nous avons déployé la prise en charge de la spécification HTTP/2 ORIGIN Frame, telle que définie dans la <a href="https://datatracker.ietf.org/doc/rfc8336" target="_blank">norme RFC</a>. Cette approche a nécessité la modification de la fourche interne des modules de dépendances <em>net </em>et <em>http</em> de Golang, que nous avons publiés en open source (voir <a href="https://github.com/cloudflare/go-originframe" target="_blank">ici</a> et <a href="https://github.com/cloudflare/net-originframe" target="_blank">ici</a>).</p>
	<p>Pendant les expériences, la connexion à un site web inclus dans l'ensemble expérimental renvoyait <em>cdnjs.cloudflare.com</em> dans l'extension ORIGIN Frame, tandis que l'ensemble de contrôle renvoyait un nom d'hôte arbitraire (inutilisé). Tous les certificats périphériques existants pour les 5 000 sites web ont également été modifiés. Pour l'ensemble expérimental, les certificats correspondants ont été renouvelés, et l'adresse <em>cdnjs.cloudflare.com</em> a été ajoutée au certificat SAN. Pour garantir l'intégrité entre les ensembles expérimental et de contrôle, les certificats de domaines du groupe de contrôle ont également été renouvelés avec un domaine tiers valide, de taille identique, qui n'était utilisé par aucun des domaines de contrôle. Cette approche permettait de préserver la constance des modifications de la taille relative des certificats et d'éviter d'éventuels biais liés aux différences de taille des certificats. Les résultats que nous avons obtenus ont été remarquables !</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2023/08/Screenshot-2023-08-31-at-1.38.47-PM.png" class="kg-image" alt="" loading="lazy" width="1920" height="1072"></figure>
	<p>En échantillonnant 1 % des requêtes reçues depuis Firefox vers les sites web inclus dans l'expérience, nous avons constaté <strong>une réduction de plus de 50 % du nombre de nouvelles connexions TLS par seconde</strong>, indiquant une diminution du nombre d'opérations de vérification cryptographique effectuées par le client, ainsi qu'une réduction de la surcharge de données de traitement au niveau du serveur. Comme prévu, aucune différence n'était observable au niveau de l'ensemble de contrôle, confirmant l'efficacité de la réutilisation de connexions telle qu'elle est perçue par les opérateurs de réseaux CDN ou de serveurs.</p>
	<h3 id="discussion-et-informations">Discussion et informations</h3>
	<p>Si nos mesures de modélisation indiquent que nous pouvions anticiper une amélioration des performances, dans la pratique, ces dernières n'ont pas été considérablement meilleures, suggérant que le modèle mental « pas pire » constitue la meilleure approche en termes de performances. L'interaction subtile entre la taille des objets des ressources, le nombre de connexions concurrentes et le contrôle de l'encombrement dépend des conditions actuelles du réseau. La capacité de partage des goulets d'étranglement, par exemple, diminue à mesure que des connexions moins nombreuses se disputent les ressources affectées par les goulets d'étranglement sur les liaisons du réseau. Il serait intéressant de réexaminer ces mesures lorsqu'un nombre croissant d'opérateurs auront déployé la prise en charge de la norme ORIGIN Frame sur leurs serveurs.</p>
	<p>Outre les performances, l'un des principaux avantages de la spécification ORIGIN Frame est la protection de la confidentialité. Comment cela ? Chaque connexion fusionnée dissimule les métadonnées du client qui, autrement, seraient divulguées par des connexions non fusionnées. Certaines ressources d'une page web sont chargées en fonction des interactions de l'utilisateur avec le site web. Cela signifie que pour chaque nouvelle connexion visant à obtenir une ressource sur le serveur, les métadonnées TLS transmises en clair, telles que le <a href="https://www.cloudflare.com/learning/ssl/what-is-sni" target="_blank">SNI</a> (en l'absence d'extension <a href="https://blog.cloudflare.com/encrypted-client-hello">Encrypted Client Hello</a>) et au moins une requête DNS transmise en clair (si celle-ci est transmise via UDP ou TCP sur le port 53) sont exposées au réseau. La fusion de connexions permet d'éviter la nécessité, pour les navigateurs, d'ouvrir de nouvelles connexions TLS, mais également d'effectuer des requêtes DNS supplémentaires. Elle permet ainsi d'éviter les fuites de métadonnées causées par d'éventuels utilisateurs espionnant le réseau. La norme ORIGIN Frame aide à minimiser ces signaux sur le chemin réseau, et améliore ainsi la confidentialité en réduisant la quantité d'informations transmises en clair divulguées aux espions présents sur le réseau.</p>
	<p>La réduction des calculs cryptographiques nécessaires à la vérification d'une multitude de certificats profite aux navigateurs, mais un avantage majeur de cette spécification découle du fait qu'elle offre des possibilités futures très intéressantes au regard de la planification des ressources au niveau des points de terminaison (c'est-à-dire des navigateurs et des serveurs d'origine) ; il s'agit notamment de la <a href="https://blog.cloudflare.com/better-http-3-prioritization-for-a-faster-web">gestion des priorités</a> ou encore de la prise en charge de propositions récentes telles que les indications <a href="https://blog.cloudflare.com/early-hints">HTTP Early Hints</a>, qui permettent de proposer aux clients des expériences dans lesquelles les connexions ne sont pas surchargées ou en concurrence pour accéder à ces ressources. Associée au projet <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2-secondary-certs-06#section-3.4" target="_blank">CERTIFICATE Frames</a> d'IETF, cette spécification permettrait par ailleurs d'éliminer la nécessité de modifier manuellement les certificats, car un serveur pourrait prouver son autorité sur les noms d'hôtes après l'établissement de la connexion sans qu'il soit nécessaire d'ajouter des entrées SAN supplémentaires au certificat TLS du site web.</p>
	<h3 id="conclusion-et-appel-%C3%A0-laction">Conclusion et appel à l'action</h3>
	<p>En résumé, l'écosystème actuel d'Internet offre de nombreuses opportunités de fusion de connexions, ne nécessitant qu'un nombre limité de modifications des certificats et des infrastructures de serveur. Les serveurs peuvent réduire considérablement (d'environ 50 %) le nombre de négociations TLS, tout en réduisant de plus de 60 % le nombre de requêtes DNS bloquant le rendu de pages. Ces avantages en matière de confidentialité sont également bénéfiques pour les clients, grâce à la réduction de l'exposition des informations DNS en clair aux observateurs présents sur le réseau.</p>
	<p>Pour que ces avantages deviennent une réalité, nous prévoyons actuellement d'ajouter la prise en charge des extensions ORIGIN Frame HTTP/2 et HTTP/3 pour nos clients. Nous encourageons également les autres opérateurs gérant des ressources tierces à adopter la prise en charge de la spécification ORIGIN Frame, afin d'améliorer l'écosystème d'Internet.</p>
	<p>Notre publication a été acceptée lors du forum ACM Internet Measurement Conference 2022 et est <a href="https://research.cloudflare.com/publications/Singanamalla2022" target="_blank">disponible en téléchargement</a>. Si vous souhaitez contribuer à des projets comme celui-ci, qui vous permettront d'assister à l'évaluation concrète de nouvelles normes, consultez notre <a href="https://www.cloudflare.com/careers" target="_blank">page d'offres d'emploi</a> !</p>
</div>