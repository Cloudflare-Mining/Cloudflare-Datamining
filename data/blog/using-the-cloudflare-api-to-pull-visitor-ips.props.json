{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "2",
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Damon Billian",
				"slug": "damon-billian",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/3HF5u3o1qzCDFGeEFwnXKt/f4377a20f464574383a597ca3072c80d/damon-billian.jpg",
				"location": null,
				"website": null,
				"twitter": null,
				"facebook": null
			}
		],
		"excerpt": "Many of our customers love CloudFlare's statistics report because the information available differs from other services providing analytics.\n\nOne frequent request is that customers would like to be able to look at the individual IP hits coming to their site. ",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/oYXvXSrfT3I1Eym7fHqqH/82a656edb7f9049259c98ef38870f876/using-the-cloudflare-api-to-pull-visitor-ips.jpg",
		"featured": false,
		"html": "<p><i>Note: This API feature no longer works. Please contact support if you have a question about current functions available via the CloudFlare API.</i></p><p>[</p><p>](<a href=\"http://www.flickr.com/photos/damonbillian/5641360814/\">http://www.flickr.com/photos/damonbillian/5641360814/</a> &quot;CloudFlare Recent IPs API blog post by dbillian, on Flickr&quot;)</p><p>Many of our customers love CloudFlare&#39;s statistics report because the information available differs from other services providing analytics.</p><p>One frequent request is that customers would like to be able to look at the individual IP hits coming to their site. This information can be useful if you see a sudden increase in traffic and want more insight into the origin. <a href=\"https://www.cloudflare.com/people.html\">Ian Pye</a>, CloudFlare&#39;s API and reporting guru, created a solution in the <a href=\"http://www.cloudflare.com/docs/client-api.html\">CloudFlare API</a>.</p><h4>How to use the API function to view recent visitor IPs within the past 48 hours:</h4><ol><li><p>Open Firefox and install the <a href=\"https://addons.mozilla.org/en-US/firefox/addon/jsonview/\">Firefox JSONview addon</a>. We recommend doing the API call in Firefox with the JSONview addon since the data output is easy to read.</p></li><li><p>Get your <a href=\"https://www.cloudflare.com/my-account.html\">API key</a> from your CloudFlare account.</p></li><li><p>Get your zone id by clicking on the &#39;Reports and Stats&#39; option for the domain you want to pull data for. The zone ID is at the end of the url on that page (zid=xxxx).</p></li><li><p>The API values from the <a href=\"http://www.cloudflare.com/docs/client-api.html\">Client Interface API</a> are as follows:</p><p>[a] = zone_ips</p><p>[tkn] = Your API Key</p><p>[email] = <a href=\"mailto:abc@example.com\">abc@example.com</a> (use the one associated with your CloudFlare account)</p><p>[zid] = ID of the zone you would like to check.</p><p>[hours] = Number of hours to go back. Default is 24, max is 48.</p><p>[class] = (Optional) Restrict the result set to a given class. Currently r|s|t, for regular, crawler, threat respectively. If you omit this token you will see the results for all visitors.</p><p>[geo] = (Optional) Include to add longitude and latitude information to the response. 0,0 means no data.</p></li></ol><p>The URL is:<a href=\"https://www.cloudflare.com/api_json.html\">https://www.cloudflare.com/api_json.html</a></p><p>​5. So, you are now ready to run the query. Open your Firefox browser, and run the following function, but insert the data from steps 1 through 3 for your particular site:<a href=\"https://www.cloudflare.com/api_json.html?a=zone_ips&tkn=\">https://www.cloudflare.com/api_json.html?a=zone_ips&amp;tkn=</a>InsertYourAPIKey&amp;email=<a href=\"mailto:abc@example.com\">abc@example.com</a>&amp;zid=1228&amp;hours=36&amp;geo</p><p>The variables listed in blue are the ones that you should customize for your particular site.</p><p>​6. The data output will list the IPs in order from the most number of hits in the selected time period to the least. You will also be able to see the visitor classified by type.</p><p>One thing to note is that for Free accounts, you will only be able to see data older than 24 hours. For Pro accounts, you can see data in thelast 24 hours as well.</p><p>In terms of what you can do with the data, if you see a lot of requests coming a certain IP in a short period of time, you may determine it is an attack. In that case, you should add it to your Block List in your <a href=\"https://www.cloudflare.com/threat-control.html\">CloudFlare Threat Control</a> panel. By adding the IP to the Block List, the visitor will be stopped from accessing your server reducing your server load.</p><p>Have any suggestions for improving the API? Have something cool that you&#39;ve done with the CloudFlare API that you would like to share with the rest of the community? We&#39;d love to hear about it. <a href=\"https://www.cloudflare.com/contact.html\">Share it</a> with us.</p>",
		"id": "gMWPmyqrijKuZH3dfJmyp",
		"localeList": {
			"name": "Using the CloudFlare API to pull visitor IPs Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": null,
		"metadata": {
			"imgPreview": ""
		},
		"primary_author": {},
		"published_at": "2011-04-21T17:52:00.000+01:00",
		"slug": "using-the-cloudflare-api-to-pull-visitor-ips",
		"tags": [
			{
				"id": "2OotqBxtRdi5MuC90AlyxE",
				"name": "Analytics",
				"slug": "analytics"
			},
			{
				"id": "5x72ei67SoD11VQ0uqFtpF",
				"name": "API",
				"slug": "api"
			}
		],
		"title": "Using the CloudFlare API to pull visitor IPs",
		"updated_at": "2024-08-27T02:55:00.003Z",
		"url": "https://blog.cloudflare.com/using-the-cloudflare-api-to-pull-visitor-ips"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}