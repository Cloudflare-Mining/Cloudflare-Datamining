<div class="mb2 gray5">9 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/12/http3-tube@2x-2.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Com mais de trinta anos, o HTTP ainda é a base da web e um dos protocolos mais populares da internet, não apenas para navegar, assistir a vídeos e ouvir música, mas também para aplicativos, comunicação máquina a máquina e até mesmo como base para a construção de outros protocolos, formando o que alguns chamam de “segunda cintura” no clássico diagrama de ampulheta da internet.</p>
	<p>O que torna o HTTP tão bem-sucedido? Uma resposta é que ele atinge um “ponto ideal” para a maioria dos aplicativos que precisam de um protocolo de aplicativos. “<a href="https://httpwg.org/specs/rfc9205.html" target="_blank">Building Protocols with HTTP</a>” (publicado em 2022 como um Best Current Practice RFC pelo <a href="https://httpwg.org" target="_blank">HTTP Working Group</a>) argumenta que o sucesso do HTTP pode ser atribuído a fatores como:</p>
	<p>- familiaridade dos implementadores, especificadores, administradores, desenvolvedores e usuários;<br>- disponibilidade de uma variedade de implementações de cliente, servidor e proxy;<br>- fácil de usar;<br>- disponibilidade de navegadores web;<br>- reutilização de mecanismos existentes como autenticação e criptografia;<br>- presença de servidores e clientes HTTP em implantações desejadas; e<br>- sua capacidade de atravessar firewalls.</p>
	<p>Outro fator importante é a comunidade de pessoas que usam, implementam e padronizam o HTTP. Trabalhamos juntos para manter e desenvolver o protocolo ativamente, para garantir que ele seja interoperável e atenda às necessidades atuais. Se o HTTP não for desenvolvido, outro protocolo o substituirá (justificadamente) e perderemos todo o investimento da comunidade, entendimento compartilhado e interoperabilidade.</p>
	<p>A Cloudflare e muitos outros fazem isso enviando engenheiros para <a href="https://blog.cloudflare.com/cloudflare-and-the-ietf">participar do IETF</a>, onde a maioria dos protocolos da internet é discutida e padronizada. Também participamos e patrocinamos eventos da comunidade, como o <a href="https://httpwork.shop" target="_blank">HTTP Workshop</a>, para conversar sobre os problemas que as pessoas têm, o que precisam e entender quais mudanças podem ajudá-las.</p>
	<p>Então, o que aconteceu em todas as reuniões do Working Group, documentos de especificação e eventos paralelos em 2022? O que os implementadores e implantadores do protocolo da web estão fazendo? E o que vem a seguir?</p>
	<h3 id="nova-especifica-o-http-3">Nova especificação: HTTP/3</h3>
	<p>Em termos de especificação, o grande acontecimento em 2022 foi a publicação do HTTP/3, pois foi um grande passo para atender às exigências dos aplicativos e sites modernos, usando a rede de forma mais eficiente para desbloquear o desempenho da web.</p>
	<p>Nos anos 90, o HTTP/0.9 e o HTTP/1.0 usavam uma nova conexão TCP para cada solicitação, um uso incrivelmente ineficiente da rede. O HTTP/1.1 introduziu conexões persistentes (cujos backports para HTTP/1.0 foram feitos com o cabeçalho "Connection: Keep-Alive"). Essa foi uma melhoria que ajudou os servidores e a rede a lidar com a popularidade explosiva da web, mas, mesmo naquela época, a comunidade sabia que ela tinha limitações significativas, em particular, o bloqueio de cabeçalho de linha (onde uma solicitação pendente em uma conexão bloqueia a conclusão de outras).</p>
	<p>Isso não importava tanto nos anos 90 e no início dos anos 2000, mas as páginas web e os aplicativos de hoje impõem demandas à rede que tornam essas limitações essenciais para o desempenho. As páginas geralmente têm centenas de ativos que competem por recursos de rede, e o HTTP/1.1 não estava à altura da tarefa. Depois de alguns <a href="https://www.w3.org/Protocols/HTTP-NG" target="_blank">falsos começos</a>, a comunidade finalmente <a href="https://blog.cloudflare.com/http-2-for-web-developers">resolveu esses problemas com o HTTP/2 em 2015</a>.</p>
	<p>No entanto, a remoção do bloqueio de cabeçalho de linha no HTTP expôs o mesmo problema uma camada abaixo, no TCP. Como o TCP é um protocolo de entrega confiável e em sequência, a perda de um único pacote em um fluxo pode bloquear o acesso àqueles que estão depois dele, mesmo que estejam nos buffers do sistema operacional. Isso acaba sendo um problema real para a implantação de HTTP/2, especialmente em redes que estão abaixo do ideal.</p>
	<p>A resposta, é claro, foi substituir o TCP, o respeitável protocolo de transporte sobre o qual grande parte da internet é construída. Após muita discussão e muitos esboços no <a href="https://quicwg.org" target="_blank">QUIC Working Group</a>, <a href="https://blog.cloudflare.com/quic-version-1-is-live-on-cloudflare">a versão 1 do QUIC foi publicada como substituição</a> em 2021.</p>
	<p>O HTTP/3 é a versão do HTTP que usa o QUIC. Embora o Working Group o tenha concluído efetivamente em 2021, junto com o QUIC, ele não foi publicado até 2022 para sincronizar com a publicação de outros documentos (veja abaixo). 2022 também foi um <a href="https://blog.cloudflare.com/cloudflare-view-http3-usage">ano marcante para a implantação do HTTP/3</a>; a Cloudflare observou <a href="https://radar.cloudflare.com/adoption-and-usage?range=28d" target="_blank">uma crescente adoção e confiança</a> no novo protocolo.</p>
	<p>Embora tenha havido apenas um breve intervalo de alguns anos entre o HTTP/2 e o HTTP/3, na comunidade não há muita inclinação para trabalhar com HTTP/4 tão cedo. O QUIC e o HTTP/3 são novos e o mundo ainda está aprendendo a melhor forma de implementar, operar e construir sites e aplicativos que usem estes protocolos. Embora não possamos descartar uma limitação, que vai obrigar o desenvolvimento de uma nova versão no futuro, o IETF criou esses protocolos com base na ampla experiência do setor com redes modernas e eles possuem extensibilidade significativa disponível para facilitar as alterações necessárias.</p>
	<h3 id="novas-especifica-es-http-core-">Novas especificações: HTTP “core”</h3>
	<p>O outro evento principal para as especificações do HTTP em 2022 foi a publicação de seus documentos “core”, o centro das especificações do HTTP. Os core incluem: <a href="https://httpwg.org/specs/rfc9110.html" target="_blank">Semântica HTTP</a> – coisas como métodos, cabeçalhos, códigos de status e o formato da mensagem; <a href="https://httpwg.org/specs/rfc9111.html" target="_blank">Cache HTTP</a> - como funcionam os caches HTTP; <a href="https://httpwg.org/specs/rfc9112.html" target="_blank"> HTTP/1.1</a> - mapeamento da semântica para o fio, usando o formato que todos conhecem e adoram.</p>
	<p>Além disso, o <a href="https://httpwg.org/specs/rfc9113.html" target="_blank">HTTP/2 foi republicado</a> para se integrar de forma adequada ao documento Semantics e para corrigir alguns problemas pendentes.</p>
	<p>Esta é a mais recente, de uma longa série de revisões desses documentos. No passado, tivemos a série RFC 723x, a (talvez a mais conhecida) RFC 2616, RFC 2068 e a avó de todas, RFC 1945. Cada revisão visa melhorar a legibilidade, corrigir erros, explicar melhor os conceitos e esclarecer a operação do protocolo. Recursos mal especificados (ou implementados) são descontinuados; novos recursos que melhoram a operação do protocolo são adicionados. Consulte o apêndice "Changes from..." em cada documento para obter os detalhes. E, mais importante, sempre consulte as revisões mais recentes nos links acima; as RFCs mais antigas agora estão descontinuadas.</p>
	<h3 id="implantar-o-early-hints">Implantar o Early Hints</h3>
	<p>O HTTP/2 incluía o <em>server push</em>, um recurso projetado para permitir que os servidores “empurrassem” um par solicitação/resposta para os clientes quando sabiam que o cliente precisava de algo, para evitar a ocorrência de latência ao fazer uma solicitação e aguardar a resposta.</p>
	<p>Depois que o HTTP/2 foi finalizado em 2015, a Cloudflare e muitas outras implementações de HTTP logo <a href="https://blog.cloudflare.com/announcing-support-for-http-2-server-push-2">lançaram o server push</a> em antecipação a grandes ganhos de desempenho. Infelizmente, descobriu-se que é mais difícil do que parece; o server push efetivamente requer que o servidor preveja o futuro, não apenas quais solicitações o cliente vai enviar, mas também quais vão ser as condições da rede. E, quando o servidor erra (“over-pushing”), as solicitações enviadas competem diretamente com as solicitações reais que o navegador está fazendo, representando um custo de oportunidade significativo com a possibilidade real de prejudicar o desempenho, em vez de ajudá-lo. O impacto é ainda pior quando o navegador já tem uma cópia em cache, então não precisa de push de forma nenhuma.</p>
	<p>Como resultado, o <a href="https://developer.chrome.com/blog/removing-push" target="_blank">Chrome removeu o push do servidor HTTP/2 em 2022</a>. Outros navegadores e servidores ainda podem ser compatíveis com ele, mas a comunidade parece concordar que, atualmente, ele é adequado apenas para usos especializados, como o <a href="https://www.rfc-editor.org/rfc/rfc8030.html" target="_blank">Web Push Protocol</a> específico para notificações do navegador.</p>
	<p>No entanto, isso não significa que estamos desistindo. O código de status <a href="https://httpwg.org/specs/rfc8297.html" target="_blank">103 (Early Hints)</a> foi publicado como uma RFC experimental pelo HTTP Working Group em 2017. Ela permite que um servidor envie <em>sugestões</em> para o navegador em uma resposta não final, antes da resposta final “real”. Isso é útil se você sabe que o conteúdo vai incluir alguns links para recursos que o navegador vai buscar, mas precisa de mais tempo para obter a resposta para o cliente (porque vai levar mais tempo para gerar ou porque o servidor precisa buscar de outro lugar, como uma CDN faz).</p>
	<p>O Early Hints pode ser usado em muitas situações para as quais o server push foi projetado, por exemplo, quando você tem CSS e JavaScript que uma página precisa carregar. Em teoria, ele não é tão bom como o push do servidor, porque só permite que as sugestões sejam enviadas quando há uma solicitação pendente e porque enviar as sugestões para o cliente e acioná-las adiciona alguma latência.</p>
	<p>Na prática, porém, a Cloudflare e nossos parceiros (como Shopify e Google) passaram 2022 experimentando o Early Hints e descobrindo que é muito mais seguros de usar, com <a href="https://blog.cloudflare.com/early-hints-performance">benefícios de desempenho promissores</a> que incluem reduções significativas nas principais métricas de desempenho da web.</p>
	<p>Estamos entusiasmados com o potencial que o Early Hints demonstra; tão empolgados que o <a href="https://blog.cloudflare.com/early-hints-on-cloudflare-pages">integramos ao Cloudflare Pages</a>. Também estamos avaliando novas maneiras de melhorar o desempenho usando esse novo recurso no protocolo.</p>
	<h3 id="intermedia-o-focada-em-privacidade">Intermediação focada em privacidade</h3>
	<p>Para muitos, as extensões do protocolo HTTP mais interessantes em 2022 se concentraram na intermediação, a capacidade de inserir proxies, gateways e componentes semelhantes no protocolo para atingir objetivos específicos, geralmente focados em melhorar a privacidade.</p>
	<p>O <a href="https://ietf-wg-masque.github.io" target="_blank">MASQUE Working Group</a>, por exemplo, é um esforço para adicionar novos recursos de tunelamento ao HTTP, para que um intermediário possa passar o tráfego através de tunelamento para outro servidor.</p>
	<p>Apesar de o CONNECT ter habilitado os túneis TCP por um longo tempo, o MASQUE habilitou os <a href="https://datatracker.ietf.org/doc/html/rfc9298" target="_blank">túneis UDP</a>, permitindo que o tunelamento de mais protocolos seja feito com mais eficiência, incluindo QUIC e HTTP/3.</p>
	<p>Na Cloudflare, estamos entusiasmados por trabalhar com a Apple para usar o MASQUE para implementar o <a href="https://blog.cloudflare.com/icloud-private-relay">iCloud Private Relay</a> e aprimorar a privacidade de seus clientes sem depender apenas de uma empresa. Também estamos muito interessados no trabalho futuro do Working Group, incluindo <a href="https://blog.cloudflare.com/unlocking-quic-proxying-potential">tunelamento de IP</a> que vai tornar possível VPNs baseadas em MASQUE.</p>
	<p>Outra especificação focada em intermediação é o <a href="https://www.ietf.org/archive/id/draft-ietf-ohai-ohttp-06.html" target="_blank">Oblivious HTTP</a> (ou OHTTP). O OHTTP usa conjuntos de intermediários para evitar que o servidor use conexões ou endereços de IP para rastrear clientes, dando maiores garantias de privacidade para coisas como coleta de telemetria ou outros dados confidenciais. Essa especificação está apenas finalizando o processo de padronização e a estamos usando para criar um novo produto importante, o <a href="https://blog.cloudflare.com/building-privacy-into-internet-standards-and-how-to-make-your-app-more-private-today">Privacy Gateway</a>, para proteger a privacidade dos clientes de nossos clientes.</p>
	<p>Nós e muitos outros na comunidade da internet acreditamos que este é apenas o começo, porque a intermediação pode particionar a comunicação, uma <a href="https://intarchboard.github.io/draft-obliviousness/draft-kpw-iab-privacy-partitioning.html" target="_blank">ferramenta valiosa para melhorar a privacidade</a>.</p>
	<h3 id="seguran-a-do-protocolo">Segurança do protocolo</h3>
	<p>Por fim, em 2022 observamos muito trabalho em aspectos relacionados à segurança do HTTP. A especificação <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-digest-headers.html" target="_blank">Digest Fields</a> é uma atualização do agora antigo campo de cabeçalho "Digest", permitindo que resumos de integridade sejam adicionados às mensagens. A especificação de <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-message-signatures.html" target="_blank">assinaturas de mensagens HTTP</a> permite assinaturas criptográficas em solicitações e respostas, algo que tem implantação ad hoc generalizada, mas até agora carecia de um padrão. Ambas as especificações estão em fase final de padronização.</p>
	<p>Uma <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-rfc6265bis.html" target="_blank">revisão da especificação dos Cookies</a> também teve muito progresso em 2022 e deve ser finalizada em breve. Como não é possível eliminá-los completamente em um curto espaço de tempo, muito trabalho foi feito para limitar como eles operam para melhorar a privacidade e a segurança, incluindo um novo atributo "SameSite".</p>
	<p>Outro conjunto de especificações relacionadas à segurança em que a Cloudflare <a href="https://blog.cloudflare.com/cloudflare-supports-privacy-pass">investe há muitos anos</a> é o <a href="https://www.ietf.org/archive/id/draft-ietf-privacypass-architecture-09.html" target="_blank">Privacy Pass</a>, também conhecido como “Private Access Tokens”. Eles são tokens criptográficos que podem garantir que os clientes são pessoas reais, não bots, sem usar um CAPTCHA intrusivo e sem rastrear a atividade do usuário on-line. No HTTP, eles assumem a forma de um <a href="https://www.ietf.org/archive/id/draft-ietf-privacypass-auth-scheme-07.html" target="_blank">novo esquema de autenticação</a>.</p>
	<p>Embora o Privacy Pass ainda não tenha passado pelo processo de padrões, 2022 viu sua <a href="https://blog.cloudflare.com/eliminating-captchas-on-iphones-and-macs-using-new-standard">ampla implantação pela Apple</a>, um grande passo à frente. E como a <a href="https://blog.cloudflare.com/pt-br/turnstile-private-captcha-alternative-pt-br">Cloudflare o utiliza no Turnstile</a>, nossa alternativa ao CAPTCHA, seus usuários podem ter uma experiência melhor hoje.</p>
	<h3 id="e-o-que-esperar-em-2023">E o que esperar em 2023?</h3>
	<p>Então o que vem depois? Além das especificações acima, que ainda não estão totalmente concluídas, o HTTP Working Group tem alguns outros trabalhos em andamento, incluindo um <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html" target="_blank">método QUERY</a> (pense em GET, mas com um corpo), <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-resumable-upload.html" target="_blank">Resumable Uploads</a> (baseado em <a href="https://tus.io" target="_blank">tus</a>), <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-variants.html" target="_blank">Variants</a> (um cabeçalho Vary aprimorado para armazenamento em cache), <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-sfbis.html" target="_blank">melhorias nos Structured Fields</a> (incluindo um novo tipo de Date) e uma maneira de <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-retrofit.html" target="_blank">adaptar os cabeçalhos existentes aos Structured Fields</a>. Escreveremos mais sobre eles à medida que avançam em 2023.</p>
	<p>No <a href="https://github.com/HTTPWorkshop/workshop2022/blob/main/report.md" target="_blank">2022 HTTP Workshop</a>, a comunidade também falou sobre o novo trabalho que podemos realizar para melhorar o protocolo. Algumas ideias discutidas incluíram melhorar nossa infraestrutura compartilhada de testes de protocolo (já temos <a href="https://github.com/httpwg/wiki/wiki/HTTP-Testing-Resources" target="_blank">alguns recursos</a>, mas poderia ser muito melhor), melhorar (ou substituir) <a href="https://httpwg.org/specs/rfc7838.html" target="_blank"> Alternative Services</a> para permitir um gerenciamento de conexão mais inteligente e correto e mudanças mais radicais, como <a href="https://mnot.github.io/I-D/draft-nottingham-binary-structured-headers.html" target="_blank">serializações alternativas e binárias de cabeçalhos</a>.</p>
	<p>Há também uma discussão contínua na comunidade sobre se o HTTP deve acomodar pub/sub, ou se deve ser padronizado para funcionar em WebSockets (e em breve, WebTransport). Embora seja difícil dizer agora, o trabalho adjacente sobre <a href="https://datatracker.ietf.org/group/moq/about" target="_blank">Media over QUIC</a>, que acabou de começar <em>pode</em> fornecer uma oportunidade para levar isso adiante.</p>
	<p>Claro, isso não é tudo. Ainda tem muito a ser visto sobre o que vai acontecer com o HTTP em 2023 (e além). O HTTP ainda está evoluindo, mesmo permanecendo compatível com o maior sistema de hipertexto distribuído já concebido, a World Wide Web.</p>
</div>