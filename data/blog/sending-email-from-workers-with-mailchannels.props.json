{
	"locale": "en-us",
	"post": {
		"id": "627d5e74651595000a704f1b",
		"uuid": "9d923a59-c687-4f38-8936-f0183850c00e",
		"title": "Send email using Workers with MailChannels",
		"slug": "sending-email-from-workers-with-mailchannels",
		"html": "<figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2022/05/Send-email-from-Workers.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>Here at Cloudflare we often talk about HTTP and related protocols as we work to help build a better Internet. However, the Simple Mail Transfer Protocol (SMTP) — used to send emails — is still a massive part of the Internet too.</p><p>Even though SMTP is turning 40 years old this year, most businesses still rely on email to validate user accounts, send notifications, announce new features, and more.</p><p>Sending an email is simple from a technical standpoint, but getting an email actually delivered to an inbox can be extremely tricky. Because of the enormous amount of spam that is sent every single day, all major email providers are very wary of things like new domains and IP addresses that start sending emails.</p><p>That is why we are delighted to announce a partnership with <a href=\"https://mailchannels.com\">MailChannels</a>. MailChannels has created an email sending service specifically for Cloudflare Workers that removes all the friction associated with sending emails. To use their service, you do not need to validate a domain or create a separate account. MailChannels filters spam <strong>before</strong> sending out an email, so you can feel safe putting user-submitted content in an email and be confident that it won’t ruin your domain reputation with email providers. But the absolute best part? Thanks to our friends at MailChannels, it is completely free to send email.</p><blockquote>In the words of their CEO Ken Simpson: <em>“Cloudflare Workers and Pages are changing the game when it comes to ease of use and removing friction to get started. So when we sat down to see what friction we could remove from sending out emails, it turns out that with our incredible anti-spam and anti-phishing, the answer is “everything\". We can’t wait to see what applications the community is going to build on top of this.”</em></blockquote><p>The only constraint currently is that the integration only works when the request comes from a Cloudflare IP address. So it won’t work yet when you are developing on your local machine or running a test on your build server.</p><p>First let’s walk you through how to send out your first email using a Worker.</p><pre><code class=\"language-js\">export default {\n  async fetch(request) {\n    send_request = new Request('https://api.mailchannels.net/tx/v1/send', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        personalizations: [\n          {\n            to: [{ email: 'test@example.com', name: 'Test Recipient' }],\n          },\n        ],\n        from: {\n          email: 'sender@example.com',\n          name: 'Workers - MailChannels integration',\n        },\n        subject: 'Look! No servers',\n        content: [\n          {\n            type: 'text/plain',\n            value: 'And no email service accounts and all for free too!',\n          },\n        ],\n      }),\n    })\n  },\n}\n</code></pre><p>That is all there is to it. You can modify the example to make it send whatever email you want.</p><p>The MailChannels integration makes it easy to send emails to and from anywhere with Workers. However, we also wanted to make it easier to send emails to yourself from a form on your website. This is perfect for quickly and painlessly setting up pages such as “Contact Us” forms, landing pages, and sales inquiries.</p><p>The <a href=\"http://blog.cloudflare.com/cloudflare-pages-plugins/\">Pages Plugin Framework</a> that we announced earlier this week allows other people to email you without exposing your email address. </p><p>The only thing you need to do is copy and paste the following code snippet in your <code>/functions/_middleware.ts</code> file. Now, every form that has the <code>data-static-form-name</code> attribute will automatically be emailed to you. </p><pre><code class=\"language-typescript\">import mailchannelsPlugin from \"@cloudflare/pages-plugin-mailchannels\";\n\nexport const onRequest = mailchannelsPlugin({\n  personalizations: [\n    {\n      to: [{ name: \"ACME Support\", email: \"hello@example.com\" }],\n    },\n  ],\n  from: { name: \"Enquiry\", email: \"no-reply@example.com\" },\n  respondWith: () =&gt;\n    new Response(null, {\n      status: 302,\n      headers: { Location: \"/thank-you\" },\n    }),\n});\n</code></pre><p>Here is an example of what such a form would look like. You can make the form as complex as you like, the only thing it needs is the <code>data-static-form-name</code> attribute. You can give it any name you like to be able to distinguish between different forms.</p><pre><code class=\"language-html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Contact&lt;/h1&gt;\n    &lt;form data-static-form-name=\"contact\"&gt;\n      &lt;div&gt;\n        &lt;label&gt;Name&lt;input type=\"text\" name=\"name\" /&gt;&lt;/label&gt;\n      &lt;/div&gt;\n      &lt;div&gt;\n        &lt;label&gt;Email&lt;input type=\"email\" name=\"email\" /&gt;&lt;/label&gt;\n      &lt;/div&gt;\n      &lt;div&gt;\n        &lt;label&gt;Message&lt;textarea name=\"message\"&gt;&lt;/textarea&gt;&lt;/label&gt;\n      &lt;/div&gt;\n      &lt;button type=\"submit\"&gt;Send!&lt;/button&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>So as you can see there is no barrier left when it comes to sending out emails. You can copy and paste the above Worker or Pages code into your projects and immediately start to send email for free.</p><p>If you have any questions about using MailChannels in your Workers, or want to learn more about Workers in general, please join our <a href=\"https://discord.gg/cloudflaredev\">Cloudflare Developer Discord server</a>.</p>",
		"comment_id": "627d5e74651595000a704f1b",
		"feature_image": "http://blog.cloudflare.com/content/images/2022/05/image1-35.png",
		"featured": false,
		"visibility": "public",
		"created_at": "2022-05-12T20:22:28.000+01:00",
		"updated_at": "2024-02-15T23:04:39.000+00:00",
		"published_at": "2022-05-13T13:59:19.000+01:00",
		"custom_excerpt": "MailChannels has created an email sending service specifically for Cloudflare Workers that removes all the friction associated with sending emails",
		"codeinjection_head": null,
		"codeinjection_foot": null,
		"custom_template": null,
		"canonical_url": null,
		"tags": [
			{
				"id": "627d5ef0651595000a704f20",
				"name": "#BLOG-1077",
				"slug": "hash-blog-1077",
				"description": null,
				"feature_image": null,
				"visibility": "internal",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/404/"
			},
			{
				"id": "6276b1455b2938000ab48480",
				"name": "Platform Week",
				"slug": "platform-week",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/platform-week/"
			},
			{
				"id": "5d16450341acde0011a95253",
				"name": "Cloudflare Workers",
				"slug": "workers",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/workers/"
			},
			{
				"id": "5d16450341acde0011a95252",
				"name": "Serverless",
				"slug": "serverless",
				"description": null,
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Serverless.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Serverless",
				"meta_description": "Cloudflare blog posts tagged 'serverless'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/serverless/"
			},
			{
				"id": "5d16450341acde0011a95204",
				"name": "Developers",
				"slug": "developers",
				"description": null,
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Developers-1.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Developers",
				"meta_description": "Collection of Cloudflare blog posts tagged 'Developers'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/developers/"
			},
			{
				"id": "5d16450341acde0011a951ee",
				"name": "Product News",
				"slug": "product-news",
				"description": "Product News (EN)",
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Product-News-1.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Product News",
				"meta_description": "Collection of Cloudflare blog posts tagged 'Product News'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/product-news/"
			},
			{
				"id": "64a3e2b834124c000b00b717",
				"name": "Developer Platform",
				"slug": "developer-platform",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/developer-platform/"
			}
		],
		"authors": [
			{
				"id": "6074c68ed70b2301ba26c444",
				"name": "Erwin van der Koogh",
				"slug": "erwin",
				"profile_image": "http://blog.cloudflare.com/content/images/2021/04/twitter-profile-photo.jpeg",
				"cover_image": null,
				"bio": null,
				"website": null,
				"location": "Melbourne",
				"facebook": null,
				"twitter": "@evanderkoogh",
				"meta_title": null,
				"meta_description": null,
				"url": "http://blog.cloudflare.com/author/erwin/"
			}
		],
		"primary_author": {
			"id": "6074c68ed70b2301ba26c444",
			"name": "Erwin van der Koogh",
			"slug": "erwin",
			"profile_image": "http://blog.cloudflare.com/content/images/2021/04/twitter-profile-photo.jpeg",
			"cover_image": null,
			"bio": null,
			"website": null,
			"location": "Melbourne",
			"facebook": null,
			"twitter": "@evanderkoogh",
			"meta_title": null,
			"meta_description": null,
			"url": "http://blog.cloudflare.com/author/erwin/"
		},
		"primary_tag": null,
		"url": "http://blog.cloudflare.com/sending-email-from-workers-with-mailchannels/",
		"excerpt": "MailChannels has created an email sending service specifically for Cloudflare Workers that removes all the friction associated with sending emails",
		"reading_time": 3,
		"access": true,
		"comments": false,
		"og_image": "http://blog.cloudflare.com/content/images/2022/05/Send-email-using-Workers-with-MailChannels-OG-1.png",
		"og_title": null,
		"og_description": null,
		"twitter_image": "http://blog.cloudflare.com/content/images/2022/05/Send-email-using-Workers-with-MailChannels-OG.png",
		"twitter_title": null,
		"twitter_description": null,
		"meta_title": null,
		"meta_description": "MailChannels has created an email sending service specifically for Cloudflare Workers that removes all the friction associated with sending emails.",
		"email_subject": null,
		"frontmatter": null,
		"feature_image_alt": null,
		"feature_image_caption": null
	}
}