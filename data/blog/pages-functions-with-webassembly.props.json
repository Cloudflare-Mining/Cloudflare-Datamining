{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "3",
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Carmen Popoviciu",
				"slug": "carmen",
				"bio": "I am a systems engineer on the Pages team. I enjoy building things on the web and being involved in the developer community.",
				"profile_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3erUcRopiA9MmArIyQ8eoR/ea6f98d36f567630fc626ff90c2f6e28/carmen.png",
				"location": "Amsterdam, The Netherlands",
				"website": null,
				"twitter": "@carmenpopoviciu",
				"facebook": null,
				"publiclyIndex": true
			}
		],
		"excerpt": "Today Pages is excited to offer support for WebAssembly when writing a Pages Function",
		"feature_image": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/7eWiuW2wn8OD7KPDTn0PAA/0451c9180366f0c812f4eadee3171229/pages-functions-with-webassembly.png",
		"featured": false,
		"html": "<p></p><p>On the Cloudflare Developer Platform, we understand that building any application is a unique experience for every developer. We know that in the developer ecosystem there are a plethora of tools to choose from and as a developer you have preferences and needs. We don’t believe there are “right” or “wrong” tools to use in development and want to ensure a good developer experience no matter your choices. We believe in meeting you where you are.</p><p>When Pages Functions moved to <a href=\"/pages-function-goes-ga/\">Generally Available in November of last year</a>, we knew it was the key that unlocks a variety of use cases – namely full-stack applications! However, we still felt we could do more to provide the flexibility for you to build what you want and how you want.</p><p>That’s why today we’re opening the doors to developers who want to build their server side applications with something other than JavaScript. We’re excited to announce WebAssembly support for Pages Functions projects!</p><p><a href=\"https://webassembly.org/\"><b>WebAssembly</b></a> <b>(or Wasm)</b> is a low-level assembly-like language that can run with near-native performance. It provides programming languages such as C/C++, C# or Rust with a compilation target, enabling them to run alongside JavaScript. Primarily designed to run on the <a href=\"https://webassembly.org/docs/web/\">web</a> (though <a href=\"https://webassembly.org/docs/non-web/\">not exclusively</a>), WebAssembly opens up exciting opportunities for applications to run on the web platform, both on the client and the server, that up until now couldn&#39;t have done so.</p><p>With Pages Functions being Workers “under the hood” and Workers having <a href=\"/workers-javascript-modules/\">Wasm module support</a> for quite <a href=\"/webassembly-on-cloudflare-workers/\">some time</a>, it is only natural that Pages provides a similar experience for our users as well. While not all use cases are a good fit for Wasm, there are <a href=\"https://webassembly.org/docs/use-cases/\">many</a> that are. Our goal with adding Wasm support is enabling those use cases and expanding the boundaries of what Functions can build.</p>\n    <div class=\"flex anchor relative\">\n      <h3 id=\"using-webassembly-in-pages-functions\">Using WebAssembly in Pages Functions</h3>\n      <a href=\"#using-webassembly-in-pages-functions\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>WebAssembly in Pages Functions works very similar to how it does today in Workers — we read <code>wasm</code> files as WebAssembly modules, ready for you to import and use directly from within your Functions. In short, like this:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">// functions/api/distance-between.js\n\nimport wasmModule from &quot;../../pkg/distance.wasm&quot;;\n\nexport async function onRequest({ request }) {\n  const moduleInstance = await WebAssembly.instantiate(wasmModule);\n  const distance = await moduleInstance.exports.distance_between();\n\n  return new Response(distance);\n}</pre></code>\n            <p>Let’s briefly unpack the code snippet above to highlight some things that are important to understand.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">import wasmModule from &quot;../../pkg/distance.wasm&quot;;</pre></code>\n            <p>Pages makes no assumptions as to how the binary <code>.wasm</code> files you want to import were compiled. In our example above, <code>distance.wasm</code> can be a file you compiled yourself out of code you wrote, or equally, a file provided in a third-party library’s distribution. The only thing Pages cares about is that <code>distance.wasm</code> is a compiled <a href=\"https://webassembly.github.io/spec/core/binary/conventions.html\">binary</a> Wasm <a href=\"https://webassembly.github.io/spec/core/binary/modules.html\">module</a> file.</p><p>The result of that import is a <a href=\"https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/Module\"><code>WebAssembly.Module</code></a> object, which you can then <a href=\"https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/instantiate\">instantiate</a>:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">const moduleInstance = await WebAssembly.instantiate(wasmModule);</pre></code>\n            <p>Once the <a href=\"https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/Instance\"><code>WebAssembly.Instance</code></a> object is created, you can start using whatever features your Wasm module <a href=\"https://webassembly.github.io/spec/core/syntax/modules.html#syntax-export\"><code>exports</code></a>, inside your Functions code:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">const distance = await moduleInstance.exports.distance_between();</pre></code>\n            \n    <div class=\"flex anchor relative\">\n      <h3 id=\"more-modules-more-fun\">More modules, more fun!</h3>\n      <a href=\"#more-modules-more-fun\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Apart from Wasm modules, this work unlocks support for two other module types that you can import within your Functions code: <b>text</b> and <b>binary</b>. These are not standardized modules, but can be very handy if you need to import raw text blobs (such as HTML files) as a <code>string</code>:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">// functions/my-function.js\nimport html from &quot;404.html&quot;;\n\nexport async function onRequest() {\n  return new Response(html,{\n    headers: { &quot;Content-Type&quot;: &quot;text/html&quot; }\n  });\n}</pre></code>\n            <p>or raw data blobs (such as images) as an <code>ArrayBuffer</code>.</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">// functions/my-function.js\nimport image from &quot;../hearts.png.bin&quot;;\n\nexport async function onRequest() {\n  return new Response(image,{\n    headers: { &quot;Content-Type&quot;: &quot;image/png&quot; }\n  });\n}</pre></code>\n            \n    <div class=\"flex anchor relative\">\n      <h3 id=\"the-distance-between-us-on-the-surface-of-earth\">The distance between us on the surface of Earth</h3>\n      <a href=\"#the-distance-between-us-on-the-surface-of-earth\" aria-hidden=\"true\" class=\"relative sm:absolute sm:-left-5\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentcolor\" d=\"m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z\"></path></svg>\n      </a>\n    </div>\n    <p>Let’s take a look at a live example to see it all in action! We’ve built a small <a href=\"https://pages-with-wasm-demo.pages.dev/\">demo app</a> that walks you through an example of Functions with WebAssembly end-to-end. You can check out the code of our demo application available on <a href=\"https://github.com/cloudflare/pages-fns-with-wasm-demo\">GitHub</a>.</p><p>The application computes the distance in kilometers on the surface of Earth between your current location (based on the geo coordinates of the incoming <a href=\"https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties\">request</a>) and any other point on the globe, each time you click on the globe&#39;s surface.</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4ZkZSyM2pJghHYzcwgfw3T/3c3609ec59bb6589d7a575177cbf602e/image3-31.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"1079\" loading=\"lazy\"/>\n            \n            </figure><p>The code that performs the actual high-performance distance calculation is written in Rust, and is a slight adaptation of the <a href=\"https://rust-lang-nursery.github.io/rust-cookbook/science/mathematics/trigonometry.html#distance-between-two-points-on-the-earth\">example</a> provided in the <a href=\"https://rust-lang-nursery.github.io/rust-cookbook/\">Rust cookbook</a>:</p>\n            <pre class=\"language-rust\"><code class=\"language-rust\">fn distance_between(from_latitude_degrees: f64, from_longitude_degrees: f64, to_latitude_degrees: f64, to_longitude_degrees: f64) -&gt; f64 {\n    let earth_radius_kilometer = 6371.0_f64;\n\n    let from_latitude = from_latitude_degrees.to_radians();\n    let to_latitude = to_latitude_degrees.to_radians();\n\n    let delta_latitude = (from_latitude_degrees - to_latitude_degrees).to_radians();\n    let delta_longitude = (from_longitude_degrees - to_longitude_degrees).to_radians();\n\n    let central_angle_inner = (delta_latitude / 2.0).sin().powi(2)\n        + from_latitude.cos() * to_latitude.cos() * (delta_longitude / 2.0).sin().powi(2);\n    let central_angle = 2.0 * central_angle_inner.sqrt().asin();\n\n    let distance = earth_radius_kilometer * central_angle;\n    \n    return distance;\n}</pre></code>\n            <p>We have a Rust playground experiment available <a href=\"https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=b60cdd8c60bed969c03bf5b87914c196\">here</a>, in case you want to play around with this code snippet in particular.</p><p>To use the <code>distance_between()</code> Rust function in Pages Functions, we first compile the code to WebAssembly using <a href=\"https://github.com/rustwasm/wasm-pack\"><code>wasm-pack</code></a>:</p>\n            <pre class=\"language-rust\"><code class=\"language-rust\">##\n# generate the `pkg` folder which will contain the wasm binary\n##\nwasm-pack build</pre></code>\n            <p>Then, we import the generated <code>.wasm</code> artifact from inside our <code>distance-between.js</code> Pages Function. Now, each time you click on the globe surface, a request to <code>/api/distance-between</code> is made, which will trigger the <code>distance_between()</code> function to execute. Once computed, the distance value is returned by our Function, back to the client, which proceeds to display the value to the user.</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/zkvhlag99gkb/1nWcWHd4MNnPVEZQ8A3MwE/868b091b3b4849d2c6d9848a737eb476/image2-23.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"1136\" loading=\"lazy\"/>\n            \n            </figure><p>We want to point out that this application could have been built entirely in JavaScript, however, we equally wanted to show just how simple it is to build it with Rust. The decision to use Rust was motivated by a few factors. First, the tooling ecosystem for building and working with Rust-generated WebAssembly is quite mature, well documented, and easy to get started with. Second, the Rust <a href=\"https://www.rust-lang.org/learn\">docs</a> are a fantastic resource if you are new to Rust or to Rust with WebAssembly! If you are looking for a step-by-step tutorial on how to generate and set up a Rust and WebAssembly project, we highly recommend checking out Rust’s official <a href=\"https://rustwasm.github.io/docs/book/introduction.html\">WebAssembly Book</a>.</p><p>We hope it gives you a solid starting point in exploring what is possible with Wasm on Pages Functions, and inspires you to create some powerful applications of your own. Head over to our <a href=\"https://developers.cloudflare.com/pages/platform/functions/module-support/#module-support\">docs</a> to get started today!</p>",
		"id": "55qq7fR9xOWSZtN9TZgrik",
		"localeList": {
			"name": "Use the language of your choice with Pages Functions via WebAssembly Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "Today Pages is excited to offer support for WebAssembly when writing a Pages Function.",
		"metadata": {
			"title": "Use the language of your choice with Pages Functions via WebAssembly",
			"description": "Today Pages is excited to offer support for WebAssembly when writing a Pages Function.",
			"imgPreview": "https://cf-assets.www.cloudflare.com/zkvhlag99gkb/3ylCsSG9KaBEaEXiG2HLyv/01358f3b02a93e7b9c16a8cc7d11cbff/pages-functions-with-webassembly-3PuBBu.png"
		},
		"primary_author": {},
		"publicly_index": true,
		"published_at": "2023-03-24T13:00:00.000+00:00",
		"slug": "pages-functions-with-webassembly",
		"tags": [
			{
				"id": "3kr4meEhp1NrKwm01XXeqk",
				"name": "Cloudflare Pages",
				"slug": "cloudflare-pages"
			},
			{
				"id": "4hhzQ9V5KQE5wXF4VtEcoG",
				"name": "WASM",
				"slug": "wasm"
			},
			{
				"id": "5ghWZAL0nNGxrphuhWW6G0",
				"name": "WebAssembly",
				"slug": "webassembly"
			},
			{
				"id": "6hbkItfupogJP3aRDAq6v8",
				"name": "Cloudflare Workers",
				"slug": "workers"
			},
			{
				"id": "4HIPcb68qM0e26fIxyfzwQ",
				"name": "Developers",
				"slug": "developers"
			},
			{
				"id": "3JAY3z7p7An94s6ScuSQPf",
				"name": "Developer Platform",
				"slug": "developer-platform"
			}
		],
		"title": "Use the language of your choice with Pages Functions via WebAssembly",
		"updated_at": "2025-10-24T11:23:23.455Z",
		"url": "https://blog.cloudflare.com/pages-functions-with-webassembly"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.icon_aria_label": "Search",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"search.result_stat_empty": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong>",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"search.autocomplete_title": "Insert a query. Press enter to send",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}