<div class="post-content lh-copy gray1">
	<!--kg-card-begin: markdown-->
	<div class="shapeshifter play" style="background-image: url(/content/images/2018/08/sprite_60fps.svg)"></div>
	<style>
		@keyframes play30 {
			0% {
				background-position: -373px 0px;
			}

			50% {
				background-position: -22380px 0px;
			}

			100% {
				background-position: -373px 0px;
			}
		}

		.shapeshifter {
			animation-fill-mode: forwards;
			animation-duration: 8000ms;
			animation-timing-function: steps(59);
			width: 373px;
			height: 362px;
			background-repeat: no-repeat;
			animation-iteration-count: 30000;
		}

		.shapeshifter.play {
			animation-name: play30;
		}
	</style>
	<p>Looking back at our historical data, we realized how much the Internet and Cloudflare grew. With more than 150 datacenters, 10 percent of web-based applications, customers everywhere around the world, from the tiny islands in the Pacific to the big metropolises, we have an Internet landscape of almost every country and continent.</p>
	<p>Cloudflare’s mission is to help build a better Internet. To do that we operate datacenters across the globe. By having datacenters close to end user we provide a fast, secure experience for everyone. Today I’d like to talk about our datacenters in Africa and our plans to serve a population of 1.2 billion people over 58 countries.</p>
	<p>Internet penetration in developed countries skyrocketed since the 2000s, Internet usage is growing rapidly across Africa. We are seeing a 4% to 7% increase in traffic month on month. As of July 2018, we have 8 datacenters on the African Continent:</p>
	<ul>
		<li><a href="https://blog.cloudflare.com/amsterdam-to-zhuzhou-cloudflare-global-network/">Angola</a></li>
		<li><a href="https://blog.cloudflare.com/curacao-and-djibouti/">Djibouti</a></li>
		<li><a href="https://blog.cloudflare.com/cairo/">Egypt</a></li>
		<li><a href="https://blog.cloudflare.com/mombasa-kenya-cloudflares-43rd-data-center/">Kenya</a></li>
		<li><a href="https://blog.cloudflare.com/durban-and-port-louis/">Mauritius</a></li>
		<li>Three in <a href="https://blog.cloudflare.com/cape-town-south-africa/">South Africa</a></li>
	</ul>
	<p>While we see changes on the horizon, the majority of Internet content providers are located in North America and Western Europe. This means that only the billion people living in those areas close to the content they are trying to reach. When it comes to Africa, submarine cables will usually bring back the packets to Europe to hubs like Marseille, Paris, London, Lisbon and sometimes Frankfurt or Amsterdam, adding precious milliseconds, slowing down communications.</p>
	<p>By setting up datacenters on the African continent, Cloudflare is able to serve content locally, increasing download speed in the region, improving the end-user experience, and ultimately increasing Internet usage.</p>
	<h3 id="growthofacontinent">Growth of a continent</h3>
	<p>We wondered if the Internet usage increased when we set-up a datacenter in a region which was previously not well served.</p>
	<p>It was surprising to see a fast growth in the following months in each of the countries we turn on our equipment. We took into account bandwidth and also quantity of information exchanged. The increase in bandwidth usually leads to an increase in usage.</p>
	<h4 id="whyisbandwidthincreasingwithlowerlatency">Why is bandwidth increasing with lower latency?</h4>
	<p>Bandwidth is the maximum rate information can be transferred over a link. The interpretation of maximum depends on the type of transmission.</p>
	<p>The explanation why the rate is dependent on latency comes from the TCP protocol specification on which run most of the web applications. Every transmission ends with an acknowledgement, to determine if the data was correctly received. The next transmission will begin after the sender receives the acknowledgement. This means while the acknowledgement is transmitting, nothing is actually being received. The difference of data received over time is the transfer rate.</p>
	<p>This is summarized in the following diagram:</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/08/rtt-explained-01.png" alt="Impact of latency on throughput"></p>
	<p>With the most common algorithms, the amount of data sent before an acknowledgment increases until an error appears. Any link will drop packets: whether there is a transmission issue (wireless and perturbations) or a processing issue (router dropping packets to reduce load). This contributes never reaching the maximum bandwidth of a link. This is why above 80 milliseconds latency, performances start to worsen drastically. Coast to coast in the USA is around 70 milliseconds. Paris to London is 10 milliseconds. <a href="https://en.wikipedia.org/wiki/Performance-enhancing_proxy#Split_TCP" target="_blank">Satellites connections implement proxies</a> to allow sustainable throughput despite 600 milliseconds round-time-trip.</p>
	<h4 id="whyistheamountofrequestsincreasingwithhigherbandwidth">Why is the amount of requests increasing with higher bandwidth?</h4>
	<p>The explanation is behavioral. If an Internet connection is slow and frustrating, chances are we will use it only if we are forced to. While getting access to the content immediately, people are likely to fetch more content and click on links.</p>
	<p>The following chart shows the growth of requests from a country after every datacenter turn up. Traffic is normalized on the latest value (July 2018).</p>
	<p>Djibouti shows the biggest increase in traffic after the launch.</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/08/download--34-.png" alt="Requests from a country after Cloudflare Datacenter Turn up"></p>
	<p>For the rest of the continent, we are seeing a steady increase in delivered traffic over the last four years.</p>
	<p>Overall, Sierra Leone is the country which grew the most at around 8% per month. At the opposite scale, Algeria only increased its traffic by 2% per month. The mean of all those countries is 6.2% per month, which is also the Internet traffic growth of South Africa.</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/08/download.png" alt="Evolution of traffic from African countries"></p>
	<p>In comparison to Europe, North America, it will take, at the current rate, 4 years and 3 months for Africa to reach today’s traffic levels of those two continents. However, if Europe, North America keeps its current 4% growth rate, then the African continent will take approximately eight to twelve years to catch up.</p>
	<p>Please note these estimations are not perfectly representative as Cloudflare only see a part of the Internet and the numbers also includes our growing base of customers.</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/07/download--1--copy.png" alt="Evolution traffic from Africa vs Europe/Canada/USA"></p>
	<p>The units on the vertical axis represent the growth based on the initial ratio between Europe/USA/Canada and Africa.</p>
	<h3 id="latenciesandinterafricanrouting">Latencies and inter-African routing</h3>
	<p>We analyzed the latencies between Europe and African IP addresses that hit our edge. On the following Demer map from <a href="https://twitter.com/vastur" target="_blank">Vasco Asturiano</a>, the area of the country is exponentially proportional to the response time in milliseconds.</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/08/quadratic-3-01.png" alt="Demer map for latencies from Europe to African countries"></p>
	<p>All the coastal Africa is well connected with submarines cables. The only exception is Eritrea, where the main provider (EriTel) which uses <a href="https://bgp.he.net/AS30987#_peers" target="_blank">two satellite providers</a> for its outbound links.</p>
	<p>The island of <a href="https://en.wikipedia.org/wiki/Saint_Helena" target="_blank">Saint Helena</a> is on the path of the future <a href="https://en.wikipedia.org/wiki/SAex" target="_blank">SAex cable</a>, but the only connection at the moment for its 5000 inhabitants is through satellite, causing a latency of 600ms.<br>
		Central African Republic also uses satellite or connections through Cameroon.</p>
	<p>On average a packet round trip from Northern Africa to Europe will take around 50-100ms while a round trip from the South will take 250ms.</p>
	<p>Regarding inter-African routing, Africa has only a limited number of cities where interconnection happens successfully: Johannesburg in South Africa, Nairobi in Kenya, and Djibouti with datacenters and internet exchange points. The rest of the continent is mostly split between providers which will interconnect in Europe or Asia. Chances are, a user in Cameroon talking to a user in Ghana will likely go through Paris.</p>
	<p>Using RIPE Atlas, we are able to show inter-provider routing usually happens in Europe. Only one traceroute showed packets being exchanged in South Africa.</p>
	<p>Traceroute to two Ghana Atlas probes from other Atlas Probes</p>
	<table>
		<thead>
			<tr>
				<th>To Ghana only via Europe</th>
				<th>To Ghana with one through South Africa</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/Screen-Shot-2018-07-27-at-2.56.37-PM.png" alt="Ghana 1"></td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/Screen-Shot-2018-07-27-at-2.58.50-PM.png" alt="Ghana 2"></td>
			</tr>
		</tbody>
	</table>
	<p>Cloudflare and many network operators are using extensively RIPE Atlas to determine performance and troubleshoot issues. If you want to help us improve Internet quality in Africa, become a <a href="https://atlas.ripe.net/get-involved/become-a-host/" target="_blank">probe host here</a>.</p>
	<p>What you may be wondering is: what are the countries in Europe that route the African traffic? We are using an anycast network ; when a user fetch a website on Cloudflare, the packets will take the shortest path seen by the router to reach its destination. In telecommunications, the shortest path does necessarily mean geographical proximity. The selection metric of a path usually involve cost and performance.</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/08/closest-routing-3-01.png" alt="Closest routing diagram"></p>
	<p>An anycast address will have the same metric everywhere on our side. This mean a service provider having links to London and Paris will see our IP addresses originating from London datacenter and Paris datacenter. The choice between the two will only be depending on metrics set by the provider: will it cost more to reach London?</p>
	<p>Cloudflare has a significant number of points of presence to be able to show small metric differences. Due to the density of its network in Europe, it is common to have datacenters one hop away from each others (London and Paris, Paris and Amsterdam). Our analysis of the next-hop will show a provider’s preference.</p>
	<p>In the case of Africa, a provider can rent capacity on submarine cable to a city, for instance Lisbon, Paris, London. Ideally, the provider wants to maximize the resources it can obtain without adding more hops (costlier).</p>
	<p>Paris, London, Amsterdam and Frankfurt have a lot of content providers and interconnections options, the differences are going to be on the content. One major bias will be the language: France will have more francophone content hosted in Parisian datacenters, it also helps running operations to if both parties speak French.</p>
	<p>As an example case: if Paris is chosen, for the content that can only be found in London, another provider will carry the packets to London from Paris, adding one hop to the path, reducing preference. We will see the landing point in Paris.</p>
	<p>Why isn’t the provider getting a link to London? On thing to know is any Internet link has a flat rate price plus a variable rate based on consumption.</p>
	<p>Bandwidth within major European cities is among the cheapest in the world. The flat rate for submarine capacity is high, as a result, the quantity of content that is available from London for cheaper than Paris has to make up the difference.</p>
	<p>If you are interested to know more about the costs of bandwidth around the world, check out this <a href="https://blog.cloudflare.com/bandwidth-costs-around-the-world/">article</a> by Nitin Rao.</p>
	<p>The following map represents the most common Cloudflare datacenter reached for each country. The countries filled with color are where Cloudflare datacenters are. The border color indicates the destination country.</p>
	<p>As aforementioned, we can notice most of the French-speaking countries will tend to go towards our datacenter in Paris. South Africa remains well connected with its neighbors.</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/07/netmap-future-01-02.png" alt="Africa next-hop Cloudflare datacenter"></p>
	<h3 id="whereisthecontenthosted">Where is the content hosted?</h3>
	<p>Previously, we mentioned there are some content providers in South Africa and Djibouti. We took a look at the popular news and banking websites.</p>
	<p>Over the top 200 origins of the websites (Alexa ranking) for African countries in 2017, only 42 were attached to an African country and only 10 among those were serving non-education/government content (news websites, banks).They were located mostly in South Africa and Zimbabwe.</p>
	<p>We also took a look at our 10 millions zones behind Cloudflare. The ones that are using Afrinic IPs are hosted in the following countries:<br>
		<img src="https://blog.cloudflare.com/content/images/2018/08/Where-are-Afrinic-IPs-used-for-content-hosted-_.png" alt="Where-are-Afrinic-IPs-used-for-content-hosted-_">
	</p>
	<h3 id="whataboutipv6">What about IPv6?</h3>
	<p>Only four countries out of sixty four are using IPv6 in a measurable way. Egypt (1%), Kenya (2%), Gabon (2%) and Zimbabwe (9%). In each of these countries we found that only one provider that deployed IPv6 at any significant scale. Since the beginning of the year, IPv6 usage in Egypt has doubled. In Gabon, a major provider rolled IPv6 at the end of December 2017.</p>
	<p>As Mathieu Paonessa from <a href="https://www.gva.africa" target="_blank">Group Vivendi Afrique</a> told us, “Gabon went from 0% to 2% IPv6 in only 9 months, following the opening of our CanalBox Gabon FTTH service.”</p>
	<p>The timeline is similar with a small ISP in Kenya and has been increasing steadily. We can maybe hope they double their IPv6 usage by the end of 2018.</p>
	<p>Compared to the rest of the world, Belgium is still ahead with 37%, followed by India at 35%. Most European countries are above 10%. USA is 22% and Canada is 15%.</p>
	<p>One explanation for the small number of deployments is the size of the remaining IPv4 pool of addresses.</p>
	<p>As of July 2018, there were 36,245 /24 available (approximately 9.2 millions IPs). The total Afrinic size is 6 /8 (approximately 100 millions IPs). 9% are left.</p>
	<p>The following graphs shows the allocations and usage of each /24 in the Afrinic allocations.</p>
	<p>This is the Hilbert graph of <a href="https://www.afrinic.net/en/services/statistics/ipv4-exhaustion" target="_blank">Afrinic IPv4 exhaustion</a>. It was inspired by <a href="https://blog.benjojo.co.uk/post/scan-ping-the-internet-hilbert-curve" target="_blank">Ben Cartwright-Cox’s blog post</a> and used <a href="https://github.com/robertdavidgraham/masscan" target="_blank">masscan</a> and <a href="https://github.com/measurement-factory/ipv4-heatmap" target="_blank">ipv4-heatmap</a>.</p>
	<table>
		<thead>
			<tr>
				<th>Prefix</th>
				<th>Announced (yellow) vs Available (green) vs Reserved (red)</th>
				<th>Response to ICMP (blue = low reply, red = all reply)</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>41.0.0.0/8</td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map41-bgp.png" alt="41/8-bgp"></td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map41.png" alt="41/8-icmp"></td>
			</tr>
			<tr>
				<td>102.0.0.0/8</td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map102-bgp.png" alt="102/8-bgp"></td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map102.png" alt="102/8-icmp"></td>
			</tr>
			<tr>
				<td>105.0.0.0/8</td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map105-bgp.png" alt="105/8-bgp"></td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map105.png" alt="105/8-icmp"></td>
			</tr>
			<tr>
				<td>154.0.0.0/8</td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map154-bgp.png" alt="154/8-bgp"></td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map154.png" alt="154/8-icmp"></td>
			</tr>
			<tr>
				<td>196.0.0.0/8</td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map196-bgp.png" alt="196/8-bgp"></td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map196.png" alt="196/8-icmp"></td>
			</tr>
			<tr>
				<td>197.0.0.0/8</td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map197-bgp.png" alt="197/8-bgp"></td>
				<td><img src="https://blog.cloudflare.com/content/images/2018/07/map197.png" alt="197/8-icmp"></td>
			</tr>
		</tbody>
	</table>
	<p>We notice that even if allocated, some blocks remain dark. 102.0.0.0/8 remains the range with the most IP space left in the world.</p>
	<h3 id="moredeploymentscomingsoon">More deployments coming soon</h3>
	<p>Africa is the largest continent on earth, yet it is very lagging behind on Internet connectivity and traffic levels. Historically it's been entirely relying on its European interconnections. However we predict that its traffic will outgrow EU and US by 2027. This will be enabled by the fast deployment of local content, IPv6, and alternative submarine cables.</p>
	<p>We are working on deploying even more points of presence in Africa and increasing our current capacity in the existing ones. Fifteen new locations in the African continent are part of our global expansion plans. These include: Algeria (Algiers), Cameroon (Yaoundé), Congo (Kinshasa), Côte d’Ivoire (Abidjan), Egypt (Alexandria), Ghana (Accra), Kenya (Nairobi), La Réunion (Sainte-Marie), Madagascar (Antananarivo), Morocco (Casablanca), Nigeria (Lagos), Tanzania (Dar es Salaam), Tunisia (Tunis), Uganda (Kampala), and Zimbabwe (Harare)</p>
	<p><img src="https://blog.cloudflare.com/content/images/2018/07/netmap-future-01-03.png" alt="Future Cloudflare Datacenters in Africa"></p>
	<p><em>Header image <a href="https://www.flickr.com/photos/south-african-tourism/2418525776/in/photostream/" target="_blank">source</a></em></p>
	<!--kg-card-end: markdown-->
</div>