{
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Shelley Jones",
				"slug": "shelley",
				"bio": "Technical Program Manager",
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/7HyxyCdxJZHBKtYmczQ5Bx/fdbfd41ca1eb0dd91cd0c499dd7ccc2a/shelley.png",
				"location": "London",
				"website": null,
				"twitter": null,
				"facebook": null
			},
			{
				"name": "Duc Nguyen",
				"slug": "duc",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/6bWXI72aJDJn9Wj9m4YGcm/966ed8e6ccd49284a712f74de436c741/duc.jpeg",
				"location": null,
				"website": null,
				"twitter": "@nuggien",
				"facebook": null
			}
		],
		"excerpt": "Log Storage on R2: a cost-effective solution to store event logs for any of our products",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/2TCunmMZR7syZBXqu6ljkF/6ff003ec32c5caa82023544dbc66dd7a/store-and-retrieve-logs-on-r2.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/6znEGvKI4oFujqIToyH69H/385ab493d1c9dcf1cd6d5d98e0953b28/rbU9MUqs1HdztqCtm-EavsL7gia8khk04hfvcoG0RWtr2_RE3hKeA2AWikCgFv4MuVESTJ7UYkXDSWEOVpXdHLA9fmwZ5UWq9G2wcYBumUBXGmpe2CdzcGRkTxBm.png\" alt=\"\" class=\"kg-image\" width=\"1600\" height=\"900\" loading=\"lazy\"/>\n            \n            </figure><p>Following today’s announcement of General Availability of Cloudflare R2 <a href=\"https://www.cloudflare.com/learning/cloud/what-is-object-storage/\">object storage</a>, we’re excited to announce that customers can also store and retrieve their logs on R2.</p><p>Cloudflare’s Logging and Analytics products provide vital insights into customers’ applications. Though we have a breadth of capabilities, logs in particular play a pivotal role in understanding what occurs at a granular level; we produce detailed logs containing metadata generated by Cloudflare products via events flowing through our network, and they are depended upon to illustrate or investigate anything (and everything) from the general performance or health of applications to closely examining security incidents.</p><p>Until today, we have only provided customers with the ability to export logs to 3rd-party destinations - to both store and perform analysis. However, with Log Storage on R2 we are able to offer customers a cost-effective solution to store event logs for any of our products.</p><h3>The cost conundrum</h3><p>We’ve <a href=\"/logs-r2/\">unpacked the commercial impact in a previous blog post,</a> but to recap, the cost of storage can vary broadly depending on the volume of requests Internet properties receive. On top of that - and specifically pertaining to logs - there’s usually more expensive fees to access that data whenever the need arises. This can be incredibly problematic, especially when customers are having to balance their budget with the need to access their logs - whether it&#39;s to mitigate a potential catastrophe or just out of curiosity.</p><p>With R2, not only do we not charge customers <a href=\"https://developers.cloudflare.com/r2/platform/pricing/\">egress costs</a>, but we also provide the opportunity to make further operational savings by centralizing storage and retrieval. Though, most of all, we just want to make it easy and convenient for customers to access their logs via our Retrieval API - all you need to do is provide a time range!</p><h3>Logs on R2: get started!</h3><p>Why would you want to store your logs on <a href=\"www.cloudflare.com/developer-platform/r2/\">Cloudflare R2</a>? First, R2 is S3 API compatible, so your existing tooling will continue to work as is. Second, not only is R2 cost-effective for storage, we also do not charge any egress fees if you want to get your logs out of Cloudflare to be ingested into your own systems. You can store logs for any Cloudflare product, and you can also store what you need for as long as you need; retention is completely within your control.</p><h3>Storing Logs on R2</h3><p>To create Logpush jobs pushing to R2, you can use either the dashboard or Cloudflare API. Using the dashboard, you can create a job and select R2 as the destination during configuration:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/4LxlofboVHwn12lpAJ3iok/c4d285ced2b3af817a0ce70eb1cd0d36/image2-26.png\" alt=\"\" class=\"kg-image\" width=\"1999\" height=\"1195\" loading=\"lazy\"/>\n            \n            </figure><p>To use the Cloudflare API to create the job, do something like:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">curl -s -X POST 'https://api.cloudflare.com/client/v4/zones/<ZONE_ID>/logpush/jobs' \\\n-H \"X-Auth-Email: <EMAIL>\" \\\n-H \"X-Auth-Key: <API_KEY>\" \\\n-d '{\n \"name\":\"<DOMAIN_NAME>\",\n\"destination_conf\":\"r2://<BUCKET_PATH>/{DATE}?account-id=<ACCOUNT_ID>&access-key-id=<R2_ACCESS_KEY_ID>&secret-access-key=<R2_SECRET_ACCESS_KEY>\",\n \"dataset\": \"http_requests\",\n\"logpull_options\":\"fields=ClientIP,ClientRequestHost,ClientRequestMethod,ClientRequestURI,EdgeEndTimestamp,EdgeResponseBytes,EdgeResponseStatus,EdgeStartTimestamp,RayID&timestamps=rfc3339\",\n \"kind\":\"edge\"\n}' | jq .</pre></code>\n            <p>Please see <a href=\"https://developers.cloudflare.com/logs/get-started/enable-destinations/r2/\">Logpush over R2</a> docs for more information.</p><h3>Log Retrieval on R2</h3><p>If you have your logs pushed to R2, you could use the Cloudflare API to retrieve logs in specific time ranges like the following:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">curl -s -g -X GET 'https://api.cloudflare.com/client/v4/accounts/<ACCOUNT_ID>/logs/retrieve?start=2022-09-25T16:00:00Z&end=2022-09-25T16:05:00Z&bucket=<YOUR_BUCKET>&prefix=<YOUR_FILE_PREFIX>/{DATE}' \\\n-H \"X-Auth-Email: <EMAIL>\" \\\n-H \"X-Auth-Key: <API_KEY>\" \\ \n-H \"R2-Access-Key-Id: R2_ACCESS_KEY_ID\" \\\n-H \"R2-Secret-Access-Key: R2_SECRET_ACCESS_KEY\" | jq .</pre></code>\n            <p>See <a href=\"https://developers.cloudflare.com/logs/r2-log-retrieval/\">Log Retrieval API</a> for more details.</p><p>Now that you have critical logging infrastructure on Cloudflare, you probably want to be able to monitor the health of these Logpush jobs as well as get relevant alerts when something needs your attention.</p><h3>Looking forward</h3><p>While we have a vision to build out log analysis and forensics capabilities on top of R2 - and a roadmap to get us there - we’d still love to hear your thoughts on any improvements we can make, particularly to our retrieval options.</p><p>Get setup on <a href=\"https://www.cloudflare.com/products/r2/\">R2</a> to start <a href=\"https://developers.cloudflare.com/logs/get-started/enable-destinations/r2/\">pushing logs</a> today! If your current plan doesn’t include Logpush, storing logs on R2 is another great reason to upgrade!</p>",
		"id": "1jAMjJ9M01pYKP2KUM2EVn",
		"localeList": {
			"name": "Store and retrieve your logs on R2 Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "Log Storage on R2: a cost-effective solution to store event logs for any of our products!",
		"metadata": {
			"title": "Store and retrieve your logs on R2",
			"description": "Log Storage on R2: a cost-effective solution to store event logs for any of our products!",
			"imgPreview": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/6R5fqYlfDH6AtnbkUyjqoW/f5dd420301f52facb4f1c8c82d9ed3ac/store-and-retrieve-logs-on-r2-GG22uR.png"
		},
		"primary_author": {},
		"published_at": "2022-09-21T15:15:00.000+01:00",
		"reading_time": 3,
		"slug": "store-and-retrieve-logs-on-r2",
		"tags": [
			{
				"id": "4do0Bmj6kBvrLb7mlHuO0F",
				"name": "GA Week",
				"slug": "ga-week"
			},
			{
				"id": "3E2D6D4cI82KIloPpl0WZW",
				"name": "General Availability",
				"slug": "general-availability"
			},
			{
				"id": "7JpaihvGGjNhG2v4nTxeFV",
				"name": "R2 Storage",
				"slug": "cloudflare-r2"
			},
			{
				"id": "4fkY3bvsgn5JfTgXxTZHIR",
				"name": "Logs",
				"slug": "logs"
			},
			{
				"id": "6QktrXeEFcl4e2dZUTZVGl",
				"name": "Product News",
				"slug": "product-news"
			},
			{
				"id": "7lB8a8hOPXzjt99X5Ye9wb",
				"name": "Storage",
				"slug": "storage"
			}
		],
		"title": "Store and retrieve your logs on R2",
		"updated_at": "2024-08-27T01:25:02.741Z",
		"url": "https://blog.cloudflare.com/store-and-retrieve-logs-on-r2"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.blurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}