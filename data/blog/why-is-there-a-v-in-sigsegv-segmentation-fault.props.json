{
	"footerBlurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
	"initialReadingTime": "1",
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Marek Majkowski",
				"slug": "marek-majkowski",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/1JuU5qavgwVeqR8BAUrd6U/bd09672287e7cf04d4347d9a47607eb5/marek-majkowski.jpeg",
				"location": null,
				"website": null,
				"twitter": "@majek04",
				"facebook": null
			},
			{
				"name": "David Wragg",
				"slug": "david-wragg",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/3HXFIyxRTF4ruiqfb2rEHF/4ae404054de41344b70a4fb3e119f6c6/david-wragg.jpg",
				"location": null,
				"website": null,
				"twitter": null,
				"facebook": null
			}
		],
		"excerpt": "My program received a SIGSEGV signal and crashed with \"Segmentation Fault\" message. Where does the \"V\" come from? \n\nDid I read it wrong? Was there a \"Segmentation *V*ault?\"? Or did Linux authors make a mistake? Shouldn't the signal be named SIGSEGF? \n",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/4cUyJDRsMuhTZgYkQr05ah/d681cb1449d6e1f91ad1f38b1fd28730/why-is-there-a-v-in-sigsegv-segmentation-fault.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/F25eQMbvU7IqgEG5sMMvQ/93789a1a49d9f403b9229b0871e792f8/Image_20200512_095234.jpeg.jpeg\" alt=\"\" class=\"kg-image\" width=\"1280\" height=\"1214\" loading=\"lazy\"/>\n            \n            </figure><p>Another long night. I was working on my perfect, bug-free program in C, when the predictable thing happened:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">$ clang skynet.c -o skynet\n$ ./skynet.out \nSegmentation fault (core dumped)</pre></code>\n            <p>Oh, well... Maybe I&#39;ll be more lucky taking over the world another night. But then it struck me. My program received a SIGSEGV signal and crashed with &quot;Segmentation Fault&quot; message. Where does the &quot;V&quot; come from?</p><p>Did I read it wrong? Was there a &quot;Segmentation _V_ault?&quot;? Or did Linux authors make a mistake? Shouldn&#39;t the signal be named SIGSEGF?</p><p>I asked my colleagues and <a href=\"https://twitter.com/dwragg\">David Wragg</a> quickly told me that the signal name stands for &quot;Segmentation Violation&quot;. I guess that makes sense. Long long time ago, computers used to have <a href=\"https://en.wikipedia.org/wiki/X86_memory_segmentation\">memory segmentation</a>. Each memory segment had defined length - called Segment Limit. Accessing data over this limit caused a processor fault. This error code got re-used <a href=\"https://en.wikipedia.org/wiki/Memory_segmentation#Segmentation_with_paging\">by newer systems that used paging</a>. I think the Intel manuals call this error <a href=\"https://en.wikipedia.org/wiki/Page_fault#Invalid\">&quot;Invalid Page Fault&quot;</a>. When it&#39;s triggered it gets reported to the userspace as a SIGSEGV signal. End of story.</p><p>Or is it?</p><p><a href=\"https://twitter.com/mahtin\">Martin Levy</a> pointed me to an ancient <a href=\"http://man.cat-v.org/unix-6th/2/signal\">Version 6th UNIX documentation on &quot;signal&quot;</a>. This is from around 1978:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/4guHgMnVrZOyzBS0j2vOF3/02c11573f63a87065686ed3a6013eee9/IMG_5177.jpg\" alt=\"\" class=\"kg-image\" width=\"1195\" height=\"928\" loading=\"lazy\"/>\n            \n            </figure><p>Look carefully. There is no SIGSEGV signal! Signal number 11 is called SIGSEG!</p><p>It seems that userspace parts of the UNIX tree (i.e. /usr/include/signal.h) switched to SIGSEGV fairly early on. But the kernel internals continued to use the name SIGSEG for much longer.</p><p>Looking deeper David found that PDP11 trap vector used wording <a href=\"https://github.com/dspinellis/unix-history-repo/blob/Research-V4-Snapshot-Development/sys/ken/low.s#L59\">&quot;segmentation violation&quot;</a>. This shows up in Research V4 Edition in the UNIX history repo, but it doesn&#39;t mean it was introduced in V4 - it&#39;s just because V4 is the first version with code still available.</p><p>This trap was converted into <a href=\"https://github.com/dspinellis/unix-history-repo/blob/Research-V4-Snapshot-Development/sys/ken/trap.c#L73\">SIGSEG signal in trap.c</a> file.</p><p>The file /usr/include/signal.h appears in the tree for Research V7, <a href=\"https://github.com/dspinellis/unix-history-repo/blob/Research-V7-Snapshot-Development/usr/include/signal.h\">with the name SIGSEGV</a>. But the kernel <a href=\"https://github.com/dspinellis/unix-history-repo/blob/Research-V7-Snapshot-Development/usr/sys/sys/trap.c#L177\">still called it SIGSEG at the time</a></p><p>It seems the kernel side was <a href=\"https://github.com/dspinellis/unix-history-repo/blob/BSD-4/usr/src/sys/sys/trap.c#L67\">renamed to SIGSEGV in BSD-4</a>.</p><p>Here you go. Originally the signal was called SIGSEG. It was subsequently renamed SIGSEGV in the userspace and a bit later - around 1980 - to SIGSEGV on the kernel side. Apparently there are still no Segmentation Vaults found on UNIX systems.</p><p>As for my original crash, I fixed it - of course - by catching the signal and jumping over the offending instruction. On Linux it is totally possible to catch and handle SIGSEGV. With that fix, my code will never again crash. For sure.</p>\n            <pre class=\"language-.c\"><code class=\"language-.c\">#define _GNU_SOURCE\n#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;ucontext.h&gt;\n\nstatic void sighandler(int signo, siginfo_t *si, void* v_context)\n{\n    ucontext_t *context = v_context;\n    context-&gt;uc_mcontext.gregs[REG_RIP] += 10;\n}\n\nint *totally_null_pointer = NULL;\n\nint main() {\n    struct sigaction psa;\n    psa.sa_sigaction = sighandler;\n    sigaction(SIGSEGV, &amp;psa, NULL);\n\n    printf(&quot;Before NULL pointer dereference\\n&quot;);\n    *totally_null_pointer = 1;\n    __asm__ __volatile__(&quot;nop;nop;nop;nop;nop;nop;nop;nop;nop;nop;&quot;);\n    printf(&quot;After NULL pointer. Still here!\\n&quot;);\n\n    return 0;\n}</pre></code>\n            ",
		"id": "4vXHuB3JMI6WziJEJtc90H",
		"localeList": {
			"name": "Why is there a \"V\" in SIGSEGV Segmentation Fault? Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "My program received a SIGSEGV signal and crashed with \"Segmentation Fault\" message. Where does the \"V\" come from? \n\nDid I read it wrong? Was there a \"Segmentation *V*ault?\"? Or did Linux authors make a mistake? Shouldn't the signal be named SIGSEGF? ",
		"metadata": {
			"imgPreview": ""
		},
		"primary_author": {},
		"published_at": "2020-06-18T12:56:33.000+01:00",
		"slug": "why-is-there-a-v-in-sigsegv-segmentation-fault",
		"tags": [
			{
				"id": "2UVIYusJwlvsmPYl2AvSuR",
				"name": "Deep Dive",
				"slug": "deep-dive"
			},
			{
				"id": "4HIPcb68qM0e26fIxyfzwQ",
				"name": "Developers",
				"slug": "developers"
			}
		],
		"title": "Why is there a \"V\" in SIGSEGV Segmentation Fault?",
		"updated_at": "2024-08-27T02:01:16.058Z",
		"url": "https://blog.cloudflare.com/why-is-there-a-v-in-sigsegv-segmentation-fault"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}