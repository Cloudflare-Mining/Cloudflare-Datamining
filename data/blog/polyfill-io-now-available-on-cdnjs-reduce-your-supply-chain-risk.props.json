{
	"initialReadingTime": "3",
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Sven Sauleau",
				"slug": "sven",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/4AvybzTkWLlF4cdTgLrE3q/2d93a9df65eec9eb8ab5441e5b591908/sven.jpg",
				"location": null,
				"website": null,
				"twitter": "@svensauleau",
				"facebook": null
			},
			{
				"name": "Michael Tremante",
				"slug": "michael-tremante",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/61VxyepuDMgPc2YC1SLjzq/9c78b998d374520b5ed7435b88659dc6/michael-tremante.jpg",
				"location": null,
				"website": null,
				"twitter": "@MichaelTremante",
				"facebook": null
			}
		],
		"excerpt": "Polyfill.io is now available on cdnjs to reduce the risk of supply chain attacks. Replace your polyfill.io links today for a seamless experience",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/2HHsMUew6DZ8LWS8wYT19a/cc2edf58851756292e09c542c3a3dfd3/polyfill-io-now-available-on-cdnjs-reduce-your-supply-chain-risk.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/4nxvskYVuRnRJHoLUMRY4l/49bedceb8aabd8da9fcdd352a5f37093/image1-17.png\" alt=\"polyfill.io now available on cdnjs: reduce your supply chain risk\" class=\"kg-image\" width=\"1201\" height=\"675\" loading=\"lazy\"/>\n            \n            </figure><p>Polyfill.io is a popular JavaScript library that nullifies differences across old browser versions. These differences often take up substantial development time.</p><p>It does this by adding support for modern functions (via <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Polyfill\">polyfilling</a>), ultimately letting developers work against a uniform environment simplifying development. The tool is historically loaded by linking to the endpoint provided under the domain polyfill.io.</p><p>In the interest of providing developers with additional options to use polyfill, today we are launching an <a href=\"https://cdnjs.cloudflare.com/polyfill\">alternative endpoint under cdnjs</a>. You can replace links to polyfill.io “as is” with our new endpoint. You will then rely on the same service and reputation that <a href=\"https://cdnjs.com/\">cdnjs</a> has built over the years for your polyfill needs.</p><p>Our interest in creating an alternative endpoint was also sparked by some <a href=\"https://github.com/polyfillpolyfill/polyfill-service/issues/2834\">concerns raised by the community</a>, and <a href=\"https://twitter.com/triblondon/status/1761852117579427975\">main contributors</a>, following the transition of the domain polyfill.io to a new provider (Funnull).</p><p>The concerns are that any website embedding a link to the original polyfill.io domain, will now be relying on Funnull to maintain and secure the underlying project to avoid the risk of a supply chain attack. Such an attack would occur if the underlying third party is compromised or alters the code being served to end users in nefarious ways, causing, by consequence, all websites using the tool to be compromised.</p><p>Supply chain attacks, in the context of web applications, are a growing concern for security teams, and also led us to build a client side security product to detect and mitigate these attack vectors: <a href=\"https://developers.cloudflare.com/page-shield/\">Page Shield</a>.</p><p>Irrespective of the scenario described above, this is a timely reminder of the complexities and risks tied to modern web applications. As maintainers and contributors of <a href=\"https://cdnjs.com/\">cdnjs</a>, currently used by <a href=\"https://w3techs.com/technologies/overview/content_delivery\">more than 12% of all sites</a>, this reinforces our commitment to help keep the Internet safe.</p><h3>polyfill.io on cdnjs</h3><p>The full polyfill.io implementation has been deployed at the following URL:</p><p><a href=\"https://cdnjs.cloudflare.com/polyfill/\"><code>https://cdnjs.cloudflare.com/polyfill/</code></a></p><p>The underlying bundle link is:</p><p>For minified: <a href=\"https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js\">https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js</a>For unminified: <a href=\"https://cdnjs.cloudflare.com/polyfill/v3/polyfill.js\">https://cdnjs.cloudflare.com/polyfill/v3/polyfill.js</a></p><p>Usage and deployment is intended to be identical to the original polyfill.io site. As a developer, you should be able to simply “replace” the old link with the new cdnjs-hosted link without observing any side effects, besides a possible improvement in performance and reliability.</p><p>If you don’t have access to the underlying website code, but your website is behind Cloudflare, replacing the links is even easier, as you can deploy a Cloudflare Worker to update the links for you:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">export interface Env {}\n\nexport default {\n    async fetch(request: Request, env: Env, ctx: ExecutionContext): Promise&lt;Response&gt; {\n        ctx.passThroughOnException();\n\n        const response = await fetch(request);\n\n        if ((response.headers.get(&#039;content-type&#039;) || &#039;&#039;).includes(&#039;text/html&#039;)) {\n            const rewriter = new HTMLRewriter()\n                .on(&#039;link&#039;, {\n                    element(element) {\n                        const rel = element.getAttribute(&#039;rel&#039;);\n                        if (rel === &#039;preconnect&#039;) {\n                            const href = new URL(element.getAttribute(&#039;href&#039;) || &#039;&#039;, request.url);\n\n                            if (href.hostname === &#039;polyfill.io&#039;) {\n                                href.hostname = &#039;cdnjs.cloudflare.com&#039;;\n                                element.setAttribute(&#039;href&#039;, href.toString());\n                            }\n                        }\n                    },\n                })\n\n                .on(&#039;script&#039;, {\n                    element(element) {\n                        if (element.hasAttribute(&#039;src&#039;)) {\n                            const src = new URL(element.getAttribute(&#039;src&#039;) || &#039;&#039;, request.url);\n                            if (src.hostname === &#039;polyfill.io&#039;) {\n                                src.hostname = &#039;cdnjs.cloudflare.com&#039;;\n                                src.pathname = &#039;/polyfill&#039; + src.pathname;\n\n                                element.setAttribute(&#039;src&#039;, src.toString());\n                            }\n                        }\n                    },\n                });\n\n            return rewriter.transform(response);\n        } else {\n            return response;\n        }\n    },\n};</pre></code>\n            <p>Instructions on how to deploy a worker can be found on our <a href=\"https://developers.cloudflare.com/workers/get-started/\">developer documentation</a>.</p><p>You can also test the Worker on your website without deploying the worker. You can find instructions on how to do this in <a href=\"/workers-and-webpagetest/\">another blog post we wrote in the past</a>.</p><h3>Implemented with Rust on Cloudflare Workers</h3><p>We were happy to discover that polyfill.io is a <a href=\"https://github.com/polyfillpolyfill/polyfill-service\">Rust project</a>. As you might know, Rust has been a <a href=\"/workers-rust-sdk\">first class citizen on Cloudflare Workers</a> from the start.</p><p>The polyfill.io service was hosted on Fastly and used their Rust library. We forked the project to add the compatibility for Cloudflare Workers, and plan to make the fork publicly accessible in the near future.</p><h3>Worker</h3><p>The <code>https://cdnjs.cloudflare.com/polyfill/[...].js</code> endpoints are also implemented in a Cloudflare Worker that wraps our Polyfill.io fork. The wrapper uses <a href=\"https://github.com/cloudflare/workers-rs\">Cloudflare’s Rust API</a> and looks like the following:</p>\n            <pre class=\"language-javascript\"><code class=\"language-javascript\">#[event(fetch)]\nasync fn main(req: Request, env: Env, ctx: Context) -&gt; Result&lt;Response&gt; {\n    let metrics = {...};\n\n    let polyfill_store = get_d1(&amp;req, &amp;env)?;\n    let polyfill_env = Arc::new(service::Env { polyfill_store, metrics });\n    \n    // Run the polyfill.io entrypoint\n    let res = service::handle_request(req2, polyfill_env).await;\n\n    let status_code = if let Ok(res) = &amp;res {\n        res.status_code()\n    } else {\n        500\n    };\n    metrics\n        .requests\n        .with_label_values(&amp;[&amp;status_code.to_string()])\n        .inc();\n\n    ctx.wait_until(async move {\n        if let Err(err) = metrics.report_metrics().await {\n            console_error!(&quot;failed to report metrics: {err}&quot;);\n        }\n    });\n\n    res\n}</pre></code>\n            <p>The wrapper only sets up our internal <a href=\"https://developers.cloudflare.com/workers/observability/metrics-and-analytics/\">metrics</a> and <a href=\"https://developers.cloudflare.com/workers/observability/logging/logpush/\">logging</a> tools, so we can monitor uptime and performance of the underlying logic while calling the Polyfill.io entrypoint.</p><h3>Storage for the Polyfill files</h3><p>All the polyfill files are stored in a key-value store powered by <a href=\"https://developers.cloudflare.com/d1/\">Cloudflare D1</a>. This allows us to fetch as many polyfill files as we need with a single SQL query, as opposed to the original implementation doing one KV get() per file.</p><p>For performance, we have one Cloudflare D1 instance per region and the SQL queries are routed to the nearest database.</p><h3>cdnjs for your JavaScript libraries</h3><p>cdnjs is hosting over 6k JavaScript libraries as of today. We are looking for ways to improve the service and provide new content. We listen to community feedback and welcome suggestions on our <a href=\"https://community.cloudflare.com/\">community forum</a>, or <a href=\"https://github.com/cdnjs\">cdnjs on GitHub</a>.</p><p><a href=\"https://developers.cloudflare.com/page-shield/\">Page Shield</a> is also available to all paid plans. Log in to turn it on with a single click to increase visibility and security for your third party assets.</p>",
		"id": "64KHlCJKCdI1JNa3sCAqpL",
		"localeList": {
			"name": "polyfill.io now available on cdnjs: reduce your supply chain risk Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "Polyfill.io is now available on cdnjs to reduce the risk of supply chain attacks. Replace your polyfill.io links today for a seamless experience.",
		"metadata": {
			"title": "polyfill.io now available on cdnjs: reduce your supply chain risk",
			"description": "Polyfill.io is now available on cdnjs to reduce the risk of supply chain attacks. Replace your polyfill.io links today for a seamless experience.",
			"imgPreview": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/MyVsZKCFlhaGQdVAQd9lz/f7ccb4b23730ccd7e9cf15d218357167/polyfill-io-now-available-on-cdnjs-reduce-your-supply-chain-risk-BE8o4c.png"
		},
		"primary_author": {},
		"published_at": "2024-02-29T17:51:32.000+00:00",
		"slug": "polyfill-io-now-available-on-cdnjs-reduce-your-supply-chain-risk",
		"tags": [
			{
				"id": "1goKAxv27P7ytwqLodJSAK",
				"name": "CDNJS",
				"slug": "cdnjs"
			},
			{
				"id": "78aSAeMjGNmCuetQ7B4OgU",
				"name": "JavaScript",
				"slug": "javascript"
			},
			{
				"id": "48XxAr8BFykC1JZjxOCtZA",
				"name": "Supply Chain Attacks",
				"slug": "supply-chain-attacks"
			}
		],
		"title": "polyfill.io now available on cdnjs: reduce your supply chain risk",
		"updated_at": "2024-08-27T01:00:41.501Z",
		"url": "https://blog.cloudflare.com/polyfill-io-now-available-on-cdnjs-reduce-your-supply-chain-risk"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.blurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"search.clear": "Clear",
		"search.filter": "Filter",
		"search.source": "Source",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"search.filters": "Filters",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"search.language": "Language",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"search.result_stat": "Results <strong>{search_range}</strong> of <strong>{search_total}</strong> for <strong>{search_keyword}</strong>",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"search.source_location": "Source/Location",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}